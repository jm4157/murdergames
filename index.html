<!DOCTYPE html>
<html>
	<head>
		<script type="text/javascript">
			window.cookieconsent_options = {"message":"This website uses cookies for ads and traffic analysis.","dismiss":"Got it!","learnMore":"Learn more","link":"http://orteil.dashnet.org/cookieconsentpolicy.html","target":"_blank","theme":"http://orteil.dashnet.org/cookieconsent.css","domain":"dashnet.org"};
		</script>

		<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/1.0.9/cookieconsent.min.js"></script>

		<title>Murder Games by Orteil</title>
		<meta charset="utf-8">
		<!--
		
		Code and graphics copyright Orteil, 2018
		Feel free to alter this code to your liking, but please do not re-host it, do not profit from it and do not present it as your own.
		
		Please note : this was made in like 3 days, code structure is a big old mess
		
		//TODO :
			-more trait events
			-allow action func to override the text; this way, we can have special conditional events (ie. scavenger finding different kinds of items in one action)
			-localstorage save
			-load from pastebin
			-better parsing : [1:They] (uppercase), [1:they|does|do] (>he does, she does, they do), [1:they] find[-s|] (>he finds, she finds, they find)
			-"it", for inanimate objects
		-->
		
		<script type="text/javascript" src="sortable.js"></script>
	
		<link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,700" rel="stylesheet">
		<style>
		* {box-sizing:border-box;}
		div,input,select,cap
		{
			vertical-align:middle;
		}
		html
		{
			background:url(shadedBorders.png),url(bg.jpg);
			background-size:100% 100%,auto;
			background-attachment:fixed,scroll;
			background-color:#4b413b;
			width:100%;
			height:100%;
		}
		html,body
		{
			margin:0px;
			padding:0px;
		}
		body
		{
			font-family:Verdana;
			font-family:'Roboto Slab',serif;
			font-size:14px;
			line-height:125%;
			color:rgba(255,255,255,0.9);
			text-shadow:0px 1px 0px rgba(0,0,0,0.75);
			overflow:auto;
			min-height:100%;
			position:relative;
			padding-bottom:178px;
		}
		#main
		{
			max-width:720px;
			margin:0px auto;
			padding:16px;
			text-align:center;
		}
		#backToDashnet
		{
			max-width:720px;
			font-size:10px;
			text-align:center;
			margin:0px auto;
			color:rgba(255,255,255,0.6);
			margin-bottom:-20px;
		}
		#credits
		{
			max-width:720px;
			font-size:10px;
			text-align:center;
			margin:0px auto;
			color:rgba(255,255,255,0.6);
		}
		#ad
		{
			text-align:center;
			margin:0px auto;
			/*margin-top:88px;*/
			/*width:720px;
			height:128px;*/
			max-width:970px;
			height:90px;
			/*background:rgba(0,0,0,0.1);*/
			position:absolute;
			left:0px;right:0px;bottom:4px;
		}
		
		a{color:#fff;}
		a:hover{text-shadow:0px 0px 2px #fff;color:#fff;}
		a:active{opacity:0.8;}
		
		.button,input,select
		{
			color:inherit;
			display:inline-block;
			font-size:10px;
			background:rgba(0,0,0,0.5);
			border-radius:2px;
			box-shadow:0px 1px 0px rgba(255,255,255,0.25) inset,0px 0px 0px 1px #000,0px 1px 0px 1px rgba(255,255,255,0.1);
			padding:1px 4px;
			margin:2px;
			height:2em;
			border:none;
		}
		input
		{
			box-shadow:0px 0px 0px 1px rgba(255,255,255,0.25) inset,0px 0px 0px 1px #000,0px 1px 0px 1px rgba(255,255,255,0.1);
		}
		.button
		{
			cursor:pointer;
			height:auto;
			padding:1px 8px;
		}
		.bigButton
		{
			background:rgba(16,54,94,0.5);
			color:#33e0ff;
			font-size:12px;
			padding:4px 8px;
			letter-spacing:3px;
			font-variant:small-caps;
			font-weight:bold;
		}
		.button:hover,input:hover,select:hover
		{
			background:rgba(0,0,0,0.25);
		}
		.button:active,input:active,select:active,.button:focus,input:focus,select:focus
		{
			background:rgba(0,0,0,0.75);
		}
		/*.button:active
		{
			padding-bottom:0px;
			margin-top:3px;
		}*/
		
		.bigButton:hover
		{background:rgba(16,54,94,0.25);color:#fff;}
		.bigButton:active,.bigButton:focus
		{background:rgba(16,54,94,0.75);}
		
		.box,.team
		{
			border-radius:8px;
			padding:4px 8px;
			margin:8px 0px;
			box-shadow:0px 0px 0px 1px rgba(0,0,0,0.5),0px 1px 0px rgba(255,255,255,0.25) inset;
			text-align:left;
			background:rgba(0,0,0,0.1);
		}
		.box.red,.box.blue,.box.teamless
		{font-size:12px;padding:8px 12px;}
		.box.red
		{background:url(bgRed.jpg) fixed,rgba(151,47,26,0.5);color:#ff9333;}
		.box.blue
		{background:url(bgBlue.jpg) fixed,rgba(16,54,94,0.5);color:#33e0ff;}
		.box.blue e{color:#fff;}
		.team
		{
			position:relative;
		}
		.team.teamless{background:rgba(128,128,128,0.2);}
		.membersList{min-height:24px;}
		.char
		{
			border-radius:10px;
			font-size:10px;
			background:rgba(255,255,255,0.05);
			box-shadow:0px 1px 0px rgba(255,255,255,0.1) inset;
			padding:2px;
			transition:background 0.1s;
			padding-left:58px;
			min-height:52px;
			position:relative;
		}
		.char:nth-child(odd)
		{
			background:rgba(0,0,0,0.05);
			box-shadow:0px 1px 0px rgba(0,0,0,0.1) inset;
		}
		
		.action
		{
			text-align:center;
			font-size:12px;
		}
		
		e
		{
			color:#33e0ff;
			font-weight:bold;
		}
		
		header
		{
			display:block;
			background:linear-gradient(to right,rgba(0,0,0,0),rgba(0,0,0,0.25),rgba(0,0,0,0));
			font-variant:small-caps;
			font-weight:bold;
			font-size:16px;
			letter-spacing:3px;
			padding:0px 8px;
			margin:4px;
			color:#33e0ff;
		}
		header:after
		{
			content:'';
			display:block;
			background:linear-gradient(to right,rgba(16,54,94,0),rgba(16,54,94,0.75),rgba(16,54,94,0));
			background:linear-gradient(to right,rgba(51,224,255,0),rgba(51,224,255,0.75),rgba(51,224,255,0));
			height:1px;
			width:100%;
			margin:4px 0px;
		}
		header:before
		{
			content:'';
			display:block;
			background:linear-gradient(to right,rgba(16,54,94,0),rgba(16,54,94,0.75),rgba(16,54,94,0));
			background:linear-gradient(to right,rgba(51,224,255,0),rgba(51,224,255,0.75),rgba(51,224,255,0));
			height:1px;
			width:100%;
			margin:4px 0px;
		}
		cap
		{
			font-variant:small-caps;
			font-weight:bold;
			display:inline-block;
		}
		
		.pic
		{
			width:48px;
			height:48px;
			overflow:hidden;
			border-radius:8px;
			padding:1px;
			margin:1px;
			box-shadow:0px 0px 0px 1px rgba(0,0,0,0.5),2px 2px 2px rgba(0,0,0,0.5);
			background:rgba(255,255,255,0.5);
		}
		/*.char>.pic{margin:0px 8px 0px 0px;float:left;}*/
		.picBox
		{
			line-height:0px;
			position:absolute;
			left:0px;top:0px;
			margin:1px;
		}
		.action .pic{margin:4px;}
		.pic.intext
		{
			width:1.5em;height:1.5em;
			box-shadow:none;
			border-radius:0px;
			vertical-align:middle;
			margin-top:-2px;
		}
		
		.picSkull
		{
			display:inline-block;
			position:relative;
			width:0px;
			height:0px;
			z-index:10;
			filter:drop-shadow(2px 2px 2px rgba(0,0,0,0.5));
			pointer-events:none;
		}
		.picSkull:before
		{
			content:'';
			display:block;
			width:18px;
			height:20px;
			background:url(skull.png);
			position:absolute;
			left:-18px;top:-18px;
		}
		
		.picWound
		{
			display:inline-block;
			position:relative;
			width:0px;
			height:0px;
			z-index:10;
			filter:drop-shadow(2px 2px 2px rgba(0,0,0,0.5));
			pointer-events:none;
		}
		.picWound:before
		{
			content:'';
			display:block;
			width:18px;
			height:20px;
			background:url(status/wounded.png);
			position:absolute;
			left:-18px;top:-18px;
		}

		.picGhost
		{
			display:inline-block;
			position:relative;
			width:0px;
			height:0px;
			z-index:10;
			filter:drop-shadow(2px 2px 2px rgba(0,0,0,0.5));
			pointer-events:none;
		}
		.picGhost:before
		{
			content:'';
			display:block;
			width:18px;
			height:20px;
			background:url(status/ghost.png);
			position:absolute;
			left:-18px;top:-18px;
		}

		.picZombie
		{
			display:inline-block;
			position:relative;
			width:0px;
			height:0px;
			z-index:10;
			filter:drop-shadow(2px 2px 2px rgba(0,0,0,0.5));
			pointer-events:none;
		}
		.picZombie:before
		{
			content:'';
			display:block;
			width:18px;
			height:20px;
			background:url(status/zombie.png);
			position:absolute;
			left:-18px;top:-18px;
		}

		.bit
		{
			border-radius:4px;
			padding:1px 6px;
			background:rgba(0,0,0,0.2);
			cursor:pointer;
			display:inline-block;
			vertical-align:initial;
			box-shadow:0px 1px 0px rgba(255,255,255,0.2) inset,0px 0px 0px 1px rgba(0,0,0,0.5);
		}
		.bit:hover
		{
			background:rgba(0,0,0,0.4);
		}
		
		#popups
		{
			display:flex;
			justify-content:center;
			align-items:center;
			z-index:1000000;
			position:fixed;
			left:0px;top:0px;right:0px;bottom:0px;
			pointer-events:none;
		}
		.darken
		{
			position:absolute;
			left:0px;top:0px;right:0px;bottom:0px;
			pointer-events:auto;
			background:rgba(0,0,0,0.25);
			z-index:100;
		}
		.popup
		{
			width:40%;
			max-height:90%;
			overflow-y:auto;
			pointer-events:auto;
			z-index:1000;
			background:rgba(0,0,0,0.75);
			padding:12px 16px;
			text-align:center;
			filter:drop-shadow(4px 4px 8px rgba(0,0,0,0.5));
		}
		
		#calibrator
		{
			position:absolute;left:0px;top:0px;visibility:hidden;pointer-events:none;
		}
		.beingAdded
		{
			height:0px;min-height:initial;transition:height 0.1s;overflow-y:hidden;
		}
		.beingRemoved
		{
			transition:height 0.25s;min-height:initial;overflow-y:hidden;
			pointer-events:none;
		}
		
		.team.hasHandle{margin-left:15px;border-top-left-radius:0px;border-bottom-left-radius:0px;}
		.char.hasHandle{margin-left:15px;border-top-left-radius:0px;border-bottom-left-radius:0px;}
		.handle
		{
			cursor:move;
			background:url(friction.png) rgba(255,255,255,0.1);
			box-shadow:0px 0px 0px 1px rgba(0,0,0,0.5),0px 1px 0px rgba(255,255,255,0.25) inset,0px 0px 0px 1px rgba(255,255,255,0.15) inset;
			border-radius:4px 0px 0px 4px;
			position:absolute;left:-15px;top:0px;bottom:0px;
			width:14px;
		}
		.handle:hover{background-color:rgba(255,255,255,0.2);}
		
		.dragGhost
		{
			background:rgba(255,255,255,0.2) !important;
			filter:brightness(150%);
			position:relative;
			left:-4px;
		}
		
		
		.pucker{animation:pucker 0.2s ease-out;animation-fill-mode:forwards;}
		@keyframes pucker
		{
			0% {transform:scale(1,1);}
			10% {transform:scale(1.15,0.85);}
			20% {transform:scale(1.2,0.8);}
			50% {transform:scale(0.75,1.25);}
			70% {transform:scale(1.05,0.95);}
			90% {transform:scale(0.95,1.05);}
			100% {transform:scale(1,1);}
		}
		</style>
	</head>
	<body id="body">
		<div id="popups"></div>
		<div id="backToDashnet"><cap><a class="button" href="https://dashnet.org/" target="_blank">&lt; back to DashNet</a> <a class="button" href="https://discordapp.com/invite/cookie" target="_blank">official Discord</a></cap></div>
		<div id="main"></div>
		<div id="credits">by <a href="http://orteil.dashnet.org/" target="_blank">Orteil</a>, 2018</div>
		<div id="ad">
			<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
			<!-- Murder Games -->
			<ins class="adsbygoogle"
				 style="display:block"
				 data-ad-client="ca-pub-8491708950677704"
				 data-ad-slot="6880466602"
				 data-ad-format="auto"
				 data-full-width-responsive="true"></ins>
			<script>
			(adsbygoogle = window.adsbygoogle || []).push({});
			</script>
		</div>
	</body>
</html>


<script>

//lib
l=function(d){return document.getElementById(d);};
c=function(a){return a[Math.floor(Math.random()*a.length)];};

shuffle=function(a){
    var j, x, i;
    for (i = a.length - 1; i > 0; i--) {
        j = Math.floor(Math.random() * (i + 1));
        x = a[i];
        a[i] = a[j];
        a[j] = x;
    }
    return a;
}

/*String.prototype.replaceAll = function(search, replacement) {
    var target = this;
    return target.replace(new RegExp(search, 'g'), replacement);
};*/

String.prototype.replaceAll=function(search,replacement)
{return this.split(search).join(replacement);};

rand=function()
{
	if (arguments.length==2) return Math.floor(Math.random()*(arguments[1]-arguments[0])+arguments[0]);
	else return Math.floor(Math.random()*arguments[0]);
};
frand=function()
{
	if (arguments.length==2) return (Math.random()*(arguments[1]-arguments[0])+arguments[0]);
	else return (Math.random()*arguments[0]);
};

addEvent=function(html_element,event_name,event_function)
{
	return html_element.addEventListener(event_name,event_function,false);
};
triggerAnim=function(element,anim)
{
	if (!element) return;
	element.classList.remove(anim);
	void element.offsetWidth;
	element.classList.add(anim);
};

cloneDom=function(el)
{
	//return a clone of el with all IDs stripped
	var alias=el.cloneNode();
	alias.innerHTML=el.innerHTML;
	alias.removeAttribute('id');
	var elems=alias.getElementsByTagName('*');for (var i=0;i<elems.length;i++){elems[i].removeAttribute('id');}
	return alias;
}


SmoothToggles=function()
{
	let calibrator=document.createElement('div');
	document.body.appendChild(calibrator);
	animAdd=function(el)
	{
		var alias=cloneDom(el);
		calibrator.appendChild(alias);
		el.classList.add('beingAdded');
		let h=alias.offsetHeight;
		alias.remove();
		el.style.height=h+'px';
		setTimeout(function(){if (el){el.classList.remove('beingAdded');el.style.removeProperty('height');}},100);
	}
	animRemove=function(el)
	{
		var alias=cloneDom(el);
		calibrator.appendChild(alias);
		let h=alias.offsetHeight;
		alias.remove();
		el.style.height=h+'px';
		void el.offsetWidth;
		el.classList.add('beingRemoved');
		el.style.height='0px';
		setTimeout(function(){if (el){el.remove();}},250);
	}
}();


//dubious reliability
STRCLN=function(str)
{
	str=str.toString();
	str=str.replaceAll('<','&lt;');
	str=str.replaceAll('>','&gt;');
	str=str.replaceAll('\'','&#39;');
	str=str.replaceAll('"','&#34;');
	return str;
};
INTCLN=function(str)
{
	str=parseInt(str);
	return str;
}




G={
	init:function()
	{
		G.launched=true;
		
		G.popup=function(text,func)
		{
			var str=`
				<div class="darken" id="darken"></div>
				<div class="popup box" id="popup">${text}<div><div id="closePopup" class="button bigButton">Close</div></div></div>
			`;
			l('popups').innerHTML=str;
			addEvent(l('darken'),'click',G.closePopup);
			addEvent(l('closePopup'),'click',G.closePopup);
			if (func) func();
			//animAdd(l('popup'));

		}
		G.closePopup=function()
		{
			if (l('popup'))
			{
				l('popups').innerHTML='';
				//animRemove(l('popup'));
			}
		}
		addEvent(document,'keydown',function(e){if (e.key=='Escape'){G.closePopup();}});
		
		G.glob={};
		//perks
		
		G.perks=[];
		G.perksBN=[];
		G.perk=function(o)
		{
			for (var i in G.glob){this[i]=G.glob[i];}
			for (var i in o){this[i]=o[i];}
			this.id=G.perks.length;
			G.perks.push(this);
			G.perksBN[this.name]=this;
		}
		
		G.glob={type:'trait',def:true};
		new G.perk({name:`no perk`,desc:`No perk selected.`});
		
		new G.perk({name:`annoying`,desc:`Horrible to be around. Tends to get killed off first.`});
		new G.perk({name:`brash`,desc:`Charges headfirst into situations.`});
		new G.perk({name:`bulky`,desc:`Capable of resisting stronger attacks.`});
		new G.perk({name:`composed`,desc:`Keeps a level head in all situations.`});
		new G.perk({name:`cute`,desc:`Everybody likes them! Others may go out of their way to protect them.`});
		new G.perk({name:`heroic`,desc:`Tries to protect others, even to their own detriment.`});
		new G.perk({name:`kind`,desc:`Will act selflessly and generously to help others.`});
		new G.perk({name:`lunatic`,desc:`Susceptible to gain and lose random perks regularly.`});
		new G.perk({name:`manipulative`,desc:`Will manipulate and betray others if given the chance.`});
		new G.perk({name:`naive`,desc:`Gullible and easy to mislead.`});
		new G.perk({name:`romantic`,desc:`Often more interested in looking for love than making war.`});
		new G.perk({name:`scavenger`,desc:`Finds more resources than most.`});
		new G.perk({name:`sneaky`,desc:`Tries to win from the shadows.`});
		new G.perk({name:`sociopath`,desc:`Simply doesn't care about others.`});
		new G.perk({name:`suicidal`,desc:`Probably won't survive very long.`});
		new G.perk({name:`survivalist`,desc:`Has a breadth of survival knowledge, unlikely to make mistakes.`});
		new G.perk({name:`unstable`,desc:`May snap at any moment.`});

		G.glob={type:'status'};
			G.glob.disable=true;//mark the character as disabled; disabled characters cannot do any actions that don't specifically call for this perk
			G.glob.out=false;//mark the character as out; out characters cannot do any actions that don't specifically call for this perk
		//condition statuses
		new G.perk({name:`frenzied`,desc:`Experiencing a fit of violent rage.`});
		new G.perk({name:`terrified`,desc:`Running away from something horrifying.`});
		new G.perk({name:`shell-shocked`,desc:`Has seen too much. May not be of much use for a while.`});
		new G.perk({name:`trapped`,desc:`Stuck in a trap, and waiting to be freed, if something doesn't kill them first.`});
		new G.perk({name:`dead`,desc:`Dead and gone. Sorry!`,out:true});
		new G.perk({name:`ghost`,desc:`Brought back from the dead in a mischievous incorporeal form.`,out:true});
		new G.perk({name:`zombie`,desc:`Brought back from the dead in a smelly, mindless form.`,out:true});
		new G.perk({name:`sheep`,desc:`Has been turned into a sheep through some magical mean.`,out:true});
		new G.perk({name:`revived`,desc:`Was just resurrected through some miracle or other.`,out:true});
		//wound statuses
		new G.perk({name:`scarred`,desc:`Scarred from previous wounds.`,disable:false});
		new G.perk({name:`bleeding out`,desc:`Losing blood at an alarming rate. Needs immediate treatment.`});
		new G.perk({name:`bruised`,desc:`Recieved a minor beating.`,disable:false});
		new G.perk({name:`concussed`,desc:`Been pounded badly.`});
		new G.perk({name:`burnt`,desc:`Singed quite a lot. Everything hurts.`,out:true});
		//action statuses
		new G.perk({name:`has killed`,desc:`Caused someone's death.`,disable:false});
		new G.perk({name:`set trap`,desc:`Laid down some traps that others may get caught in...`,disable:false});
		
		
		
		
		G.glob={type:'item'};
			G.glob.def=true;
		new G.perk({name:`no item`,desc:`No item selected.`});
		
		new G.perk({name:`ancient scepter`,desc:`Calls forth ancient hexes and curses on your adversaries.`});
		new G.perk({name:`axe`,desc:`Makes quick, if messy work of anyone who'd stand in your way.`});
		new G.perk({name:`big stick`,desc:`Rather crude, but can bash an unsuspecting enemy just fine.`});
		new G.perk({name:`black belt`, desc:`Certifies you know martial arts.`});
		new G.perk({name:`bow`,desc:`Its arrows can easily chop a head clean off from a distance if skillfully wielded.`});
		new G.perk({name:`brass knuckles`, desc:`Aids in fisticuffs.`});
		new G.perk({name:`crossbow`, desc:`Fires bolts from afar.`});
		new G.perk({name:`egg`,desc:`What could be inside?`});
		new G.perk({name:`flamethrower`,desc:`Careful! May set both foes and friends on fire.`});
		new G.perk({name:`grenade`,desc:`A single-use explosive device to blow several enemies to bits.`});
		new G.perk({name:`handgun`,desc:`Takes down a target quite reliably if you know how to aim.`});
		new G.perk({name:`knives`, desc:`A set of knives for nefarious uses.`});
		new G.perk({name:`lasergun`,desc:`Ultra-concentrated energy shots that burn through practically anything.`});
		new G.perk({name:`magic wand`,desc:`Casts a variety of spells upon your foes.`});
		new G.perk({name:`mallet`, desc:`Useful in hitting giant moles, and maybe other things.`});
		new G.perk({name:`nitro`, desc:`Lets you boost DiscOrder, and doesn't do much else.`});
		new G.perk({name:`pitchfork`,desc:`Used to stack hay and stab your friends.`});
		new G.perk({name:`rocket launcher`,desc:`A dangerous weapon; excels at blowing stuff up.`});
		new G.perk({name:`slingshot`,desc:`Fires small projectiles. Not quite deadly as much as slightly annoying.`});
		new G.perk({name:`shears`, desc:`Used to tend to plants, and occasionally attack.`});
		new G.perk({name:`shield`, desc:`Can protect from many attacks.`});
		new G.perk({name:`shotgun`,desc:`Delivers a powerful, low-accuracy blow.`});
		new G.perk({name:`spear`, desc:`A long weapon that can keep enemies at bay.`});
		new G.perk({name:`sword`,desc:`A classic bladed weapon popular since medieval times.`});
		new G.perk({name:`trowel`,desc:`A gardening tool. Why would you fight with this?`});
		
			G.glob.def=false;
		new G.perk({name:`wish ring`,desc:`Will unpredictably respond to wishes in dire situations.`});

		new G.perk({name:`pet blorb`,desc:`A small goopy friend that jumps around.`});
		new G.perk({name:`pet fairy`,desc:`A vicious ball of feathers and fangs.`});
		new G.perk({name:`pet mini-griffoth`,desc:`A miniature steed that is both loyal and royal.`});
		new G.perk({name:`pet winged troupple`,desc:`A fishy friend that'll keep you healthy.`});

		new G.perk({name:`leather scraps`,desc:`Tribal-looking clothing. Provides minimal protection.`});
		new G.perk({name:`bikini`,desc:`Quite alluring, but not much help in combat situations.`});
		new G.perk({name:`dapper suit`,desc:`Turns anyone into a snappy dresser.`});
		new G.perk({name:`parka`,desc:`Keeps you protected from the elements and, you suppose, some of the wimpier physical attacks.`});
		new G.perk({name:`knight armor`,desc:`Excellent physical protection, but heavy and uncomfortable.`});
		new G.perk({name:`combat gear`,desc:`Used by military forces. Provides near-perfect protection from all but the deadliest attacks.`});
		new G.perk({name:`wizard robe`,desc:`Can greatly amplify magic powers. Comes with a pointy hat.`});
		new G.perk({name:`ornate plate`,desc:`Flashy! Acrobatic! Useless!`});
		
		
		//creator
		G.setupData=0;
		G.creator=function()
		{
			G.exportSetup=function(data)
			{
				var o={
					teams:[],
					chars:[],
				};
				if (data && data!=-1)
				{
					o=data;
				}
				else
				{
					var teams=G.teams;
					for (var i in teams)
					{
						var base=teams[i];
						if (!base.teamless) base.name=l(base.l.id+'-name').value; else base.name='NOTEAM';
						for (var i in base.members)
						{
							var member=base.members[i];
							member.name=l(member.l.id+'-name').value;
							member.gender=parseInt(l(member.l.id+'-gender').options[l(member.l.id+'-gender').selectedIndex].value);
							member.tier=parseInt(l(member.l.id+'-tier').options[l(member.l.id+'-tier').selectedIndex].value);
							var val=member.pic;
							if (val.length<3) member.pic='';
							var perks=[];
							var perkN=0;
							while (l(member.l.id+'-perk-'+perkN))
							{
								var el=l(member.l.id+'-perk-'+perkN);
								var perk=G.perks[el.options[el.selectedIndex].value];
								if (perk.name!='no perk' && perk.name!='no item' && (perk.type!='trait' || perks.indexOf(perk.name)==-1)) perks.push(perk.name);
								perkN++;
							}
							o.chars.push({name:member.name,g:member.gender,t:member.tier,pic:member.pic,team:member.team.name,perks:perks});
						}
						o.teams.push({name:base.name});
					}
				}
				if (data!=-1)
				{
					var str=`
						<header>Exporting setup</header>
						<div>Copy this text. You can later import your setup by pasting this back in the import menu.</div>
						<textarea id="textareaPrompt" style="width:100%;height:128px;" readonly>${JSON.stringify(o)}</textarea>
					`;
					G.popup(str,function(){
						l('textareaPrompt').focus();
						l('textareaPrompt').select();
					});
					
					//localStorage.setItem('murderGames',JSON.stringify(o));
				}
				else return o;
			}
			G.importSetup=function(str)
			{
				//meant to be called from creator screen only
				
				if (!str)
				{
					var str=`
						<header>Importing setup</header>
						<div style="overflow:hidden;"><div id="importDesc">Paste in the text you were given on setup export.</div></div>
						<textarea id="textareaPrompt" style="width:100%;height:128px;"></textarea>
					`;
					G.popup(str,function(){
						l('textareaPrompt').focus();
						l('closePopup').innerHTML='Cancel';
						l('closePopup').insertAdjacentHTML('beforebegin','<div id="confirmPopup" class="button bigButton">Load</div>');
						addEvent(l('confirmPopup'),'click',function(){
							var str=l('textareaPrompt').value;
							if ((str.length>0) && G.importSetup(str)) G.closePopup();
							else {l('importDesc').innerHTML=`<span style="color:#e2461f;">Looks like that's not a valid setup string, sorry!</span>`;triggerAnim(l('importDesc'),'pucker');}
						});
					});
				}
				else
				{
					var o={};
					try{o=JSON.parse(str);}catch(e){o=0;}
					if (!o || !o.teams || !o.chars) return false;
					//l('creator').innerHTML='';
					var nodes=l('creator').getElementsByClassName('team');
					for (var i=nodes.length-1;i>=0;i--){nodes[i].remove();}
					
					G.teams=[];
					var domN=0;
					var teams={};
					for (var i in o.teams)
					{
						teams[o.teams[i].name]={
							name:STRCLN(o.teams[i].name),
							chars:[],
						};
					}
					for (var i in o.chars)
					{
						teams[o.chars[i].team].chars.push({
							name:STRCLN(o.chars[i].name),
							gender:INTCLN(o.chars[i].g),
							tier:INTCLN(o.chars[i].t||0),
							pic:STRCLN(o.chars[i].pic),
							perks:o.chars[i].perks,
						});
					}
					var hasTeamless=false;
					for (var i in teams){if (teams[i].name=='NOTEAM') hasTeamless=true;}
					if (!hasTeamless) addTeam({name:'NOTEAM',chars:[]});
					for (var i in teams){addTeam(teams[i]);}
					for (var i in G.teams){refreshTeam(G.teams[i]);}
					return true;
				}
			}
			l('main').innerHTML=`
				<div class="box blue">
					<div><cap>Hey there!</cap></div>
					<div>This is a game about pitting you and your friends against each other to see who makes it out alive.</div>
					<div>The game plays itself; you only have to click the "Next round" button to progress.</div>
					<div>Create your teams below then watch the heads roll!</div>
					<div>(Don't forget to export your setups if you want to re-use them later!)</div>
					<div style="opacity:0.5;font-size:10px;float:left;">inspired by <a href="http://brantsteele.net/hungergames/disclaimer.php" target="_blank">Hunger Games Simulator</a></div>
					<div style="opacity:0.5;font-size:10px;float:right;">-Orteil</div>
					<div style="clear:both;"></div>
				</div>
				<!--<div class="box red"><b>Warning :</b> may contain traces of bugs.</div>-->
				<div style="text-align:left;overflow:hidden;"><div class="button" id="importSetup">Import an existing setup...</div> <div class="button" id="exportSetup">Export this setup...</div><div style="float:right;"><div class="button" id="start2">Start round 1 &gt;</div></div></div>
				<header>Teams</header>
				<div id="creator"></div>
				<div style="text-align:left;"><div class="button" id="addTeam">Add team</div></div>
				<header><div class="button bigButton" id="start">Start round 1</div></header>
			`;
			
			addEvent(l('addTeam'),'click',function(){addTeam();});
			addEvent(l('start'),'click',function(){G.start();});
			addEvent(l('start2'),'click',function(){G.start();});
			addEvent(l('importSetup'),'click',function(){G.importSetup();});
			addEvent(l('exportSetup'),'click',function(){G.exportSetup();});
			G.teams=[];
			var domN=0;
			
			Sortable.create(l('creator'),{group:'teams',ghostClass:'dragGhost',handle:'.handle',onEnd:function(e){
				var el=e.item;
				var me=0;
				for (var i in G.teams)
				{
					var it=G.teams[i];
					if (it.l==el) {me=it;break;}
				}
				G.teams.splice(G.teams.indexOf(me),1);
				G.teams.splice(e.newIndex,0,me);
			}});
			
			var randTeamNames=[`Gazelle`,`Mammoth`,`Phoenix`,`Wolf`,`Tiger`,`Bear`,`Polar bear`,`Viper`,`Cobra`,`Owl`,`Jaguar`,`Lion`,`Spider`,`Scorpion`,`Beetle`,`Wasp`,`Mantis`,`Mongoose`,`T-rex`,`Dragon`,`Gorilla`,`Panda`,`Zebra`,`Unicorn`,`Howler monkey`,`Fox`,`Bunny`,`Falcon`,`Yeti`,`Ox`,`Boar`,`Gryphon`,`Rhino`,`Shark`,`Dolphin`,`Whale`,`Salmon`,`Lobster`,`Hydra`,`Anomalocaris`,`Trilobite`,`Weasel`,`Frog`,`Toad`,`Tortoise`,`Gecko`,`Salamander`,`Lynx`,`Pelican`,`Kitten`,`Puppy`,];
			for (var i in randTeamNames){randTeamNames[i]=`Team `+randTeamNames[i];}
			
			var randNamesM=[`Alastor`,`Bort`,`Champ`,`Dennis`,`Emett`,`Frank`,`Gordon`,`Henry`,`Isaac`,`Jeff`,`Ken`,`Lance`,`Maurice`,`Nathan`,`Oliver`,`Pete`,`Quentin`,`Rafael`,`Sam`,`Todd`,`Umberto`,`Vince`,`Will`,`Xavier`,`Yann`,`Zach`];
			var randNamesF=[`Adeline`,`Bonnie`,`Cecilia`,`Dania`,`Eleanor`,`Fran`,`Gertrude`,`Hazel`,`Ingrid`,`Jen`,`Klara`,`Linda`,`Maud`,`Odile`,`Phyllis`,`Quinn`,`Rose`,`Sophia`,`Tabitha`,`Undine`,`Vanilla`,`Wanda`,`Xia`,`Yasmin`,`Zoe`];
			
			let addTeam=function(o)
			{
				//get random name (prevent duplicates)
				var o=o||{};
				var name='';
				if (o.name) name=o.name;
				else
				{
					var freeNames=randTeamNames.slice(0);
					for (var i in G.teams){if (freeNames.indexOf(G.teams[i].name)!=-1) freeNames.splice(freeNames.indexOf(G.teams[i].name),1);}
					if (freeNames.length==0) freeNames.push('Team Extra');
					//var name='Team #'+(G.teams.length+1);
					name=c(freeNames);
				}
				let team={name:name,members:[],l:0,id:domN};
				if (name=='NOTEAM') team.teamless=true;
				l('creator').insertAdjacentHTML('beforeEnd','<div class="team hasHandle" id="dom'+domN+'"></div>');
				team.l=l('dom'+domN);
				if (!team.teamless)
				{
					team.l.innerHTML=`
						<div class="button" style="float:right;" id="${team.l.id+'-delete'}" title="Delete this team">X</div>
						<div class="handle"></div>
						<div><cap>Team name :</cap> <input type="text" id="${team.l.id+'-name'}" value="${team.name}"/></div>
						<div><cap id="${team.l.id+'-membersN'}"></cap></div>
						<div id="${team.l.id+'-members'}" class="membersList"></div>
						<div><div class="button" id="${team.l.id+'-addChar'}">Add member</div></div>
					`;
					addEvent(l(team.l.id+'-delete'),'click',function(){
						G.teams.splice(G.teams.indexOf(team),1);
						animRemove(team.l);
					});
				}
				else
				{
					team.l.classList.add('teamless');
					team.l.innerHTML=`
						<div class="handle"></div>
						<div><cap>Unaffiliated</cap><span style="font-size:10px;vertical-align:middle;"> - people put in this box do not belong to any team.</span></div>
						<div id="${team.l.id+'-members'}" class="membersList"></div>
						<div><div class="button" id="${team.l.id+'-addChar'}">Add person</div></div>
					`;
				}
				addEvent(l(team.l.id+'-addChar'),'click',function(){addChar(team);});
				
				Sortable.create(l(team.l.id+'-members'),{group:'chars',ghostClass:'dragGhost',handle:'.handle',onEnd:function(e){
					//find the char we just moved and the team we moved it to and update its team
					var el=e.item;
					var toEl=e.to.closest('.team');
					var me=0;
					for (var i in team.members)
					{
						var it=team.members[i];
						if (it.l==el) {me=it;break;}
					}
					var newTeam=0;
					for (var i in G.teams)
					{
						var it=G.teams[i];
						if (it.l==toEl) {newTeam=it;break;}
					}
					if (me && newTeam)
					{
						if (me.team)
						{
							me.team.members.splice(me.team.members.indexOf(me),1);
							refreshTeam(me.team);
						}
						me.team=newTeam;
						me.team.members.splice(e.newIndex,0,me);
						refreshTeam(me.team);
					}
				}});
				
				domN++;
				G.teams.push(team);
				if (!o.chars)
				{
					addChar(team);
					addChar(team);
				}
				else
				{
					for (var i in o.chars)
					{
						addChar(team,o.chars[i]);
					}
				}
				refreshTeam(team);
				animAdd(team.l);
				return team;
			}
			let refreshTeam=function(team)
			{
				if (team.teamless)
				{
				}
				else
				{
					if (team.members.length==0) str='No members';
					else if (team.members.length==1) str='1 member :';
					else str=team.members.length+' members :';
					l(team.l.id+'-membersN').innerHTML=str;
				}
			}
			let addChar=function(team,o)
			{
				var o=o||{};
				var gender=(typeof o.gender !== 'undefined')?o.gender:c([0,0,0,1,1,1,2]);
				var tier=(typeof o.tier !== 'undefined')?o.tier:0;
				var name='';
				if (o.name) name=o.name;
				else
				{
					var freeNames=(gender==0?(randNamesM.slice(0)):gender==1?(randNamesF.slice(0)):(randNamesM.slice(0).concat(randNamesF.slice(0))));
					for (var i in G.teams){for (var ii in G.teams[i].members){if (freeNames.indexOf(G.teams[i].members[ii].name)!=-1) freeNames.splice(freeNames.indexOf(G.teams[i].members[ii].name),1);}}
					if (freeNames.length==0) freeNames.push('Nobody');
					name=c(freeNames);
				}
				
				let char={team:team,name:name,pic:o.pic||'defPic.jpg',gender:gender,tier:tier,perks:[],l:0,id:domN};
				l(team.l.id+'-members').insertAdjacentHTML('beforeend','<div class="char hasHandle" id="dom'+domN+'"></div>');
				char.l=l('dom'+domN);
				
				var traitsStr='';
				var itemsStr='';
				
				var traits=[];
				var traitsList=[];
				for (var i in G.perks)
				{
					var me=G.perks[i];
					if (me.def && me.type=='trait') traitsList.push(me);
				}
				var items=[];
				var itemsList=[];
				for (var i in G.perks)
				{
					var me=G.perks[i];
					if (me.def && me.type=='item') itemsList.push(me);
				}
				
				var minTraits=2;
				var minItems=1;
				
				if (!o.perks)
				{
					for (var i=0;i<minTraits;i++)
					{
						traits.push(c(traitsList));
					}
					for (var i=0;i<minItems;i++)
					{
						items.push(c(itemsList));
					}
				}
				
				if (o.perks)
				{
					for (var i in o.perks)
					{
						var perk=G.perksBN[o.perks[i]];
						if (perk.def && perk.type=='trait') traits.push(perk);
						else if (perk.def && perk.type=='item') items.push(perk);
					}
				}
				while (traits.length<minTraits)
				{
					traits.push(G.perksBN['no perk']);
				}
				while (items.length<minItems)
				{
					items.push(G.perksBN['no item']);
				}
				
				var n=0;
				for (var i=0;i<traits.length;i++)
				{
					traitsStr+=`${perkSelector('trait',char.l.id+'-perk-'+n,traits[i])} `;
					n++;
				}
				for (var i=0;i<items.length;i++)
				{
					itemsStr+=`${perkSelector('item',char.l.id+'-perk-'+n,items[i])} `;
					n++;
				}
				
				char.l.innerHTML=`
					<div class="button" style="float:right;" id="${char.l.id+'-delete'}" title="Delete this person">X</div>
					<div class="handle"></div>
					<div class="picBox"><img src="${char.pic||'defPic.jpg'}" id="${char.l.id+'-pic'}" class="pic"/></div>
					Name : <input type="text" size="14" id="${char.l.id+'-name'}" value="${char.name}"/> 
					<select id="${char.l.id+'-gender'}"><option value="0"${char.gender==0?' selected="selected"':''}>he</option><option value="1"${char.gender==1?' selected="selected"':''}>she</option><option value="2"${char.gender==2?' selected="selected"':''}>they</option></select> 
					<select id="${char.l.id+'-tier'}"><option title="Character acts every round." value="0"${char.tier==0?' selected="selected"':''}>main</option><option title="Character only acts every now and then." value="1"${char.tier==1?' selected="selected"':''}>minor</option></select> 
					Pic URL : <input type="text" size="24" id="${char.l.id+'-picUrl'}" value="${char.pic}"/> 
					<br>
					Perks : ${traitsStr} Item : ${itemsStr} 
				`;
				addEvent(l(char.l.id+'-delete'),'click',function(){
					team.members.splice(team.members.indexOf(char),1);
					animRemove(char.l);
					refreshTeam(team);
				});
				addEvent(l(char.l.id+'-picUrl'),'input',function(){
					var val=l(char.l.id+'-picUrl').value;
					if (val.length<3) val='defPic.jpg';
					l(char.l.id+'-pic').src=val;
					char.pic=val;
				});
				//addEvent(l(char.l.id+'-pic'),'dragstart',function(e){e.preventDefault();});
				
				domN++;
				team.members.push(char);
				animAdd(char.l);
				refreshTeam(team);
				return char;
			}
			
			var perkSelector=function(type,id,def)
			{
				var str='';
				var perks=[];
				for (var i in G.perks)
				{
					var me=G.perks[i];
					if (me.def && me.type==type) perks.push(me);
				}
				var selected=def||c(perks);
				for (var i in perks)
				{
					var me=perks[i];
					str+=`<option value="${me.id}" title="${me.desc}"${me==selected?' selected="selected"':''}>${me.name}</option>`;
				}
				return '<select id="'+id+'">'+str+'</select>';
			}
			
			var team=addTeam({name:'NOTEAM',chars:[]});
			var team=addTeam();
			var team=addTeam();
			
			if (G.setupData) G.importSetup(JSON.stringify(G.setupData));
		}
		
		
		G.viewDetails=function()
		{
			var str=`
				<header>Details</header>
				<div>
			`;
			
			var teams=G.teams.slice(0);
			var teamless={chars:[],name:'NOTEAM'};
			for (var i=0;i<G.chars.length;i++){if (!G.chars[i].team){teamless.chars.push(G.chars[i]);}}
			if (teamless.chars.length>0) teams.unshift(teamless);

			var icon = function(me){
				if (me.has('ghost')) return`<div class="picGhost"></div>`;
				else if (chars[ii].has('zombie')) return `<div class="picZombie"></div>`;
				else if (chars[ii].has('dead')) return `<div class="picSkull"></div>`;
				else if (chars[ii].has('bleeding out')||chars[ii].has('concussed')||chars[ii].has('burnt')) return`<div class="picWound"></div>`;
				else return '';
			}
			
			for (var i=0;i<teams.length;i++)
			{
				var team=teams[i];
				if (team.name=='NOTEAM') str+=`<div class="box team teamless"><cap>Unaffiliated</cap>`;
				else str+=`<div class="box team ${i%2==0?'blue':'red'}"><cap>${team.name}</cap>`;
				for (var ii=0;ii<team.chars.length;ii++)
				{
					var me=team.chars[ii];
					str+=`
					<div class="char" style="font-size:12px;">
						<div class="picBox"><img src="${me.pic}" class="pic" title="${me.name}"/>${icon(me)}</div>
						<div style="text-align:center;">
							<e style="float:left;margin-right:8px;">${me.name}</e>
							<div style="min-width:32%;display:inline-block;"><cap>Perks :</cap> ${me.perks.map(perk=>(perk.type=='trait' && perk.name!='no perk')?('<div class="bit" title="'+perk.desc+'">'+perk.name+'</div>'):'').join(' ')}</div>
							<div style="min-width:32%;display:inline-block;"><cap>Items :</cap> ${me.perks.map(perk=>(perk.type=='item' && perk.name!='no item')?('<div class="bit" title="'+perk.desc+'">'+perk.name+'</div>'):'').join(' ')}</div>
							<div style="min-width:32%;display:inline-block;"><cap>Other :</cap> ${me.perks.map(perk=>(perk.type!='item' && perk.type!='trait')?('<div class="bit" title="'+perk.desc+'">'+perk.name+'</div>'):'').join(' ')}</div>
						</div>
						${me.kills.length>0?('<div style="color:#e2461f;">Killed '+me.kills.length+' (<e>'+me.kills.map(char=>char.name).join(', ')+'</e>)</div>'):''}
						${(me.killer.length>0 && me.has('dead'))?('<div style="color:#e2461f;">Dead, killed by <e>'+me.killer.map(char=>char.name).join(', ')+'</e> ('+me.deathReason+')</div>'):''}
						${(me.killer.length==0 && me.has('dead'))?('<div style="color:#e2461f;">Dead ('+me.deathReason+')</div>'):''}
					</div>`;
				}
				str+=`</div>`;
			}
			str+=`</div>`;
			
			G.popup(str,function(){
			});
		}
		
		G.started=false;
		G.start=function()
		{
			G.started=true;
			G.setupData=G.exportSetup(-1);
			
			G.deaths=0;
			
			var teams=G.teams;
			G.teams=[];
			G.chars=[];
			G.team=function(o)
			{
				this.type='team';
				this.chars=[];
				for (var i in o){this[i]=o[i];}
				for (var i in this.chars){this.chars[i].team=this;}
				G.teams.push(this);
			}
				G.team.prototype.pick=function(n)
				{
					if (this.chars.length<n) return false;
					var members=shuffle(this.chars.slice(0));
					return members.slice(0,n);
				}
				G.team.prototype.dissolve=function()
				{
					//kick all members and delete self
					for (var i in this.chars)
					{
						this.chars[i].team=0;
					}
					G.teams.splice(G.teams.indexOf(this),1);
				}
			G.char=function(o)
			{
				this.type='char';
				this.perks=[];
				this.team=0;
				this.kills=[];
				this.deathReason='';
				this.killer=[];
				for (var i in o){this[i]=o[i];}
				G.chars.push(this);
			}
				G.char.prototype.has=function(perk)
				{
					if (typeof perk==='string')
					{
						if (!G.perksBN[perk]) {console.log('No perk named','"'+perk+'"');return false;}
						perk=G.perksBN[perk];
					}
					for (var i in this.perks)
					{
						if (this.perks[i].name==perk.name) return true;
					}
					return false;
				}
				G.char.prototype.gain=function(perk)
				{
					if (typeof perk==='string')
					{
						if (!G.perksBN[perk]) {console.log('No perk named','"'+perk+'"');return false;}
						perk=G.perksBN[perk];
					}
					if (perk.type=='item' || !this.has(perk)) this.perks.push(perk);
				}
				G.char.prototype.lose=function(perk)
				{
					if (typeof perk==='string')
					{
						if (!G.perksBN[perk]) {console.log('No perk named','"'+perk+'"');return false;}
						perk=G.perksBN[perk];
					}
					if (this.has(perk)) this.perks.splice(this.perks.indexOf(perk),1);
				}
				G.char.prototype.give=function(other,perk)
				{
					if (typeof perk==='string')
					{
						if (!G.perksBN[perk]) {console.log('No perk named','"'+perk+'"');return false;}
						perk=G.perksBN[perk];
					}
					if (this.has(perk)) {this.lose(perk);other.gain(perk);}
				}
				G.char.prototype.die=function(reason)
				{
					if (!this.has('dead'))
					{
						G.deaths++;
						G.deadThisRound.push(this);
						this.gain('dead');
						if (reason) this.deathReason=reason;
						//if (this.team) {this.team.chars.splice(this.team.chars.indexOf(this),1);this.team=0;}
						return true;
					}
					return false;
				}
				G.char.prototype.kill=function(other,reason,accomplices)
				{
					if (other.die(reason))
					{
						this.gain('has killed');
						if (other.killer.indexOf(this)==-1) other.killer.push(this);
						if (this.kills.indexOf(other)==-1) this.kills.push(other);
						if (accomplices)
						{
							if (!Array.isArray(accomplices)) accomplices=[accomplices];
							for (var i in accomplices)
							{
								accomplices[i].gain('has killed');
								if (other.killer.indexOf(accomplices[i])==-1) other.killer.push(accomplices[i]);
								if (accomplices[i].kills.indexOf(other)==-1) accomplices[i].kills.push(other);
							}
						}
					}
				}
				G.char.prototype.leave=function()
				{
					if (this.team) {this.team.chars.splice(this.team.chars.indexOf(this),1);this.team=0;}
				}
				G.char.prototype.join=function(team)
				{
					if (this.team) this.leave();
					if (team) {this.team=team;team.chars.push(this);}
				}
			
			
			//convert team setup into actual members and teams
			for (var i in teams)
			{
				var base=teams[i];
				if (!base.teamless) base.name=STRCLN(l(base.l.id+'-name').value); else base.name='NOTEAM';
				var members=[];
				for (var i in base.members)
				{
					var member=base.members[i];
					member.name=STRCLN(l(member.l.id+'-name').value);
					member.gender=INTCLN(parseInt(l(member.l.id+'-gender').options[l(member.l.id+'-gender').selectedIndex].value));
					member.tier=INTCLN(parseInt(l(member.l.id+'-tier').options[l(member.l.id+'-tier').selectedIndex].value));
					var val=STRCLN(member.pic);
					if (val.length<3) member.pic='defPic.jpg';
					else member.pic=val;
					var perks=[];
					var perkN=0;
					while (l(member.l.id+'-perk-'+perkN))
					{
						var el=l(member.l.id+'-perk-'+perkN);
						var perk=G.perks[el.options[el.selectedIndex].value];
						if (perk.name!='no perk' && perk.name!='no item' && (perk.type!='trait' || perks.indexOf(perk)==-1)) perks.push(perk);
						perkN++;
					}
					var me=new G.char({name:member.name,pic:member.pic,perks:perks,gender:member.gender,tier:member.tier});
					members.push(me);
				}
				if (!base.teamless) new G.team({name:base.name,chars:members});
			}
			
			G.acts=[];
			G.actsForced=[];
			G.actsOther=[];
			let FORCE=-100;
			G.act=function(chance,people,text,func)
			{
				this.chance=chance;
				this.people=people;
				this.text=text;
				this.func=func||0;
				this.uses=0;
				G.acts.push(this);
				if (this.chance==FORCE) G.actsForced.push(this);
				else G.actsOther.push(this);
			}
				G.getActUses=function()
				{
					var list=G.acts.slice(0);
					list.sort((a,b)=>a.uses-b.uses);
					console.log(list.map(me=>(me.uses+' : '+me.text)));
				}
				let testCond=function(val,cond)
				{
					//can handle val:1, val:<1, val:>1
					var op=cond.charAt(0);
					if (op=='<' || op=='>'){cond=cond.substr(1);}
					else op=0;
					cond=parseInt(cond);
					if (op=='>' && val>cond) return true;
					else if (op=='<' && val<cond) return true;
					else if (!op && val==cond) return true;
					else return false;
				}
				G.act.prototype.fit=function(me)
				{
					/*
						returns one or more people/team who fit the given conditions
						the "me" parameter specifies which person/team the first condition must match
						ie. ['shotgun lunatic','- naive'] will return a person with the "shotgun" and "lunatic" perks, and a person who is "naive" and on a different team
						syntax :
							'perk_name'
								> must have the perk
							'!perk_name'
								> must not have the perk
							'perk_name|other_perk|third_perk'
								> must have either of those perks
							'!perk_name|other_perk|third_perk'
								> must not have any of those perks
							'team'
								> must be a team (otherwise must be a person)
							'members:3' 'members:<3' 'members:>3'
								> team must have the specified amount of members
							'alive:3' 'alive:<3' 'alive:>3'
								> this many people must be alive
							'dead:3' 'dead:<3' 'dead:>3'
								> this many people must be dead
							'deaths:3' 'deaths:<3' 'deaths:>3'
								> this many deaths must have happened
							'teamalive:3' 'teamalive:<3' 'teamalive:>3'
								> this many in the team must be dead
							'teamdeaths:3' 'teamdeaths:<3' 'teamdeaths:>3'
								> this many in the team must be dead
							'+'
								> must be the same team as the previous team/person selected
							'-'
								> must be a different team
							'inTeam'
								> must be in a team
							'noTeam'
								> must not be in a team
							'!out'
								> must not have a perk marked .out (dead, sheep, comatose etc)
							'!able'
								> must have a perk marked .disable (trapped, shell-shocked etc)
							'any'
								> can be abled or disabled (still doesn't accept out)
					*/
					
					var selected=[];
					
					var prevTeam=0;
					
					for (var i=0;i<this.people.length;i++)
					{
						var req=this.people[i].split(' ');
						//if (req.indexOf('team')==-1 && req.indexOf('dead')==-1) req.unshift('!dead');
						
						var pool=[];
						if (req.indexOf('team')!=-1) pool=G.teams;
						else pool=G.chars;
						pool=shuffle(pool);
						if (i==0 && pool.indexOf(me)==-1) pool=[];
						
						var found=false;
						for (var ii=0;ii<pool.length;ii++)
						{
							var it=pool[ii];
							var fit=true;
							if (selected.indexOf(it)!=-1) {fit=false;continue;}
							if (i==0 && it!=me) {fit=false;continue;}
							if (i==0 && it.acted) {fit=false;continue;}
							
							var team=0;
							if (it.type=='team') team=it; else team=it.team;
							var forceSame=false;
							var forceDif=false;
							
							var able=true;
							var out=false;
							var any=req.indexOf('any')==-1?false:true;
							var every=req.indexOf('every')==-1?false:true;
							
							if (it.type!='team')
							{
								for (var iii in it.perks)
								{
									if (it.perks[iii].disable) able=false;
									if (it.perks[iii].out) out=true;
								}
							}
							
							//goal : [any] should give us both able and disabled, otherwise block disabled unless a perk calls it
							
							//filter for abnormal perks (we don't select people with those perks unless the req specifically calls for it)
							//todo : this doesn't match multiple choices like terrified|shell-shocked|dazed
							if (it.type!='team')
							{
								var tolerateDisabled=false;
								var tolerateOut=false;
								
								if (every) {tolerateDisabled=true;tolerateOut=true;}
								for (var iii in it.perks)
								{
									var perk=it.perks[iii];
									var needed=(req.indexOf(perk.name)!=-1);
									if (perk.disable && needed) {tolerateDisabled=true;}
									if (perk.out && needed) {tolerateOut=true;}
									if (!every && ((perk.disable && !any) || perk.out) && !needed) {fit=false;break;}
									//if (((perk.disable && !any) || perk.out) && req.indexOf(perk.name)==-1) {fit=false;break;}
								}
								if (!tolerateDisabled && !able && !any) fit=false;
								if (!tolerateOut && out) fit=false;
							}
							
							if (fit)
							{
								for (var iii=0;iii<req.length;iii++)
								{
									var bit=req[iii];
									var bitSplit=bit.split(':');
									var prop=bitSplit[0]?bitSplit[0]:0;
									var arg=bitSplit[1]?bitSplit[1]:0;
									if (!arg) prop=0;
									
									if (bit=='') {}
									else if (bit=='team') {}
									else if (bit=='out') {if (!out){fit=false;break;}}
										else if (bit=='!out') {if (out){fit=false;break;}}
									else if (bit=='able') {if (!able){fit=false;break;}}
										else if (bit=='!able') {if (able){fit=false;break;}}
									else if (bit=='any') {}
									else if (bit=='every') {}
									else if (bit=='inTeam') {if (!it.team){fit=false;break;}}
									else if (bit=='noTeam') {if (it.team){fit=false;break;}}
									else if (bit=='+') {forceSame=true;forceDif=false;}
									else if (bit=='-') forceDif=true;
									else if (prop=='members'){if (!it.chars || !testCond(it.chars,arg)){fit=false;break;}}
									else if (prop=='alive')
									{
										var alive=0;
										for (var iiii in G.chars)
										{
											if (!G.chars[iiii].has('dead')) alive++;
										}
										if (!testCond(alive,arg)){fit=false;break;}
									}
									else if (prop=='dead')
									{
										var dead=0;
										for (var iiii in G.chars)
										{
											if (G.chars[iiii].has('dead')) dead++;
										}
										if (!testCond(dead,arg)){fit=false;break;}
									}
									else if (prop=='deaths'){if (!testCond(G.deaths,arg)){fit=false;break;}}
									else if (prop=='teamalive')
									{
										if (!team) {fit=false;break;}
										else
										{
											var alive=0;
											for (var iiii in team.chars)
											{
												if (!team.chars[iiii].has('dead')) alive++;
											}
											if (!testCond(alive,arg)){fit=false;break;}
										}
									}
									else if (prop=='teamdead' || prop=='teamdeaths')
									{
										if (!team) {fit=false;break;}
										else
										{
											var dead=0;
											for (var iiii in team.chars)
											{
												if (team.chars[iiii].has('dead')) dead++;
											}
											if (!testCond(dead,arg)){fit=false;break;}
										}
									}
									else if (it.type=='char')
									{
										//probably perk
										var neg=false;
										bit=bit.replaceAll('_',' ');
										if (bit.charAt(0)=='!')
										{
											bit=bit.substr(1);
											neg=true;
										}
										if (bit.indexOf('|')!=-1)//either
										{
											bit=bit.split('|');
											var hasAnyPerk=false;
											for (var iiii in bit)//this might be the first time i've reached iiii
											{
												if (it.has(bit[iiii])) {hasAnyPerk=true;break;}
											}
											if ((hasAnyPerk && neg) || (!hasAnyPerk && !neg)) {fit=false;break;}
										}
										else
										{
											var hasPerk=it.has(bit);
											if ((hasPerk && neg) || (!hasPerk && !neg)) {fit=false;break;}
										}
									}
								}
								
								if (i>0 && forceSame && (!team || team!=prevTeam)) fit=false;
								if (i>0 && forceDif && team && team==prevTeam) fit=false;
							}
							
							if (fit)
							{
								selected.push(it);
								prevTeam=team;
								found=it;
								break;
							}
						}
						if (!found) return false;
					}
					if (selected.length!=this.people.length) return false;
					return selected;
				}
			
			//NOTE : the first person or team in an act counts as its main actor; they cannot be the main actor of another act in the same round
			
			/*
			new G.act(FORCE,['team members:1','+'],`[2] sees no point in being the only member in [1] and dissolves it.`,p=>{p[1].dissolve();});
			*/
			
			//trait-related idling
			new G.act(1,[''],`[1] [hums a song to [1:themself]|twiddles [1:their] thumbs|thinks about what [1:they] did to end up in DiscOrder|wonders about the future|has a horrible feeling in [1:their] [chest|gut]|stares into the distance].`);
				new G.act(0.03,['!nitro !survivalist'],'[BLUE][1] clicks on a Nitro link! But it leads to [a rickroll|a scam website|nude photographs of Grotle].')
				new G.act(0.03,['!nitro survivalist'],`[1] sees a Nitro link but isn't stupid enough to click it.`)
				new G.act(1,['!survivalist|sociopath|manipulative alive:1 dead:>0'],`[Dead... they're all dead...|[1] stares into the distance... Was it really worth it?|[1] survived... but at what price?]`);
				new G.act(1,['alive:1 dead:0'],`[1] is all by [1:themself].`);
				new G.act(1,['alive:1'],`[1] [screams at nobody in particular|hums to [1:themself]|wishes [1:they] had someone to talk to|].`);
				new G.act(1,['annoying teamalive:>1'],`[1] [rambles on about something nobody cares about|keeps trying to tell a joke, but it always falls flat].`);
			new G.act(0.5,['annoying','+ annoying'],`[[1] is glad to have someone like [2] [to tell really bad puns to|to have boring conversations with].|[1] and [2] giggle like idiots. Better not ask.]`);
			new G.act(0.5,['brash'],`[1] [is fidgeting a lot.|struggles to contain [1:themself].|is ready to GO GO GO!]`);	
				new G.act(1,['brash !kind'],`[1] [is spoiling for a fight|wonders where all the enemies are|can't wait see some action].`);
				new G.act(0.5,['brash','+ brash'],`[1] and [2] are [wrestling|competing for the last [donut|slice of cake|muffin|chocolate bar]|debating loudly|hyping each other up].`);	
				new G.act(1,['brash','- any'],`[1] [yells at|points and laughs at|makes rude gestures towards|is fuming at] [2].`);
			new G.act(1,['bulky'],`[1] [sizes [1:their] muscles|feels strong enough to handle anything|lumbers along].`);
			new G.act(1,['composed'],`[1] [is keeping a level head|is evaluating [1:their] options|keeps an eye out for trouble].`);
				new G.act(1,['manipulative','composed'],`[1] is trying to [trick|convince|get close to] [2].<br>[2] is[ pretending not to listen|n't buying it| playing along for now].`);
			new G.act(1,['cute'],`[1] [is being adorable as always|does something really cute].`);
			new G.act(1,['heroic','+ team teamalive:>2'],`[1] [hopes to get everyone out of here|tries to keep a brave face on for everyone's sake|is hoping they can save the day].`);
				new G.act(0.5,['heroic !sociopath','+ team teamalive:>2 teamdeaths:0'],`[1] is proud to lead [2].`);
				new G.act(0.5,['heroic !sociopath','+ team teamalive:>2 teamdeaths:>0'],`[1] made some mistakes protecting [2], but wants to do right by the team.`);
				new G.act(0.5,['heroic !sociopath','+ team teamdeaths:>1'],`[1] feels horrible for failing [2]...`);
				new G.act(0.5,['naive heroic','+ team teamdeaths:0'],`[1] wants to lead [2] to victory, but isn't sure how to proceed...`);
				new G.act(1,['heroic',`+ naive|kind|cute`],`[1] is planning how to protect [2]`);
			new G.act(1,['kind teamalive:>1'],`[1] [just wants to be helpful|is ready to defend [1:their] friends|doesn't feel prepared for any of this|hopes [1:g|he doesn't|she doesn't|they don't] have to harm anyone].`);
				new G.act(0.5,['kind|naive','+ kind|heroic'],`[[1] thanks [2] for being there for [1:them]|[1] seems to find [2]'s presence soothing.].`);
				new G.act(0.5,['kind','+ cute'],`[1] [can't stop fawning over [2]...|wants to protect [2]!]`);
				new G.act(0.5,['kind','+ shell-shocked'],`[[1] tries to cheer [2] up, but it's not really working...|[1] is really worried about [2]...|[1] doesn't know how to cheer [2] up...]`);
			new G.act(1,['lunatic'],`[1] [isn't sure whether to cry, laugh, or tear [1:their] hair out|is looking particularly erratic today|is having a [friendly|heated|passionate|drawn out] conversation with Invisible Knight].`);
				new G.act(0.5,['lunatic','+ teamalive:>1'],`[1] [laments [2]'s death.|gives a stirring eulogy for [2].|wishes [2] were still around.] [2] [just smiles and nods|stands there confused|tries to convince [1] [2:g|he's|she's|they're] still alive].`);
				new G.act(0.5,['lunatic','+ every dead'],`[1] [engages in conversation|plays a game|makes plans] with [2]. [[2]'s corpse rots agreeably.|[2] can't respond, as [2:g|he's|she's|they're] dead.|The flies buzzing around [2]'s dead body seem to take notice.]`);
				new G.act(FORCE,['lunatic annoying brash heroic kind manipulative naive romantic sneaky socipath suicidal unstable !wish_ring'],"[BLUE]Jackpot! [1] has obtained every mental illness and wins a wish ring!",p=>{p[1].gain('wish ring');});
			new G.act(1,['manipulative alive:1 dead:>0'],`[1] is glad [1:they] made it out alive.`);
				new G.act(1,['manipulative','romantic'],`[1] is leading [2] on...`);
				new G.act(1,['manipulative','naive'],`[1] is convincing [2] to trust them...`);
				new G.act(1,['manipulative','brash'],`[1] is telling [2] [2:they] need to stop wasting time and get into a fight...`);
				new G.act(0.5,['manipulative alive:>1'],`[1] [is looking for an easy out|looks for someone dumb enough to believe [1:them]].`);
				new G.act(0.5,['!manipulative|sociopath','+ manipulative'],`[1] does [1:their] best to avoid [2].`);
			new G.act(1,['naive'],`[1] [doesn't really understand what's happening|fails to grasp the gravity of the situation|wants this to be over already|wishes [1:they] could go home].`);
				new G.act(0.5,['kind|naive','+ kind|naive|cute'],`[1] and [2]'s fingers touch by accident.<br>They both blush a little bit...`);
				new G.act(0.5,['naive !heroic','+ heroic'],`[1] admires [2]'s [leadership|confidence|decisiveness].`);
				new G.act(0.5,['naive !bulky','+ bulky'],`[1] admires [2]'s [muscles|strength].`);
				new G.act(0.5,['naive','+ bulky|heroic|composed'],`[1] is glad [1:they] can rely on [2].`);
				new G.act(0.5,['naive alive:1'],`[1] looks around. Where did everybody go?`);
				new G.act(0.5,['naive','sneaky'],`[1] [runs into a tunnel that turns out to be painted onto a wall|slips on a banana peel]. [2] is [snickering|laughing|guffawing] from behind a [bush|tree|boulder].`);
			new G.act(0.5,['romantic alive:>1'],`[1] [doesn't care much for this place|tries to get others to notice [1:them]].`);
				new G.act(0.5,['romantic alive:1'],`There's nobody left to love [1]...`);
				new G.act(1,['romantic','+ kind|naive|cute !romantic'],`[1] tries [kissing|chatting up|asking out|holding hands with|hugging] [2].<br>[2] [is a little confused|is into it|wants more|is flattered|politely declines|gets upset]`);
				new G.act(1,['romantic','+ romantic'],`[1] and [2] are [madly in love|having a lover's spat|vigorously making out|holding hands|curled in each other's embrace|trying to hide their feelings].`);
				new G.act(1,['romantic','+ heroic|bulky'],`[1] is [admiring|smitten by|gushing over] [2]'s [musculature|jawline|strength].`);
				new G.act(0.5,['romantic','- heroic|bulky'],`[1] is [admiring|smitten by|gushing over] [2]'s [musculature|jawline|strength].<br>If only [2:g|he was|she was|they were] on [1]'s team...`);
				new G.act(1,['romantic sociopath','+ kind|naive|cute|romantic'],`[1] is [just using|pretending to care about] [2].`);
				new G.act(1,['romantic','- romantic'],`[1] and [2] are [secretly in love|wishing they could be together|having a Romeo and Juliette affair].`);
			new G.act(1,['scavenger'],`[1] [looks around for stuff to scrounge|spots something shiny in the distance].`);
			new G.act(1,['sneaky'],`[1] is [hiding behind a [tree|rock|bush]|nowhere to be found].`);
				new G.act(1,['sneaky','+ naive'],`[1] [sneaks up on|creeps up behind|tiptoes past] [2], who [doesn't notice|gets startled].`);
				new G.act(1,['sneaky','+ survivalist|heroic'],`[1] [sneaks up on|creeps up behind|tiptoes past] [2], who [gets irritated|starts chewing [2] out|wishes [1] would put [1:their] skills to better use].`);
			new G.act(1,['sociopath deaths:>0'],`[1] [seems unshaken by any of this|is only looking out for [1:themself]].`);
				new G.act(0.5,['manipulative|sociopath','+ team teamalive:>1'],`[1] sees [2] as a bunch of chumps to be milked.`);
			new G.act(1,['suicidal'],`[1] [wishes [1:g|he was|she was|they were] dead|longs for death].`);
			new G.act(1,['survivalist deaths:0'],`[1] [came prepared|could get used to this place].`);
			new G.act(1,['survivalist deaths:>0'],`[1] [is determined to survive this|won't die like the others|won't give up so easily].`);
				new G.act(1,['survivalist|sociopath alive:1 dead:>0'],`[1] [always knew [1:they]'d be the last to survive|made it out alive, it seems].`);
			new G.act(1,['unstable'],`[1] [looks on the verge of snapping|twitches uncontrollably].`);
			
			//item-related idling
			new G.act(1,['big_stick !naive|kind alive:>1'],`[1] waves [1:their] big stick around menacingly.`);
				new G.act(1,['big_stick naive|kind'],`[1] uses [1:their] big stick to hit rocks like baseballs.`);
			new G.act(1,['pitchfork !kind'],`[1] wonders how far [1:they] could throw [1:their] pitchfork.`);
				new G.act(1,['pitchfork kind'],`[1] has their pitchfork ready, but can't find any hay bales.`);
			new G.act(1,['sword !kind'],`[1] swooshes the air with [1:their] sword.`);
				new G.act(1,['sword kind'],`[1] looks nervously at [1:their] sword, hoping [1:they] won't have to use it.`);
			new G.act(1,['axe !naive|kind'],`[1] is ready to use [1:their] axe if [1:g|he has|she has|they have] to.`);
				new G.act(1,['axe naive|kind'],`[1] is chopping firewood with [1:their] axe.`);
			new G.act(1,['handgun !kind'],`[1] aims [1:their] handgun in the distance.`);
				new G.act(0.3,['handgun suicidal'],`[1] looks at the end of [1:their] handgun, then puts it to [1:their] head. Yeah... that oughta do it.`);
				new G.act(1,['handgun kind'],`[1] looks nervously at [1:their] handgun, hoping [1:they] won't have to use it.`);
			new G.act(1,['shotgun !naive|kind'],`[1] reloads [1:their] shotgun, just in case.`);
				new G.act(0.3,['shotgun suicidal'],`[1] looks at the end of [1:their] shotgun, then puts it to [1:their] head. Yeah... that oughta do it.`);
				new G.act(1,['shotgun kind'],`[1] looks nervously at [1:their] handgun, hoping [1:they] won't have to use it.`);
				new G.act(1,['shotgun naive !kind'],`[1] is struggling to figure out how to load [1:their] shotgun.`);
			new G.act(1,['grenade !kind'],`[1] juggles a bit with [1:their] grenade, kind of wanting to use it...`);
				new G.act(1,['grenade kind'],`[1] looks nervously at [1:their] grenade, hoping [1:they] won't have to use it.`);
				new G.act(0.3,['grenade suicidal'],`[1] spends some time taking the pin out of [1:their] grenade, saying "Not yet" and then putting it back in.`);
			new G.act(1,['rocket_launcher !kind'],`[1] loves the way [1:their] rocket launcher feels on [1:their] shoulder.`);
				new G.act(1,['rocket_launcher kind'],`[1] looks nervously at [1:their] rocket launcher, hoping [1:they] won't have to use it.`);
				new G.act(0.3,['rocket_launcher brash'],`[1] sets up a few [hay bales|scarecrows|old tires] and then blows them all to smithereens with [1:their] rocket launcher.`);
			new G.act(1,['slingshot !naive'],`[1] uses [1:their] slingshot to hunt [small game|squirrels|rabbits].`);
				new G.act(0.3,['slingshot !naive|kind'],`[1] gathers ammo for [1:their] slingshot.`);
				new G.act(1,['slingshot naive'],`[1] can't seem to find perfectly [round|grey|smooth] stones for [1:their] slingshot.`);
			new G.act(1,['bow !naive'],`[1] uses [1:their] bow to hunt [small game|squirrels|rabbits].`);
				new G.act(0.3,['bow !naive|kind'],`[1] practices pulling [1:their] bow's string back.`);
				new G.act(1,['bow naive'],`[1] practices pulling [1:their] bow's string back.<br>It snaps and now [1:they] have to replace it.`);
			new G.act(1,['flamethrower !kind'],`[1] really wants to use [1:their] flamethrower...`);
				new G.act(1,['flamethrower kind'],`[1] really wants to use [1:their] flamethrower... to roast marshmallows.`);
			new G.act(1,['lasergun !kind'],`[1] feels unstoppable with [1:their] lasergun.`);
				new G.act(1,['lasergun kind'],`[1] looks nervously at [1:their] lasergun, hoping [1:they] won't have to use it.`);
			new G.act(1,['magic_wand'],`[1] waves [1:their] magic wand around, sending [sparkles|butterflies|bubbles] everywhere.`);
			new G.act(1,['ancient_scepter'],`[1] polishes [1:their] ancient scepter, making the magic orb shine.`);
			new G.act(1,['nitro'],`[1] is hanging around the guac channel.`);
			new G.act(1,['egg'],`[1] [is wondering when [1:their] egg will hatch|wraps [1:their] egg in blankets|holds [1:their] egg close to [1:their] ear to listen for hatching noises].`);
			new G.act(1,['spear'],`[1] takes a break, leaning against [1:their] spear.`);
			new G.act(1,['knives !kind'],`[1] sharpens [1:their] knives against a whetstone.`);
				new G.act(1,['knives !kind'],`[1] prepares [dinner|a stew|[1:their] catch] using [1:their] knives.`);
			new G.act(1,['brass_knuckles !kind'],`[1] shadowboxes with [1:their] brass knuckles on.`);
				new G.act(1,['brass_knuckles kind'],`[1] looks nervously at [1:their] brass knuckles, hoping [1:they] won't have to use them.`);
			new G.act(1,['shield'],`[1] polishes [1:their] shield until it shines.`);
				new G.act(0.3,['shield heroic','+ team teamalive:>1'],`With [1:their] shield, [1] will be a shield for [2].`);
			new G.act(1,['mallet !kind'],`[1] runs around trying to whallop [moles|gophers|squirrels] with [1:their] mallet.`);
				new G.act(1,['mallet kind'],`[1] wonders why anyone would need a mallet this comically oversized.`);
			new G.act(1,['crossbow !kind'],`[1] cleans the mechanisms of [1:their] crossbow free of dirt.`);
				new G.act(1,['crossbow kind'],`[1] looks nervously at [1:their] crossbow, hoping [1:they] won't have to use it.`);
			new G.act(1,['shears'],`[1] uses [1:their] shears to collect some [herbs|flowers].`);
			new G.act(1,['black_belt !kind'],`[1] straps on [1:their] black belt and breaks some bricks.`);
				new G.act(1,['black_belt kind'],`[1] straps on [1:their] black belt and practices [[1:their] form|tai chi|some stretches].`);
			new G.act(1,['trowel kind alive:>1'],`[1] is trying to figure out how to kill someone using a trowel.`);
				new G.act(1,['trowel naive|kind'],`[1] uses [1:their] trowel to [dig up some weeds|plant a garden|harvest [potatoes|carrots]].`);
			new G.act(0.5,['knight_armor sword shield'],`With armor, a sword and a shield [1] feels like a real knight!`);
			
			//pet-related idling
			new G.act(1,['pet_blorb'],`[1] [plays with|pets] [1:their] blorb, [squishing it|listening to it squelch|forming it into funny shapes].`);
				new G.act(0.05,['dead pet_blorb'],`[1]'s pet blorb starts dissolving its owner's remains.`);
				new G.act(0.2,['pet_blorb alive:1'],`[1]'s pet blorb is all [1:g|he has|she has|they have] left in the world.`);
			new G.act(1,['pet_fairy'],`[1]'s pet fairy [ruffles its feathers|nips at [1]'s fingers|devours a dead rat [1] found].`);
				new G.act(0.05,['dead pet_fairy'],`[1]'s pet fairy is vigorously consuming its owner's remains.`);
				new G.act(0.2,['pet_fairy alive:1'],`[1] is all alone in the world with [1:their] pet fairy. Is that a good thing?`);
			new G.act(1,['pet_mini-griffoth'],`As [1] strokes [1:their] pet mini-griffoth it [purrs contentedly|restlessly flaps its wings|eyes up some bugs on the ground|preens its feathers].`);
				new G.act(0.05,['dead pet_mini-griffoth'],`[1]'s pet mini-griffoth never gives up its vigil of its owner's remains.`);
				new G.act(0.2,['pet_mini-griffoth alive:1'],`[1]'s pet mini-griffoth is all [1:g|he has|she has|they have] left in the world.`);
			new G.act(1,['pet_winged_troupple'],`[1] [watches [1:their] pet winged troupple do loop-de-loops|bathes [1:their] pet winged troupple|gives [1:their] pet winged troupple a kiss|dances with [1:their] pet winged troupple].`);
				new G.act(0.05,['dead pet_winged_troupple'],`[1]'s pet winged troupple is desperately trying to bring its owner back.`);
				new G.act(0.2,['pet_winged_troupple alive:1'],`[1]'s pet winged troupple is all [1:g|he has|she has|they have] left in the world.`);

			new G.act(1,['wish_ring'],`[1] ponders about how best to use [1:their] wish ring.`);
			
			//armor-related idling
			new G.act(0.5,['leather_scraps'],`[1] wearing leather scraps is a sight to behold.`);
			new G.act(0.5,['bikini'],`[1] [is very proud of|flaunts|looks really good in] [1:their] bikini.`);
				new G.act(0.5,['romantic','+ bikini'],`[1] looks at [2] in [2:their] bikini and blushes.`);
			new G.act(0.25,['dapper_suit'],`[1] [is very proud of|acts cool in|looks amazing in] [1:their] dapper suit.`);
			new G.act(0.25,['knight_armor'],`[1] [looks glorious in|stands proudly in|is ready to cleave some invaders in] [1:their] knight armor.`);
			new G.act(0.5,['combat_gear'],`[1] [looks menacing in|is looking downright tactical in|practices some strategic moves in] [1:their] combat gear.`);
			new G.act(0.5,['wizard_robe'],`[1] [shakes [1:their] wizard sleeves, and a thousand tiny animals fall out|sneezes from all the sparkles coming out of [1:their] wizard robe, making [1:them] levitate for a few seconds|is looking magical today].`);
			new G.act(0.5,['ornate_plate'],`[1] spends some time polishing [1:their] ornate plate so it glitters like new.`);
				new G.act(0.25,['ornate_plate','!kind|naive'],`[2] looks jealously at [1]'s ornate plate.`);

			//finding items
			var itemFindMult=0.3;
			var noarmor='!leather_scraps|bikini|dapper_suit|knight_armor|combat_gear|wizard_robe|ornate_plate';
			new G.act(itemFindMult*0.1,[noarmor],`[BLUE][1] finds some leather scraps, just enough to patch together some rudimentary clothing.<br>It looks rather caveman-like.`,p=>{p[1].gain('leather scraps');});
			new G.act(itemFindMult*0.05,[noarmor+' !survivalist'],`[BLUE][1] finds a lovely bikini and puts it on!<br>It's quite revealing.`,p=>{p[1].gain('bikini');});
			new G.act(itemFindMult*0.05,[noarmor+' !survivalist'],`[BLUE][1] finds a dapper suit and puts it on!<br>It's rather fetching.`,p=>{p[1].gain('dapper suit');});
			new G.act(itemFindMult*0.05,[noarmor],`[BLUE][1] somehow finds a full suit of medieval armor and puts it on!<br>It gleams with a dazzling shine.`,p=>{p[1].gain('knight armor');});
			new G.act(itemFindMult*0.02,[noarmor],`[BLUE][1] somehow finds a bunch of tactical combat gear and equips it!<br>It provides optimal protection for the whole body, without sacrificing flexibility.`,p=>{p[1].gain('combat gear');});
			new G.act(itemFindMult*0.01,[noarmor],`[BLUE][1] disappears for a while and comes back with a wizard robe [1:they] just found...<br>[1:g|He slips|She slips|They slip] it on, scattering sparkles everywhere.`,p=>{p[1].gain('wizard robe');});
			new G.act(itemFindMult*0.05,[noarmor+' !survivalist'],`[BLUE][1] sees something gleam off in the distance and goes to check it out.<br>It's a full suit of ornate plate. What luck!`,p=>{p[1].gain('bikini');});
			new G.act(itemFindMult*0.05,[noarmor+' survivalist'],`[1] finds [some leather scraps|a dapper suit|a lovely bikini|a suit of ornate plate|a slingshot|a trowel] in their search for items.<br>Unfortunately it's just useless junk, so they toss it.`);

			new G.act(itemFindMult*0.1,['!slingshot !survivalist'],`[BLUE][1] finds a slingshot! How quaint...<br>Might be useful in a pinch.`,p=>{p[1].gain('slingshot');});
			new G.act(itemFindMult*0.1,['!trowel !survivalist'],`[BLUE][1] enters a greenhouse and helps out the gardener for a while. In return, [1:g|he gets|she gets|they get] to keep a trowel.`,p=>{p[1].gain('trowel');});
			new G.act(itemFindMult*0.05,['!big_stick'],`[BLUE][1] finds a big stick...<br>Probably comes in handy to bash some skulls.`,p=>{p[1].gain('big stick');});
			new G.act(itemFindMult*0.05,['!pitchfork'],`[BLUE][1] finds a pitchfork, which [1:g|he figures|she figures|they figure] is great for lobbing at enemies.`,p=>{p[1].gain('pitchfork');});
			new G.act(itemFindMult*0.05,['!sword'],`[BLUE][1] finds a sword, shiny and sharp.<br>A rather nice find!`,p=>{p[1].gain('sword');});
			new G.act(itemFindMult*0.05,['!axe'],`[BLUE][1] finds an axe, upping [1:their] chances of survival somewhat.`,p=>{p[1].gain('axe');});
			new G.act(itemFindMult*0.05,['!spear'],`[BLUE]The flag of a long-forgotten kingdom flutters attached to a spear planted in the ground. [1] grabs the spear and ditches the flag.`,p=>{p[1].gain('spear');});
			new G.act(itemFindMult*0.05,['!knives'],`[BLUE]A door to door salesman appears and offers [1] a knife set. [1:g|He tries|She tries|They try] to refuse, but it packs so much value.`,p=>{p[1].gain('knives');});
			new G.act(itemFindMult*0.05,['!brass_knuckles'],`[BLUE][1] smiles wryly. [1:g|He|She|They] just found a set of brass knuckles- or did [1:they] have them all along?`,p=>{p[1].gain('brass knuckles');});
			new G.act(itemFindMult*0.05,['!shield'],`[BLUE]A shield rests in the nook of a tree. [1] looks around for its owner before picking it up.`,p=>{p[1].gain('shield');});
			new G.act(itemFindMult*0.05,['!mallet'],`[BLUE][1] finds a giant mallet. Now to find a giant game of whack-a-mole.`,p=>{p[1].gain('mallet');});
			new G.act(itemFindMult*0.02,['!crossbow'],`[BLUE][1] discovers an old ruined lookout post. It's been mostly looted, but an intact crossbow remains to be for [1]'s taking.`,p=>{p[1].gain('crossbow');});
			new G.act(itemFindMult*0.02,['!handgun'],`[BLUE][1] finds a handgun, with just enough bullets to be useful.`,p=>{p[1].gain('handgun');});
			new G.act(itemFindMult*0.02,['!shotgun'],`[BLUE][1] finds a shotgun!<br>[1:g|He starts|She starts|They start] thinking about the damage [1:they] can do.`,p=>{p[1].gain('shotgun');});
			new G.act(itemFindMult*0.02,['!grenade'],`[BLUE][1] finds a grenade...<br>Better be careful with that.`,p=>{p[1].gain('grenade');});
			new G.act(itemFindMult*0.02,['!rocket_launcher'],`[BLUE][1] finds a rocket launcher!<br>That's gonna end well.`,p=>{p[1].gain('rocket launcher');});
			new G.act(itemFindMult*0.02,['!shears'],`[BLUE][1] enters a greenhouse and helps out the gardener for a while. In return, [1:g|he gets|she gets|they get] to keep a pair of shears.`,p=>{p[1].gain('shears');});
			new G.act(itemFindMult*0.02,['!black_belt'],`[BLUE][1] finds a dojo in the middle of nowhere and gets to training. Soon [1:g|he has|she has|they have] earned a black belt!`,p=>{p[1].gain('black belt');});
			new G.act(itemFindMult*0.02,['!bow'],`[BLUE][1] finds a bow and some arrows.<br>It'll take some practice but this can surely come in handy.`,p=>{p[1].gain('bow');});
			new G.act(itemFindMult*0.02,['!flamethrower'],`[BLUE]Are you kidding? [1] just found a flamethrower!<br>See if anyone gets in [1:their] way now!`,p=>{p[1].gain('flamethrower');});
			new G.act(itemFindMult*0.02,['!egg|pet_blorb|pet_fairy|pet_mini-griffoth|pet_winged_troupple'],`[BLUE][1] is [digging a ditch|climbing a tree|exploring a cave] when [1:they] find an egg! [1] wonders what it'll hatch into...`,p=>{p[1].gain('egg');});
				new G.act(0.6,['egg'],`[BLUE][1] finds a goopy nest and sets [1:their] egg down. Within minutes there's a squelching noise as a baby pet blorb is born!`,p=>{p[1].lose('egg');p[1].gain('pet blorb')});
				new G.act(0.6,['egg'],`[BLUE][1] finds a smoldering nest and sets [1:their] egg down. Within minutes there's a chirping noise as a baby pet mini-griffoth is born!`,p=>{p[1].lose('egg');p[1].gain('pet mini-griffoth')});
				new G.act(0.6,['egg'],`[BLUE][1] finds a wooden nest and sets [1:their] egg down. Within minutes there's a gurgling noise as a baby pet winged troupple is born!`,p=>{p[1].lose('egg');p[1].gain('pet winged troupple')});
				new G.act(0.6,['egg !survivalist'],`[BLUE][1] sits down in a grass field. There's a scratching noise, and [1:they] turn around to see [1:they] sat in a grass nest and [1:their] egg has hatched into a baby pet fairy!<br>It's already imprinted on them, so [1:g|he's|she's|they're] stuck with it now.`,p=>{p[1].lose('egg');p[1].gain('pet fairy')});
				new G.act(0.6,['egg survivalist'],`[1] spots a grass nest hidden in a field and hears scratching coming from [1:their] egg. Better move on quick, wouldn't want to deal with owning a fairy.`);
			new G.act(itemFindMult*0.01,['!lasergun'],`[BLUE]Whoah! [1] just found a lasergun!<br>[1:g|He starts|She starts|They start] swinging it around making "pew pew" sounds, before [1:they] realize [1:they] can just pull the trigger and make those sounds for real.`,p=>{p[1].gain('lasergun');});
			new G.act(itemFindMult*0.01,['!magic_wand'],`[BLUE][1] follows some sparkles and discovers a magic wand!<br>Hopefully it still has some spells left in it...`,p=>{p[1].gain('magic wand');});
			new G.act(itemFindMult*0.01,['!ancient_scepter'],`[BLUE][1] catches a strange glow in the corner of [1:their] eye and discovers an ancient scepter!<br>Arcane magic courses through [1:their] body as [1:their] fingers touch the carved wood.`,p=>{p[1].gain('ancient scepter');});
			new G.act(itemFindMult*0.01,['!wish_ring'],`[BLUE][1] was lost in [1:their] thoughts... The next thing [1:g|he knows|she knows|they know], [1:g|he's|she's|they've] found a wish ring.<br>Hopefully [1:they]'ll be responsible with it.`,p=>{p[1].gain('wish ring');});
			new G.act(itemFindMult*0.01,['!nitro !survivalist'],`[BLUE][1] clicks on a free Nitro gift, which turns out to be real!`,p=>{p[1].gain('nitro');});

			//scavenger item looting
			new G.act(itemFindMult*0.1,['!big_stick scavenger','every dead !zombie big_stick'],`[BLUE][1] spots that [2] has a big stick on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('big stick');p[2].lose('big stick');});
			new G.act(itemFindMult*0.1,['!pitchfork scavenger','every dead !zombie pitchfork'],`[BLUE][1] spots that [2] has a pitchfork on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('pitchfork');p[2].lose('pitchfork');});
			new G.act(itemFindMult*0.1,['!sword scavenger','every dead !zombie sword'],`[BLUE][1] spots that [2] has a sword on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('sword');p[2].lose('sword');});
			new G.act(itemFindMult*0.1,['!axe scavenger','every dead !zombie axe'],`[BLUE][1] spots that [2] has an axe on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('axe');p[2].lose('axe');});
			new G.act(itemFindMult*0.1,['!handgun scavenger','every dead !zombie handgun'],`[BLUE][1] spots that [2] has a handgun on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('handgun');p[2].lose('handgun');});
			new G.act(itemFindMult*0.1,['!handgun scavenger','every dead !zombie shotgun'],`[BLUE][1] spots that [2] has a shotgun on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('shotgun');p[2].lose('shotgun');});
			new G.act(itemFindMult*0.1,['!grenade scavenger','every dead !zombie grenade'],`[BLUE][1] spots that [2] has a grenade on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('grenade');p[2].lose('grenade');});
			new G.act(itemFindMult*0.1,['!rocket_launcher scavenger','every dead !zombie rocket_launcher'],`[BLUE][1] spots that [2] has a rocket launcher on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('rocket launcher');p[2].lose('rocket launcher');});
			new G.act(itemFindMult*0.1,['!slingshot scavenger','every dead !zombie slingshot'],`[BLUE][1] spots that [2] has a slingshot on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('slingshot');p[2].lose('slingshot');});
			new G.act(itemFindMult*0.1,['!bow scavenger','every dead !zombie bow'],`[BLUE][1] spots that [2] has a bow on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('bow');p[2].lose('bow');});
			new G.act(itemFindMult*0.1,['!flamethrower scavenger','every dead !zombie flamethrower'],`[BLUE][1] spots that [2] has a flamethrower on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('flamethrower');p[2].lose('flamethrower');});
			new G.act(itemFindMult*0.1,['!lasergun scavenger','every dead !zombie lasergun'],`[BLUE][1] spots that [2] has a lasergun on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('lasergun');p[2].lose('lasergun');});
			new G.act(itemFindMult*0.1,['!magic_wand scavenger','every dead !zombie magic_wand'],`[BLUE][1] spots that [2] has a magic wand on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('magic wand');p[2].lose('magic wand');});
			new G.act(itemFindMult*0.1,['!ancient_scepter scavenger','every dead !zombie ancient_scepter'],`[BLUE][1] spots that [2] has an ancient scepter on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('ancient scepter');p[2].lose('ancient scepter');});
			new G.act(itemFindMult*0.1,['!wish_ring scavenger','every dead !zombie wish_ring'],`[BLUE][1] spots that [2] has a wish ring on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('wish ring');p[2].lose('wish ring');});
			new G.act(itemFindMult*0.1,['!nitro scavenger','every dead !zombie nitro'],`[BLUE][1] spots that [2] has Nitro...<br>Somehow, [1:g|he steals|she steals|they steal] it?]`,p=>{p[1].gain('nitro');p[2].lose('nitro');});
			new G.act(itemFindMult*0.1,['!egg|pet_blorb|pet_fairy|pet_mini-griffoth|pet_winged_troupple scavenger','every dead !zombie egg'],`[BLUE][1] spots that [2] has an egg on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('egg');p[2].lose('egg');});
			new G.act(itemFindMult*0.1,['!spear scavenger','every dead !zombie spear'],`[BLUE][1] spots that [2] has a spear on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('spear');p[2].lose('spear');});
			new G.act(itemFindMult*0.1,['!knives scavenger','every dead !zombie knives'],`[BLUE][1] spots that [2] has some knives on [2:their] corpse...<br>That'll come in handy!.`,p=>{p[1].gain('knives');p[2].lose('knives');});
			new G.act(itemFindMult*0.1,['!brass_knuckles scavenger','every dead !zombie brass_knuckles'],`[BLUE][1] spots that [2] has brass knuckles on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('brass knuckles');p[2].lose('brass knuckles');});
			new G.act(itemFindMult*0.1,['!shield scavenger','every dead !zombie shield'],`[BLUE][1] spots that [2] has a shield on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('shield');p[2].lose('shield');});
			new G.act(itemFindMult*0.1,['!mallet scavenger','every dead !zombie mallet'],`[BLUE][1] spots that [2] has a mallet on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('mallet');p[2].lose('mallet');});
			new G.act(itemFindMult*0.1,['!crossbow scavenger','every dead !zombie crossbow'],`[BLUE][1] spots that [2] has a crossbow on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('crossbow');p[2].lose('crossbow');});
			new G.act(itemFindMult*0.1,['!shears scavenger','every dead !zombie shears'],`[BLUE][1] spots that [2] has shears on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('shears');p[2].lose('shears');});
			new G.act(itemFindMult*0.1,['!black_belt scavenger','every dead !zombie black_belt'],`[BLUE][1] spots that [2] has a black belt on [2:their] corpse...<br>[1:g|He picks|She picks|They pick] it up and instantly master martial arts!`,p=>{p[1].gain('black belt');p[2].lose('black belt');});
			new G.act(itemFindMult*0.1,['!trowel scavenger','every dead !zombie trowel'],`[BLUE][1] spots that [2] has a trowel on [2:their] corpse...<br>That'll come in handy!`,p=>{p[1].gain('trowel');p[2].lose('trowel');});
			
			//sneaky item removal
			new G.act(0.1,['sneaky','- any !survivalist|scavenger'],`[1] [sneaks|creeps|tiptoes|slinks] into [2]'s [camp|encampment|base] while [2:g|he is|she is|they are] [using the bathroom|bathing|asleep|playing [solitaire|jacks|Shovel Knight]] and steals all of [2:their] stuff before [throwing it in the river|tossing it into an active volcano|hiding it in a chasm|feeding it to [a bear|an ostrich|an alligator]].`,p=>{
				p[2].lose('big_stick');p[2].lose('pitchfork');p[2].lose('sword');p[2].lose('axe');p[2].lose('handgun');p[2].lose('shotgun');p[2].lose('grenade');p[2].lose('rocket launcher');p[2].lose('slingshot');p[2].lose('bow');p[2].lose('flamethrower');p[2].lose('lasergun');p[2].lose('magic wand');p[2].lose('ancient scepter');p[2].lose('wish ring');p[2].lose('nitro');
				p[2].lose('egg');p[2].lose('spear');p[2].lose('knives');p[2].lose('brass knuckles');p[2].lose('shield');p[2].lose('mallet');p[2].lose('crossbow');p[2].lose('shears');p[2].lose('black belt');p[2].lose('trowel');
			});
			new G.act(0.1,['sneaky','- survivalist|scavenger'],`[1] [sneaks|creeps|tiptoes|slinks] into [2]'s [camp|encampment|base] while [2:g|he is|she is|they are] [using the bathroom|bathing|asleep|playing [solitaire|jacks|Shovel Knight]] in an effort to steal [2:their] stuff, but [2] has it [locked away|under guard|booby trapped].`);
			new G.act(0.1,['sneaky annoying','+ any !survivalist|scavenger'],`[1] [sneaks|creeps|tiptoes|slinks] into [2]'s [cabin|quarters|room] while [2:g|he is|she is|they are] [using the bathroom|bathing|asleep|playing [solitaire|jacks|Shovel Knight]] and steals all of [2:their] stuff before [throwing it in the river|tossing it into an active volcano|hiding it in a chasm|feeding it to [a bear|an ostrich|an alligator]]. [1] finds this hilarious, but [2] does not...`,p=>{
				p[2].lose('big_stick');p[2].lose('pitchfork');p[2].lose('sword');p[2].lose('axe');p[2].lose('handgun');p[2].lose('shotgun');p[2].lose('grenade');p[2].lose('rocket launcher');p[2].lose('slingshot');p[2].lose('bow');p[2].lose('flamethrower');p[2].lose('lasergun');p[2].lose('magic wand');p[2].lose('ancient scepter');p[2].lose('wish ring');p[2].lose('nitro');
				p[2].lose('egg');p[2].lose('spear');p[2].lose('knives');p[2].lose('brass knuckles');p[2].lose('shield');p[2].lose('mallet');p[2].lose('crossbow');p[2].lose('shears');p[2].lose('black belt');p[2].lose('trowel');
			});
			new G.act(0.1,['sneaky','- survivalist|scavenger'],`[1] [sneaks|creeps|tiptoes|slinks] into [2]'s [camp|encampment|base] while [2:g|he is|she is|they are] [using the bathroom|bathing|asleep|playing [solitaire|jacks|Shovel Knight]] in an effort to prank [2], but [2:g|he has|she has|they have] all [1:their] stuff [locked away|under guard|booby trapped].`);

			//lunatic shenanigans
			new G.act(0.1,['lunatic !annoying'],`[RED][1]'s bad brain turns [1:them] into an absolute pain to deal with.`,p=>{p[1].gain('annoying');});
				new G.act(0.1,['lunatic annoying'],`[BLUE][1] seems to calm down, understanding that [1:g|he's|she's|they're] not that interesting.`,p=>{p[1].lose('annoying');});
			new G.act(0.1,['lunatic !brash'],`[RED][1]'s bad brain makes [1:them] feel invincible. Watch out world!`,p=>{p[1].gain('brash');});
				new G.act(0.1,['lunatic brash'],`[BLUE][1] gets a papercut and realizes just how fragile [1:g|he really is|she really is|they really are].`,p=>{p[1].lose('brash');});
			new G.act(0.1,['lunatic !heroic','+ team'],`[RED][1]'s bad brain whispers to [1:them] that only [1:they] can save [2].`,p=>{p[1].gain('heroic');});
				new G.act(0.1,['lunatic heroic', '+ team'],`[BLUE][1] decides [2] will be fine if [1:they] calm down a little.`,p=>{p[1].lose('heroic');});
			new G.act(0.1,['lunatic !kind'],`[BLUE][1]'s bad brain somehow turns [1:them] a little kinder...`,p=>{p[1].gain('kind');});
				new G.act(0.1,['lunatic kind'],`[RED]Kindness seems to leave [1]'s shifting personality.`,p=>{p[1].lose('kind');});
			new G.act(0.1,['lunatic !manipulative'],`[RED][1]'s bad brain turns [1:them] into a horrible person...`,p=>{p[1].gain('manipulative');});
				new G.act(0.1,['lunatic manipulative'],`[BLUE][1] seems to assume a slightly less cynical worldview.`,p=>{p[1].lose('manipulative');});
			new G.act(0.1,['lunatic !naive'],`[RED][1]'s bad brain tells [1:them] that [1:they] need to be more trusting.`,p=>{p[1].gain('naive');});
				new G.act(0.1,['lunatic naive'],`[BLUE][1] realizes that everyone is out to get [1:them]. Trust no one.`,p=>{p[1].lose('naive');});
			new G.act(0.1,['lunatic !romantic'],`[RED][1]'s bad brain yearns for love.`,p=>{p[1].gain('romantic');});
				new G.act(0.1,['lunatic romantic'],`[BLUE]Scorned! [1] will never love again.`,p=>{p[1].lose('romantic');});
			new G.act(0.1,['lunatic !sneaky'],`[RED][1]'s bad brain reveals that [1:g|he has|she has|they have] had the power to turn invisible all this time.`,p=>{p[1].gain('sneaky');});
				new G.act(0.1,['lunatic sneaky'],`[BLUE][1] is tired of not being noticed.`,p=>{p[1].lose('sneaky');});
			new G.act(0.1,['lunatic !sociopath'],`[RED][1]'s bad brain convinces [1:them] that [1:g|he is|she is|they are] the main character.`,p=>{p[1].gain('sociopath');});
				new G.act(0.1,['lunatic sociopath'],`[BLUE][1] appears to have developed some empathy.`,p=>{p[1].lose('sociopath');});
			new G.act(0.1,['lunatic !suicidal'],`[RED][1]'s bad brain saps [1:their] will to live...`,p=>{p[1].gain('suicidal');});
				new G.act(0.1,['lunatic suicidal'],`[BLUE][1] seems to find a new will to live.`,p=>{p[1].lose('suicidal');});
			new G.act(0.1,['lunatic !unstable'],`[RED][1]'s bad brain takes [1:them] to an even stranger place, turning [1:them] even more unstable than before.`,p=>{p[1].gain('unstable');});
				new G.act(0.1,['lunatic unstable'],`[BLUE][1] needs some stability in their life.`,p=>{p[1].lose('unstable');});
			new G.act(0.05,['lunatic'],`[BLUE][1] calms down for good, no longer subject to the whims of a changing brain.`,p=>{p[1].lose('lunatic');});

			//final teammate beserk
			new G.act(0.7,['kind|naive','+ team teamalive:1'],`[RED][1] [feels horrible for letting|can't believe [1:they] stood by and watched] everyone on [2] die.<br>[1] [has snapped|goes beserk|is finally prepared to kill]!`,p=>{p[1].lose('kind');p[1].lose('naive');p[1].gain('unstable');});

			//statuses
			new G.act(0.5,['unstable !frenzied'],`[RED][[1] finally snaps!|Something inside [1] snaps!]<br>[1] is now frenzied!`,p=>{p[1].gain('frenzied');});
				new G.act(0.8,['frenzied',''],`[RED]In a fit of frenzy, [1] creeps up on [2] and [snaps [2:their] neck|kills [2:them] dead|slaughters [2:them]|turns [2:them] inside out]!`,p=>{p[1].kill(p[2],`frenzy kill`);});
				new G.act(1,['frenzied'],`[[1] looks around maniacally, seething.|[1] looks for [1:their] next victim...]`);
				new G.act(0.1,['frenzied'],`[RED][Panting like a wild beast, [1:their] eyes bulging out|After rampaging for a while|Raging fury grasping [1:their] chest], [1]'s frenzy grows so overpowering that [1:their] heart gives out...`,p=>{p[1].die(`frenzy heart attack`);});
				new G.act(0.1,['frenzied'],`[1]'s frenzy finally dies down.`,p=>{p[1].lose('frenzied');});
			
			new G.act(0.1,['!sociopath|manipulative|heroic deaths:0'],`[1] [doesn't know yet how bad things are gonna get.|knows not of the horrors yet to come.|is pretty optimistic about all of this.]`);
			new G.act(0.1,['!sociopath|manipulative|heroic deaths:>0'],`[1] [sobs quietly...|starts sobbing uncontrollably.|just wants it to end already...]`);
			
			new G.act(1,['shell-shocked'],`[1] [sits there with a blank stare.|has a blank expression and seems unresponsive to what's going on...|sobs quietly...|starts sobbing uncontrollably.|just wants it to end already...|is on the verge of a nervous breakdown...]`);
			new G.act(0.2,['shell-shocked|terrified|dazed any'],`[1] snaps out of it!`,p=>{p[1].lose('shell-shocked');p[1].lose('terrified');p[1].lose('dazed');});
			new G.act(0.1,['shell-shocked !suicidal'],`[RED][1] doesn't want to carry on...<br>[1] is now suicidal.`,p=>{p[1].gain('suicidal');});

			new G.act(0.01,[`dead every !ghost|zombie`],`[BLUE][Via some dark magic [1]|[1] decides being dead is boring and] comes back as a ghost.`,p=>{p[1].gain('ghost');});
			new G.act(0.3,['every ghost'],`[[1] floats around as a ghost trying to spook people.|[1] tries to figure out how to move on into the afterlife.|[1] watches the carnage going on around [1:them] as a ghost.]`);
			new G.act(0.3,['every ghost suicidal'],`[1] laments that even dying wasn't enough to put [1:them] out of [1:their] misery.`);
			new G.act(0.3,['every ghost',`+ every ghost`],`[1] and [2] [chat about how it is to be ghosts|reminisce on their life before becoming ghosts|wish that ghosts could still eat food|play some ghost games|debate how them being ghosts is even possible].`);
			new G.act(0.3,['every ghost kind|naive',`- every ghost kind|naive`],`[1] and [2] [chat about how it is to be ghosts|reminisce on their life before becoming ghosts|wish that ghosts could still eat food|play some ghost games|debate how them being ghosts is even possible].`);
			new G.act(0.3,['every ghost !kind|naive',`- every ghost !kind|naive`],`Despite both being ghosts, [1] and [2] [argue over whose team is better|still try to duel|can't reconcile their differences].`);
			new G.act(0.3,['every ghost heroic',`+ team teamalive:>0`],`[1]'s spirit is watching over [2].`);
			new G.act(0.3,['every ghost manipulative',`+`],`[1]'s ghost' is trying to tell [2] how to win, but [2] doesn't seem to hear [1:them].`);
			new G.act(0.3,['every ghost romantic',`+ every ghost romantic|cute`],`[1] and [2] [share a ghost kiss|hold ethereal hands|take a romantic float under the stars].`);
			new G.act(0.05,['every ghost',`+ !sociopath any`],`[RED][1] haunts [2] for letting them down, driving [2:them] to the brink!`,p=>{p[2].gain('suicidal')});
			new G.act(0.1,['every ghost teamalive:>0','+ team',`- !sociopath`],`[RED][1] decides to help [2] by haunting [3]. [3] becomes terrified!`,p=>{p[2].gain('terrified')});
			new G.act(0.01,['every ghost'],`[RED][1] finds [1:their] old body and tries to possess it. [1:g|He returns|She returns|They return] to life!`,p=>{p[1].lose('ghost');p[1].lose('dead');});

			new G.act(0.05,['every ghost'],`[RED][1] finds [1:their] old body and tries to possess it. [1:g|He returns|She returns|They return] as a zombie.`,p=>{p[1].lose('ghost');p[1].gain('zombie');});
			new G.act(0.2,['every zombie'],`Zombie [1] [shambles about aimlessly|cries out for brains|stands still, slack-jawed and drooling].`);
			new G.act(0.2,['every zombie','+ !sociopath|manipulative|composed kind'],`[2] cries at the sight of the zombified [1].`);
			new G.act(0.1,['every zombie alive:>0','any'],`[RED]The zombified [1] bites [2], transforming [2:them] into another zombie.`,p=>{p[2].gain('dead');p[2].gain('zombie');});
			new G.act(0.1,['','every zombie'],`[BLUE][1] slays the zombified [2], ridding the world of the monster.`,p=>{p[2].lose('zombie');});
			
			//kills
			var coldBloodKiller='!kind|naive';
			
			new G.act(0.2,[coldBloodKiller,'- !bruised|concussed'],`[RED][1] [ambushes [2]|attacks [2] from behind] and [beats|batters|pummels|strikes] [2:them]. [2] winds up bruised.`,p=>{p[2].gain('bruised');});
				new G.act(0.05,[coldBloodKiller,'- !bruised|concussed'],`[RED][1] [ambushes [2]|attacks [2] from behind] and [beats|batters|pummels|strikes] [2:them]. [2] ends up with a concussion!`,p=>{p[2].gain('concussed');});
				new G.act(0.2,[coldBloodKiller,'- bruised !concussed'],`[RED][1] [ambushes [2]|attacks [2] from behind] and [beats|batters|pummels|strikes] [2:them]. In [2]'s bruised state, [2:g|he ends|she ends|they end] up with a concussion!`,p=>{p[2].gain('concussed');});
			new G.act(0.15,[coldBloodKiller,'- '+coldBloodKiller],`[RED][[1] duels it out with [2]|[1] challenges [2] to a duel|[2] challenges [1] to a duel|[1] wants to end things once and for all with [2]|[2] wants to end things once and for all with [1]].<br>[2] bites the dust!`,p=>{p[1].kill(p[2],`duel`);});
				new G.act(0.15,[coldBloodKiller,'- kind|naive'],`[[1] challenges [2] to a duel|[1] wants to end things once and for all with [2]].<br>[2] runs and hides!`);
			new G.act(0.05,[coldBloodKiller,'- !bruised|concussed','+ any !bruised|concussed'],`[RED][1] [ambushes [2] and [3]|attacks [2] and [3] from behind|manages to sneak-attack [2] and [3]], [beating|pummeling|striking|battering] them both. Both end up bruised.`,p=>{p[2].gain('bruised');p[3].gain('bruised');});
				new G.act(0.01,[coldBloodKiller,'- !bruised|concussed','+ any !bruised|concussed'],`[RED][1] [ambushes [2] and [3]|attacks [2] and [3] from behind|manages to sneak-attack [2] and [3]], [beating|pummeling|striking|battering] them both. Both end up concussed.`,p=>{p[2].gain('concussed');p[3].gain('concussed');});
				new G.act(0.05,[coldBloodKiller,'- bruised !concussed','+ any bruised !concussed'],`[RED][1] [ambushes [2] and [3]|attacks [2] and [3] from behind|manages to sneak-attack [2] and [3]], [beating|pummeling|striking|battering] them both. Since both of them are bruised, they can't defend themselves and end up concussed.`,p=>{p[2].gain('concussed');p[3].gain('concussed');});
			new G.act(0.05,[coldBloodKiller,'+ '+coldBloodKiller,'-'],`[RED][1] and [2] [team up and ambush [3]|come at [3] from both sides|ambush [3]|attack [3] from behind|manage to sneak-attack [3]], [murdering|killing|slaughtering] [3:them]!`,p=>{p[1].kill(p[3],`ambush`,p[2]);});
			new G.act(0.15,[coldBloodKiller,'-'],`[RED][1] tries to attack [2], but [2] retaliates and [beats|batters|pummels|strikes] [1:them] instead. [1] limps away, bruised.`,p=>{p[1].gain('bruised');});
				new G.act(0.05,[coldBloodKiller,'-'],`[RED][1] tries to attack [2], but [2] retaliates and [beats|batters|pummels|strikes] [1:them] instead. [1] winds up with a concussion!`,p=>{p[1].gain('concussed');});
				new G.act(0.15,[coldBloodKiller+' bruised','-'],`[RED][1] tries to attack [2], but [2] retaliates and [beats|batters|pummels|strikes] [1:them] instead. Being bruised already, [1] winds up with a concussion!`,p=>{p[1].gain('concussed');});
			new G.act(0.05,[coldBloodKiller,'- any','+ !sociopath'],`[RED][1] [kills|murders|attacks and kills] [2] [in front of [3]|before [3] can react]!<br>[There is nothing [3] can do...|[3] rushes to help, but [[2] dies in [3:their] arms|it's already too late]...]`,p=>{p[1].kill(p[2],`ambush`);p[3].gain('shell-shocked');});
			new G.act(0.15,[coldBloodKiller+' !bruised','-','+ heroic|kind|bulky !survivalist|manipulative|sociopath'],`[RED][1] attempts to kill [2], but [3] intervenes just in time!<br>[1] gets away from the failed attempt with only minor bruises.`,p=>{p[1].gain('bruised');});
				new G.act(0.05,[coldBloodKiller+' !bruised','-','+ heroic|kind|bulky !survivalist|manipulative|sociopath'],`[RED][1] attempts to kill [2], but [3] intervenes just in time!<br>[3] gives [1] a concussion before going to check if [2] is alright...`,p=>{p[1].gain('concussed');});
				new G.act(0.01,[coldBloodKiller+' !bruised','-','+ heroic|kind|bulky !survivalist|manipulative|sociopath'],`[RED][1] attempts to kill [2], but [3] intervenes just in time!<br>[3] had to kill [1] to protect [2]'s life...`,p=>{p[3].kill(p[1],`retaliation`);});
				new G.act(0.15,[coldBloodKiller+' bruised','-','+ heroic|kind|bulky !survivalist|manipulative|sociopath'],`[RED][1] attempts to kill [2], but [3] intervenes just in time!<br>[1], in [1:their] already bruised state, gets concussed in the counterattack!`,p=>{p[1].gain('concussed');});
				new G.act(0.05,[coldBloodKiller+' bruised','-','+ heroic|kind|bulky !survivalist|manipulative|sociopath'],`[RED][1] attempts to kill [2], but [3] intervenes just in time!<br>[3] had to kill [1] to protect [2]'s life...`,p=>{p[3].kill(p[1],`retaliation`);});
			new G.act(0.15,[coldBloodKiller,'-','+ heroic|kind !survivalist|manipulative|sociopath !bruised'],`[RED][1] attempts to kill [2], but [3] intervenes to protect [2:them]!<br>Unfortunately, [3] gets bruised as [2] runs away...`,p=>{p[3].gain('bruised');});
				new G.act(0.05,[coldBloodKiller,'-','+ heroic|kind !survivalist|manipulative|sociopath !bruised'],`[RED][1] attempts to kill [2], but [3] intervenes to protect [2:them]!<br>Unfortunately, while [3] checks that [2] is getting away [3:g|he gets|she gets|they get] attacked by [1], leading to a concussion!`,p=>{p[3].gain('concussed');});
				new G.act(0.01,[coldBloodKiller,'-','+ heroic|kind !survivalist|manipulative|sociopath !bruised'],`[RED][1] attempts to kill [2], but [3] intervenes to protect [2:them]!<br>Unfortunately, [3] dies in the attempt...`,p=>{p[1].kill(p[3],`failed retaliation`);});
				new G.act(0.15,[coldBloodKiller,'-','+ heroic|kind !survivalist|manipulative|sociopath bruised'],`[RED][1] attempts to kill [2], but [3] intervenes to protect [2:them]!<br>Unfortunately, with [3] already bruised [3:they] can't resist [1] and gets a concussion!`,p=>{p[3].gain('concussed');});
				new G.act(0.05,[coldBloodKiller,'-','+ heroic|kind !survivalist|manipulative|sociopath bruised'],`[RED][1] attempts to kill [2], but [3] intervenes to protect [2:them]!<br>Unfortunately, [3] dies in the attempt...`,p=>{p[1].kill(p[3],`failed retaliation`);});
			new G.act(0.01,['!survivalist|manipulative|sociopath|unstable|lunatic deaths:>0','- any'],`[RED][1] really doesn't want to, but [1:g|he finds himself|she finds herself|they find themself] having to get rid of [2].`,p=>{p[1].kill(p[2],`murder`);});

			//trait-based kills
			new G.act(0.7,[coldBloodKiller+' manipulative','- any naive|romantic'],`[RED][1] convinces [2] [[1:g|he's|she's|they're] [2:their] friend|[1:they] can be trusted|[1:g|he has|she has|they have] a way to help [2:them]] and then [beats|batters|pummels|strikes] [2:them]. [2] is bruised by the attack.`,p=>{p[2].gain('bruised');});
				new G.act(0.2,[coldBloodKiller+' manipulative','- any naive|romantic'],`[RED][1] convinces [2] [[1:g|he's|she's|they're] [2:their] friend|[1:they] can be trusted|[1:g|he has|she has|they have] a way to help [2:them]] and then [beats|batters|pummels|strikes] [2:them]. [2] is concussed!`,p=>{p[2].gain('concussed');});
				new G.act(0.05,[coldBloodKiller+' manipulative','- any naive|romantic'],`[RED][1] convinces [2] [[1:g|he's|she's|they're] [2:their] friend|[1:they] can be trusted|[1:g|he has|she has|they have] a way to help [2:them]] and then [murders|kills|slaughters|strangles|eviscerates|gets rid of] [2:them]!`,p=>{p[1].kill(p[2],`manipulation`);});
				new G.act(0.7,[coldBloodKiller+' manipulative','- any naive|romantic'],`[RED][1] convinces [2] [[1:g|he's|she's|they're] [2:their] friend|[1:they] can be trusted|[1:g|he has|she has|they have] a way to help [2:them]] and then [beats|batters|pummels|strikes] [2:them]! Already bruised, [2] becomes concussed!`,p=>{p[2].gain('concussed');});
				new G.act(0.2,[coldBloodKiller+' manipulative','- any naive|romantic'],`[RED][1] convinces [2] [[1:g|he's|she's|they're] [2:their] friend|[1:they] can be trusted|[1:g|he has|she has|they have] a way to help [2:them]] and then [murders|kills|slaughters|strangles|eviscerates|gets rid of] [2:them]!`,p=>{p[1].kill(p[2],`manipulation`);});
				new G.act(0.7,[coldBloodKiller+' manipulative','- brash|unstable'],`[RED][1] [lures|tricks|baits] [2] into [a fight|a duel|a standoff] and then springs a trap!<br>[2] is bruised as [2:g|he escapes|she escapes|they escape].`,p=>{p[2].gain('bruised');});
				new G.act(0.2,[coldBloodKiller+' manipulative','- brash|unstable'],`[RED][1] [lures|tricks|baits] [2] into [a fight|a duel|a standoff] and then springs a trap!<br>[2] gets a concussion in the aftermath!`,p=>{p[2].gain('concussed');});
				new G.act(0.05,[coldBloodKiller+' manipulative','- brash|unstable'],`[RED][1] [lures|tricks|baits] [2] into [a fight|a duel|a standoff] and then springs a trap!<br>[2] never stood a chance...`,p=>{p[1].kill(p[2],`manipulation`);});
				new G.act(0.7,[coldBloodKiller+' manipulative','- brash|unstable'],`[RED][1] [lures|tricks|baits] [2] into [a fight|a duel|a standoff] and then springs a trap!<br>Already bruised, [2] gets a concussion in the aftermath!`,p=>{p[2].gain('concussed');});
				new G.act(0.2,[coldBloodKiller+' manipulative','- brash|unstable'],`[RED][1] [lures|tricks|baits] [2] into [a fight|a duel|a standoff] and then springs a trap!<br>[2] never stood a chance...`,p=>{p[1].kill(p[2],`manipulation`);});
				new G.act(0.2,[coldBloodKiller+' manipulative','- any suicidal'],`[RED][1] convinces [2] to kill [1:themself].`,p=>{p[1].kill(p[2],`manipulation`);});
			new G.act(0.1,[coldBloodKiller+' brash','-'],`[RED][1] [rushes in|makes a risky play against [2]|chooses violence] and [murders|kills|slaughters|strangles|eviscerates|gets rid of] [2]!`,p=>{p[1].kill(p[2],`brash attack`);});
				new G.act(0.1,[coldBloodKiller+' brash','- brash '+coldBloodKiller],`[RED][1] and [2] see each other and immediately [turn to violence|prepare for battle|get into a fight]. Both end up [dying|getting killed in the process|dismembering each other].`,p=>{p[1].kill(p[2],`brash duel`);p[2].kill(p[1],`brash duel`);});
				new G.act(0.1,[coldBloodKiller+' brash','-'],`[RED][1] [rushes in|makes a risky play against [2]|chooses violence] but [2] is ready and turns [1]'s aggression against [1:them], killing [1:them]!`,p=>{p[2].kill(p[1],`retaliation`);});
				new G.act(0.7,[coldBloodKiller+' brash|frenzied axe','- !scarred','+'],`[RED][1] goes axe-crazy, flailing [1:their] axe at [2] and [3]. [1:g|He misses|She misses|They miss] a lot, but [2] and [3] wind up getting scarred before they can disengage.`,p=>{p[2].gain('scarred');p[3].gain('scarred');});
				new G.act(0.2,[coldBloodKiller+' brash|frenzied axe','- !scarred','+'],`[RED][1] goes axe-crazy, flailing [1:their] axe at [2] and [3]. They survive, but are badly wounded as they run away and start bleeding out!`,p=>{p[2].gain('bleeding out');p[3].gain('bleeding out');});
				new G.act(0.05,[coldBloodKiller+' brash|frenzied axe','- !scarred','+ !scarred'],`[RED][1] goes axe-crazy, chopping [2] and [3] to bits!`,p=>{p[1].kill(p[2],`axe`);p[1].kill(p[3],`axe`);});
				new G.act(0.7,[coldBloodKiller+' brash|frenzied pitchfork','- !scarred','+ !scarred'],`[RED][1] scars [2] and [3] with [1:their] pitchfork.`,p=>{p[2].gain('scarred');p[3].gain('scarred');});
				new G.act(0.2,[coldBloodKiller+' brash|frenzied pitchfork','- !scarred','+ !scarred'],`[RED][1] pierces [2] and [3] with [1:their] pitchfork, causing them to bleed out!`,p=>{p[2].gain('bleeding out');p[3].gain('bleeding out');});
				new G.act(0.05,[coldBloodKiller+' brash|frenzied pitchfork','- !scarred','+ !scarred'],`[RED][1] skewers [2] and [3] with [1:their] pitchfork!`,p=>{p[1].kill(p[2],`pitchfork`);p[1].kill(p[3],`pitchfork`);});
				new G.act(0.7,[coldBloodKiller+' brash|frenzied sword','- !scarred','+ !scarred'],`[RED][1] wildly swings at [2] and [3], scarring both.`,p=>{p[2].gain('scarred');p[3].gain('scarred');});
				new G.act(0.2,[coldBloodKiller+' brash|frenzied sword','- !scarred','+ !scarred'],`[RED][1] wildy swings at [2] and [3], causing both to start bleeding out!`,p=>{p[2].gain('bleeding out');p[3].gain('bleeding out');});
				new G.act(0.05,[coldBloodKiller+' brash|frenzied sword','- !scarred','+ !scarred '],`[RED][1] artfully [slices|cleaves] through [2] and [3] in one fell swoop!`,p=>{p[1].kill(p[2],`sword`);p[1].kill(p[3],`sword`);});
				new G.act(0.1,[coldBloodKiller+' brash flamethrower','- flamethrower !kind brash'],`[RED][1] and [2] joyfully incinerate each other with their flamethrowers.<br>When the fire dies down, there's not much of them left...`,p=>{p[1].kill(p[2],`flamethrower duel`);p[2].kill(p[1],`flamethrower duel`);});
				new G.act(0.1,[coldBloodKiller+' brash','- bow|crossbow|handgun|shotgun|lasergun'],`[RED][1] [rushes in|makes a risky play against [2]|chooses violence] but [2] shoots [1] as [1:g|he approaches|she approaches|they approach], killing [1:them]!`,p=>{p[2].kill(p[1],`retaliation`);});
			new G.act(0.1,[coldBloodKiller+' sneaky','- naive !survivalist any'],`[RED][1] [sneaks up to|lies in wait for|hides next to] [2] and [strangles|stabs|gets rid of] [2:them]!`,p=>{p[1].kill(p[2],`sneak attack`);});
				new G.act(0.05,[coldBloodKiller+' sneaky','- !naive !survialist any'],`[RED][1] [sneaks up to|lies in wait for|hides next to] [2] and [strangles|stabs|gets rid of] [2:them]!`,p=>{p[1].kill(p[2],`sneak attack`);});
				new G.act(0.05,[coldBloodKiller+' sneaky','- survialist'],`[RED][1] [sneaks up to|lies in wait for|hides next to] [2], but [2]'s survival instincts kick in and [2:they] kill [1]!`,p=>{p[2].kill(p[1],`failed sneak attack`);});
			new G.act(0.05,['manipulative|sociopath|lunatic|survivalist !composed','+ annoying'],`[RED][1] can't take it anymore and snaps [2]'s neck.`,p=>{p[1].kill(p[2],`too annoying to live`);});
			new G.act(0.7,[coldBloodKiller+' composed bow','- !scarred'],`[RED][1] [takes a deep breath|eyes up the target|keeps careful concentration] and draws [1:their] bow. [1:g|His|Her|Their] arrow flies off, and [pierces [2]'s|[1]'s arrow flies straight and true, piercing [2]'s] [side|shoulder].<br>[2] is scarred from the attack.`,p=>{p[2].gain('scarred');});
				new G.act(0.2,[coldBloodKiller+' composed bow','- !scarred'],`[RED][1] [takes a deep breath|eyes up the target|keeps careful concentration] and draws [1:their] bow. [1:g|His|Her|Their] arrow flies off, and [pierces [2]'s|[1]'s arrow flies straight and true, piercing [2]'s] [stomach|arm|leg].<br>[2] is bleeding out!`,p=>{p[2].gain('bleeding out');});
				new G.act(0.05,[coldBloodKiller+' composed bow','- !scarred'],`[RED][1] [takes a deep breath|eyes up the target|keeps careful concentration] and draws [1:their] bow. [1:g|His|Her|Their] arrow flies off, and [pierces [2]'s|[1]'s arrow flies straight and true, piercing [2]'s] [heart|head|chest].<br>[2] is killed instantly!`,p=>{p[1].kill(p[2],`arrow`);});
				new G.act(0.7,[coldBloodKiller+' composed bow','- scarred'],`[RED][1] [takes a deep breath|eyes up the target|keeps careful concentration] and draws [1:their] bow. [1:g|His|Her|Their] arrow flies off, and [pierces [2]'s|[1]'s arrow flies straight and true, piercing [2]'s] [stomach|arm|leg].<br>Already scarred, [2] can't dodge and is bleeding out!`,p=>{p[2].gain('bleeding out');});
				new G.act(0.2,[coldBloodKiller+' composed bow','- scarred'],`[RED][1] [takes a deep breath|eyes up the target|keeps careful concentration] and draws [1:their] bow. [1:g|His|Her|Their] arrow flies off, and [pierces [2]'s|[1]'s arrow flies straight and true, piercing [2]'s] [heart|head|chest].<br>[2] is killed instantly!`,p=>{p[1].kill(p[2],`arrow`);});
				new G.act(0.1,[coldBloodKiller+' composed crossbow','- !scarred'],`[RED][1] [takes a deep breath|eyes up the target|keeps careful concentration] and levels [1:their] crossbow. [1:g|His|Her|Their] bolt flies off, and [pierces [2]'s|[1]'s bolt flies straight and true, piercing [2]'s] [side|shoulder].<br>[2] is scarred from the attack.`,p=>{p[2].gain('scarred')});
				new G.act(0.2,[coldBloodKiller+' composed crossbow','- !scarred'],`[RED][1] [takes a deep breath|eyes up the target|keeps careful concentration] and draws [1:their] crossbow. [1:g|His|Her|Their] bolt flies off, and [pierces [2]'s|[1]'s bolt flies straight and true, piercing [2]'s] [stomach|arm|leg].<br>[2] is bleeding out!`,p=>{p[2].gain('bleeding out');});
				new G.act(0.05,[coldBloodKiller+' composed crossbow','- !scarred'],`[RED][1] [takes a deep breath|eyes up the target|keeps careful concentration] and draws [1:their] crossbow. [1:g|His|Her|Their] bolt flies off, and [pierces [2]'s|[1]'s bolt flies straight and true, piercing [2]'s] [heart|head|chest].<br>[2] is killed instantly!`,p=>{p[1].kill(p[2],`crossbow bolt`);});
				new G.act(0.7,[coldBloodKiller+' composed crossbow','- scarred'],`[RED][1] [takes a deep breath|eyes up the target|keeps careful concentration] and draws [1:their] crossbow. [1:g|His|Her|Their] bolt flies off, and [pierces [2]'s|[1]'s bolt flies straight and true, piercing [2]'s] [stomach|arm|leg].<br>Already scarred, [2] can't dodge and is bleeding out!`,p=>{p[2].gain('bleeding out');});
				new G.act(0.2,[coldBloodKiller+' composed crossbow','- scarred'],`[RED][1] [takes a deep breath|eyes up the target|keeps careful concentration] and draws [1:their] crossbow. [1:g|His|Her|Their] bolt flies off, and [pierces [2]'s|[1]'s bolt flies straight and true, piercing [2]'s] [heart|head|chest].<br>[2] is killed instantly!`,p=>{p[1].kill(p[2],`crossbow bolt`);});

			//weapon kills
			new G.act(0.7,[coldBloodKiller+' slingshot','-'],`[RED][1] uses [1:their] slingshot to [fling pebbles at [2]|rain gravel on [2]'s head|pelt [2] with rocks], which is more annoying than anything, really.`);
				new G.act(0.2,[coldBloodKiller+' slingshot','- !bruised|concussed'],`[RED][1] uses [1:their] slingshot to [fling pebbles at [2]|rain gravel on [2]'s head|pelt [2] with rocks], which causes some minor bruises.`,p=>{p[2].gain('bruised');});
				new G.act(0.2,[coldBloodKiller+' slingshot','- bruised !concussed'],`[RED][1] uses [1:their] slingshot to [fling pebbles at [2]|rain gravel on [2]'s head|pelt [2] with rocks]. In [2]'s bruised state, it causes a concussion!`,p=>{p[2].gain('concussed');});
			new G.act(0.7,[coldBloodKiller+' trowel','-'],`[RED][1] uses [1:their] trowel to [stab|attack|assault] [2]! It doesn't do much.`);
				new G.act(0.2,[coldBloodKiller+' trowel','- !scarred|bleeding_out'],`[RED][1] uses [1:their] trowel to [stab|attack|assault] [2]! [2] gets scarred.`,p=>{p[2].gain('scarred');});
				new G.act(0.2,[coldBloodKiller+' trowel','- scarred !bleeding_out'],`[RED][1] uses [1:their] trowel to [stab|attack|assault] [2]! With [2] already scarred [2:they] start bleeding out!`,p=>{p[2].gain('bleeding out');});
			new G.act(0.7,[coldBloodKiller+' axe','- !scarred|bleeding_out'],`[RED][1] [swings wildly|hacks away] at [2] with [1:their] axe!<br>[2] escapes but is badly scarred in the process.`,p=>{p[2].gain('scarred');});
				new G.act(0.2,[coldBloodKiller+' axe','- !scarred|bleeding_out'],`[RED][1] [swings wildly|hacks away] at [2] with [1:their] axe!<br>[2] escapes but collapses from blood loss just out of sight!`,p=>{p[2].gain('bleeding out');});
				new G.act(0.05,[coldBloodKiller+' axe','- !scarred|bleeding_out'],`[RED][1] chops [2] to bits with [1:their] axe!`,p=>{p[1].kill(p[2],`axe`);});
				new G.act(0.7,[coldBloodKiller+' axe','- scarred !bleeding_out'],`[RED][1] [swings wildly|hacks away] at [2] with [1:their] axe!<br>[2]'s scars break and [2:they] start bleeding out!`,p=>{p[2].gain('bleeding out');});
				new G.act(0.2,[coldBloodKiller+' axe','- scarred !bleeding_out'],`[RED][1] chops [2] to bits with [1:their] axe!`,p=>{p[1].kill(p[2],`axe`);});
			new G.act(0.7,[coldBloodKiller+' big_stick','- !bruised|concussed'],`[RED][1] [bludgeons|smacks|beats] [2] with [1:their] big stick!<br>[2] escapes with some bruises.`,p=>{p[2].gain('bruised');});
				new G.act(0.2,[coldBloodKiller+' big_stick','- !bruised|concussed'],`[RED][1] [bludgeons|smacks|beats] [2] with [1:their] big stick!<br>[2] is concussed!`,p=>{p[2].gain('concussed');});
				new G.act(0.05,[coldBloodKiller+' big_stick','- !bruised|concussed'],`[RED][1] [bludgeons|smacks|beats] [2] to death with [1:their] big stick!`,p=>{p[1].kill(p[2],`big stick`);});
				new G.act(0.7,[coldBloodKiller+' big_stick','- bruised !concussed'],`[RED][1] [bludgeons|smacks|beats] [2] with [1:their] big stick!<br>[2]'s bruises become a full on concussion!`,p=>{p[2].gain('concussed');});
				new G.act(0.2,[coldBloodKiller+' big_stick','- bruised !concussed'],`[RED][1] [bludgeons|smacks|beats] [2] to death with [1:their] big stick!`,p=>{p[1].kill(p[2],`big stick`);});
			new G.act(0.7,[coldBloodKiller+' brass_knuckles','- !bruised|concussed'],`[RED][1] delivers [a devestating punch|an uppercut|a cheap shot|a mean right hook] with [1:their] brass knuckles to [2], bruising [2:them].`,p=>{p[2].gain('bruised');});
				new G.act(0.2,[coldBloodKiller+' brass_knuckles','- !bruised|concussed'],`[RED][1] delivers [a devestating punch|an uppercut|a cheap shot|a mean right hook] with [1:their] brass knuckles to [2], causing a concussion.`,p=>{p[2].gain('concussed');});
				new G.act(0.05,[coldBloodKiller+' brass_knuckles','- !bruised|concussed'],`[RED][1] delivers [a devestating punch|an uppercut|a cheap shot|a mean right hook] with [1:their] brass knuckles to [2], killing [2:them].`,p=>{p[1].kill(p[2],`brass knuckles`);});
				new G.act(0.2,[coldBloodKiller+' brass_knuckles','- bruised !concussed'],`[RED][1] delivers [a devestating punch|an uppercut|a cheap shot|a mean right hook] with [1:their] brass knuckles to [2], causing a concussion to [2:their] already bruised body.`,p=>{p[2].gain('concussed');});
				new G.act(0.05,[coldBloodKiller+' brass_knuckles','- bruised !concussed'],`[RED][1] delivers [a devestating punch|an uppercut|a cheap shot|a mean right hook] with [1:their] brass knuckles to [2], killing [2:them].`,p=>{p[1].kill(p[2],`brass knuckles`);});
			new G.act(0.7,[coldBloodKiller+' knives','- !scarred|bleeding_out'],`[RED][1] [slashes|throws a knife|stabs] at [2], scarring [2:them] badly.`,p=>{p[2].gain('scarred');});
				new G.act(0.2,[coldBloodKiller+' knives','- !scarred|bleeding_out'],`[RED][1] [slashes|throws a knife|stabs] at [2], who escapes but is suffering from major blood loss!`,p=>{p[2].gain('bleeding out');});
				new G.act(0.05,[coldBloodKiller+' knives','- !scarred|bleeding_out'],`[RED][1] sticks a knife [2]'s back, killing [2:them]!`,p=>{p[1].kill(p[2],`knives`);});
				new G.act(0.7,[coldBloodKiller+' knives','- scarred !bleeding_out'],`[RED][1] [slashes|throws a knife|stabs] at [2], whose scars give way to major blood loss!`,p=>{p[2].gain('bleeding out');});
				new G.act(0.2,[coldBloodKiller+' knives','- scarred !bleeding_out'],`[RED][1] sticks a knife [2]'s back, killing [2:them]!`,p=>{p[1].kill(p[2],`knife`);});
			new G.act(0.7,[coldBloodKiller+' mallet','- !bruised|concussed'],`[RED][1] [smashes|whallops|pounds] [2] with a giant mallet until [2] is battered and bruised.`,p=>{p[2].gain('bruised');});
				new G.act(0.2,[coldBloodKiller+' mallet','- !bruised|concussed'],`[RED][1] [smashes|whallops|pounds] [2] with a giant mallet. [2] gets concussed!`,p=>{p[2].gain('concussed');});
				new G.act(0.05,[coldBloodKiller+' mallet','- !bruised|concussed'],`[RED][1] [smashes|whallops|pounds] [2] with a giant mallet until [2] is flat as a pancake.`,p=>{p[1].kill(p[2],`mallet`);});
				new G.act(0.2,[coldBloodKiller+' mallet','- bruised !concussed'],`[RED][1] [smashes|whallops|pounds] [2] with a giant mallet. In [2]'s bruised state [2:g|he gets|she gets|they get] a concussion!`,p=>{p[2].gain('concussed');});
				new G.act(0.05,[coldBloodKiller+' mallet','- bruised !concussed'],`[RED][1] [smashes|whallops|pounds] [2] with a giant mallet until [2] is flat as a pancake.`,p=>{p[1].kill(p[2],`mallet`);});
			new G.act(0.7,[coldBloodKiller+' pitchfork','- !scarred|bleeding_out'],`[RED][1] [lobs|thrusts|jabs] [1:their] pitchfork at [2], scarring [2:them].`,p=>{p[2].gain('scarred');});
				new G.act(0.2,[coldBloodKiller+' pitchfork','- !scarred|bleeding_out'],`[RED][1] [lobs|thrusts|jabs] [1:their] pitchfork at [2], piercing [2:their] skin and causing blood loss!`,p=>{p[2].gain('bleeding out');});
				new G.act(0.05,[coldBloodKiller+' pitchfork','- !scarred|bleeding_out'],`[RED][1] [lobs|thrusts|jabs] [1:their] pitchfork at [2], piercing [2:their] heart!`,p=>{p[1].kill(p[2],`pitchfork`);});
				new G.act(0.7,[coldBloodKiller+' pitchfork','- scarred !bleeding_out'],`[RED][1] [lobs|thrusts|jabs] [1:their] pitchfork at [2], which opens [2:their] wounds and causes [2:them] to start bleeding out!`,p=>{p[2].gain('bleeding out');});
				new G.act(0.2,[coldBloodKiller+' pitchfork','- scarred !bleeding_out'],`[RED][1] [lobs|thrusts|jabs] [1:their] pitchfork at [2], piercing [2:their] heart!`,p=>{p[1].kill(p[2],`pitchfork`);});
			new G.act(0.7,[coldBloodKiller+' spear','- !scarred|bleeding_out'],`[RED][1] [piereces|stabs|plunges] [2] with [1:their] spear, scarring [2:them].`,p=>{p[2].gain('scarred');});
				new G.act(0.2,[coldBloodKiller+' spear','- !scarred|bleeding_out'],`[RED][1] [pierces|stabs|plunges into] [2] with [1:their] spear, causing major blood loss!`,p=>{p[2].gain('bleeding out');});
				new G.act(0.05,[coldBloodKiller+' spear','- !scarred|bleeding_out'],`[RED][1] [pierces|stabs|plunges into] [2] with [1:their] spear, killing [2:them]!`,p=>{p[1].kill(p[2],`pitchfork`);});
				new G.act(0.7,[coldBloodKiller+' spear','- scarred !bleeding_out'],`[RED][1] [pierces|stabs|plunges into] [2] with [1:their] spear, whose scars open and start bleeding out!`,p=>{p[2].gain('bleeding out');});
				new G.act(0.2,[coldBloodKiller+' spear','- scarred !bleeding_out'],`[RED][1] [pierces|stabs|plunges into] [2] with [1:their] spear, killing [2:them]!`,p=>{p[1].kill(p[2],`pitchfork`);});
			new G.act(0.7,[coldBloodKiller+' sword','- !scarred|bleeding_out'],`[RED][1] artfully [slices|lacerates|slashes] [2] with [1:their] sword, causing serious scars.`,p=>{p[2].gain('scarred');});
				new G.act(0.2,[coldBloodKiller+' sword','- !scarred|bleeding_out'],`[RED][1] artfully [slices|lacerates|slashes] [2] with [1:their] sword, causing major blood loss!`,p=>{p[2].gain('bleeding out');});
				new G.act(0.05,[coldBloodKiller+' sword','- !scarred|bleeding_out'],`[RED][1] [artfully [slices|lacerates|slashes] [2]'s limbs off with [1:their] sword!|cuts [2] apart, breaks [2:them] apart, splays the gore of [2:their] profaned from across the stars, grinds [2:them] down until the very sparks cry for mercy, and relishes in ending [2:them] here and now.]`,p=>{p[1].kill(p[2],`sword`);});
				new G.act(0.7,[coldBloodKiller+' sword','- scarred !bleeding_out'],`[RED][1] artfully [slices|lacerates|slashes] [2] with [1:their] sword, causing serious scratches. [2:g|His|Her|Their] scars open and [2:they] start bleeding out!`,p=>{p[2].gain('bleeding out');});
				new G.act(0.2,[coldBloodKiller+' sword','- scarred !bleeding_out'],`[RED][1] artfully [slices|lacerates|slashes] [2]'s limbs off with [1:their] sword!`,p=>{p[1].kill(p[2],`sword`);});
			new G.act(0.7,[coldBloodKiller+' black_belt','- !bruised|concussed !black_belt'],`[RED][2] turns out to be no match for [1]'s [karate|ju jitsu|taekwondo|martial arts] skills and gets battered and bruised.`,p=>{p[2].gain('bruised');});
				new G.act(0.2,[coldBloodKiller+' black belt','- !bruised|concussed !black_belt'],`[RED][2] turns out to be no match for [1]'s [karate|ju jitsu|taekwondo|martial arts] skills and gets concussed!`,p=>{p[2].gain('concussed');});
				new G.act(0.05,[coldBloodKiller+' black belt','- !bruised|concussed !black_belt'],`[RED][2] turns out to be no match for [1]'s [karate|ju jitsu|taekwondo|martial arts] skills and ends up dying to [1]'s superior technique.`,p=>{p[1].kill(p[2],`black belt`);});
				new G.act(0.2,[coldBloodKiller+' black belt','- bruised !black_belt'],`[RED][2] turns out to be no match for [1]'s [karate|ju jitsu|taekwondo|martial arts] skills and in [2:their] battered state get concussed!`,p=>{p[2].gain('concussed');});
				new G.act(0.05,[coldBloodKiller+' black belt','- bruised !black_belt'],`[RED][2] turns out to be no match for [1]'s [karate|ju jitsu|taekwondo|martial arts] skills and ends up dying to [1]'s superior technique.`,p=>{p[1].kill(p[2],`black belt`);});
				new G.act(0.7,[coldBloodKiller+' black_belt !bruised','- black_belt !bruised'],`[1] and [2] get into combat using their martial arts prowess.<br>Finding each other worthy, they part ways as equals.`);
				new G.act(0.7,[coldBloodKiller+' black_belt !bruised','- black_belt bruised'],`[RED][1] and [2] get into combat using their martial arts prowess.<Br>In [2]'s weakened state, [2:they] can't keep up and [2:g|is|is|are] slain!`,p=>{p[1].kill(p[2],`black belt`);});
				new G.act(0.7,[coldBloodKiller+' black_belt bruised','- black_belt bruised'],`Despite their battered state, [1] and [2] get into combat using their martial arts prowess.<br>Finding each other worthy, they part ways as equals.`);
			new G.act(0.7,[coldBloodKiller+' bow','- !scarred|bleeding_out'],`[RED][[1] spots [2] in the distance, and draws [1:their] bow. [1:g|His|Her|Their] arrow flies off, and [pierces [2]'s|[1]'s arrow flies straight and true, piercing [2]'s] [side|shoulder].<br>[2] is badly scarred but manages to get behind cover.`,p=>{p[2].gain('scarred');});
				new G.act(0.2,[coldBloodKiller+' bow','- !scarred|bleeding_out'],`[RED][1] spots [2] in the distance, and draws [1:their] bow. [1:g|His|Her|Their] arrow flies off, and [pierces [2]'s|[1]'s arrow flies straight and true, piercing [2]'s] [stomach|arm|leg].<br>[2] manages to duck behind cover before collapsing from blood loss!`,p=>{p[2].gain('bleeding out');});
				new G.act(0.05,[coldBloodKiller+' bow','- !scarred|bleeding_out'],`[RED][1] spots [2] in the distance, and draws [1:their] bow. [1:g|His|Her|Their] arrow flies off, and [pierces [2]'s|[1]'s arrow flies straight and true, piercing [2]'s] [heart|head|chest].<br>[2] is killed instantly!`,p=>{p[1].kill(p[2],`arrow`);});
				new G.act(0.7,[coldBloodKiller+' bow','- scarred !bleeding_out'],`[RED][1] spots [2] in the distance, and draws [1:their] bow. [1:g|His|Her|Their] arrow flies off, and [pierces [2]'s|[1]'s arrow flies straight and true, piercing [2]'s] [stomach|arm|leg].<br>[2] manages to duck behind cover before [2:their] wounds develop into blood loss!`,p=>{p[2].gain('bleeding out');});
				new G.act(0.2,[coldBloodKiller+' bow','- scarred !bleeding_out'],`[RED][1] spots [2] in the distance, and draws [1:their] bow. [1:g|His|Her|Their] arrow flies off, and [pierces [2]'s|[1]'s arrow flies straight and true, piercing [2]'s] [heart|head|chest].<br>[2] is killed instantly!`,p=>{p[1].kill(p[2],`arrow`);});
				new G.act(0.2,[coldBloodKiller+' bow','-'],`[1] fires an arrow at [2], but misses...`);
			new G.act(0.7,[coldBloodKiller+' crossbow','- !scarred|bleeding_out'],`[RED][1] fires a crossbow bolt [from a distance|with trained precision|hurridly], scarring [2] badly.<br>[2] escapes as [1] reloads.`,p=>{p[2].gain('scarred');});
				new G.act(0.2,[coldBloodKiller+' crossbow','- !scarred|bleeding_out'],`[RED][1] fires a crossbow bolt [from a distance|with trained precision|hurridly], hitting [2] and causing [2:them] to start bleeding out!<br>[2] escapes as [1] reloads.`,p=>{p[2].gain('bleeding out');});
				new G.act(0.05,[coldBloodKiller+' crossbow','- !scarred|bleeding_out'],`[RED][1] fires a crossbow bolt [from a distance|with trained precision|hurridly] at [2].<br>It pierces [2]'s [heart|head|chest]!`,p=>{p[1].kill(p[2],`crossbow bolt`);});
				new G.act(0.7,[coldBloodKiller+' crossbow','- scarred  !bleeding_out'],`[RED][1] fires a crossbow bolt [from a distance|with trained precision|hurridly] at [2], who can't dodge in [2:their] wounded state and starts bleeding out!<br>[2] just barely escapes as [1] reloads.`,p=>{p[2].gain('bleeding out');});
				new G.act(0.2,[coldBloodKiller+' crossbow','- scarred  !bleeding_out'],`[RED][1] fires a crossbow bolt [from a distance|with trained precision|hurridly] at [2].<br>It pierces [2]'s [heart|head|chest]!`,p=>{p[1].kill(p[2],`crossbow bolt`);});
				new G.act(0.2,[coldBloodKiller+' crossbow','-'],`[1] fires an crossbow bolt at [2], but misses...`);
			new G.act(0.7,[coldBloodKiller+' flamethrower','- !burnt'],`[RED]Armed with [1:their] flamethrower, [1] [roasts|torches|burns] [2], leaving [2:them] with 3rd degree burns!`,p=>{p[2].gain(`burnt`);});
				new G.act(0.1,[coldBloodKiller+' flamethrower','- !burnt'],`[RED]Armed with [1:their] flamethrower, [1] [incinerates|torches|burns] [2] to a crisp!`,p=>{p[1].kill(p[2],`flamethrower`);});
				new G.act(0.2,[coldBloodKiller+' flamethrower','-','+ any !burnt'],`[RED]Armed with [1:their] flamethrower, [1] [roasts|torches|burns] [2] and [3], leaving both with 3rd degree burns!`,p=>{p[2].gain(`burnt`);p[3].gain(`burnt`);});
				new G.act(0.05,[coldBloodKiller+' flamethrower','-','+ any !burnt'],`[RED]Armed with [1:their] flamethrower, [1] [incinerates|torches|burns] [2] and [3] to a crisp!`,p=>{p[1].kill(p[2],`flamethrower`);p[1].kill(p[3],`flamethrower`);});
			new G.act(0.7,[coldBloodKiller+' grenade','- !burnt'],`[RED][1] [tosses|hurls|lobs] a live grenade at [2], who dives out of the way but is burnt by the blast!`,p=>{p[2].gain(`burnt`);p[1].lose('grenade');});
				new G.act(0.1,[coldBloodKiller+' grenade','- !burnt'],`[RED][1] tosses a live grenade at [2], who is instantly blown to smithereens!`,p=>{p[1].kill(p[2],`grenade`);p[1].lose('grenade');});
				new G.act(0.2,[coldBloodKiller+' grenade','- !burnt','+ any !burnt'],`[RED][1] [tosses|hurls|lobs] a live grenade at a group of enemies.<br>[2] and [3] are caught on the edges of the explosion and are badly burnt!`,p=>{p[2].gain(`burnt`);p[3].gain(`burnt`);p[1].lose('grenade');});
				new G.act(0.05,[coldBloodKiller+' grenade','- !burnt','+ any !burnt'],`[RED][1] [tosses|hurls|lobs] a live grenade at a group of enemies.<br>[2] and [3] are caught in the explosion and are blown to smithereens!`,p=>{p[1].kill(p[2],`grenade`);p[1].kill(p[3],`grenade`);p[1].lose('grenade');});
				new G.act(0.2,[coldBloodKiller+' grenade','- !burnt','+ any !burnt','+ any !burnt'],`[RED][1] [tosses|hurls|lobs] a live grenade at a group of enemies.<br>[2], [3] and [4] are caught on the edges of the explosion and are badly burnt!`,p=>{p[2].gain(`burnt`);p[3].gain(`burnt`);p[4].gain(`burnt`);p[1].lose('grenade');});
				new G.act(0.05,[coldBloodKiller+' grenade','- !burnt','+ any !burnt','+ any !burnt'],`[RED][1] [tosses|hurls|lobs] a live grenade at a group of enemies.<br>[2], [3] and [4] are caught in the explosion and are blown to smithereens!`,p=>{p[1].kill(p[2],`grenade`);p[1].kill(p[3],`grenade`);p[1].kill(p[4],`grenade`);p[1].lose('grenade');});
				new G.act(0.1,['!kind|survivalist|composed grenade'],`[RED][1] accidentally pulls the pin of their grenade, blowing [1:themself] up!`,p=>{p[1].kill(p[1],`grenade`);p[1].lose('grenade');});
			new G.act(0.7,[coldBloodKiller+' handgun','- !scarred|bleeding_out'],`[RED][1] finds [1:themself] [in range|within firing distance|just out of sight] of [2] and shoots [2:them]!<br>[2] takes a bullet to the side and is badly scarred.`,p=>{p[2].gain(`scarred`);});
				new G.act(0.2,[coldBloodKiller+' handgun','- !scarred|bleeding_out'],`[RED][1] finds [1:themself] [in range|within firing distance|just out of sight] of [2] and shoots [2:them]!<br>[2] takes a bullet to a vital location and starts bleeding out!`,p=>{p[2].gain('bleeding out');});
				new G.act(0.05,[coldBloodKiller+' handgun','- !scarred|bleeding_out'],`[RED][1] finds [1:themself] [in range|within firing distance|just out of sight] of [2] and shoots [2:them]!<br>[2] takes a bullet to the [heart|head] and dies!`,p=>{p[1].kill(p[2],`handgun`);});
				new G.act(0.7,[coldBloodKiller+' handgun','- scarred !bleeding_out'],`[RED][1] finds [1:themself] [in range|within firing distance|just out of sight] of [2] and shoots [2:them]!<br>With [2] already scarred from earlier, the bullet hits [2:them] and [2:they] start bleeding out!.`,p=>{p[2].gain('bleeding out');});
				new G.act(0.2,[coldBloodKiller+' handgun','- scarred !bleeding_out'],`[RED][1] finds [1:themself] [in range|within firing distance|just out of sight] of [2] and shoots [2:them]!<br>[2] takes a bullet to the [heart|head] and dies!`,p=>{p[1].kill(p[2],`handgun`);});
				new G.act(0.2,[coldBloodKiller+' handgun','- handgun !kind'],`[RED][1] and [2] duel it out, guns drawn.<br>[Two shots are fired.|One shot is fired.] [2] falls over, dead.`,p=>{p[1].kill(p[2],`gun duel`);});
				new G.act(0.2,[coldBloodKiller+' handgun','- handgun !kind'],`[RED][1] and [2] duel it out, guns drawn.<br>[Two shots are fired.|One shot is fired.] [1] falls over, dead.`,p=>{p[2].kill(p[1],`gun duel`);});
				new G.act(0.1,[coldBloodKiller+' handgun','- handgun !kind'],`[RED][1] and [2] duel it out, guns drawn.<br>Two shots are fired. [1] and [2] both fall over, dead.<br>Guess it's a tie.`,p=>{p[2].kill(p[1],`gun duel`);p[1].kill(p[2],`gun duel`);});
				new G.act(0.2,[coldBloodKiller+' handgun','-'],`[1] fires [1:their] gun at [2], but misses...`);
			new G.act(0.3,[coldBloodKiller+' rocket_launcher','- !burnt'],`[RED][1] [fires|launches|aims] a rocket at [2], which lands nearby. [2] is badly burnt by the blast!`,p=>{p[2].gain(`burnt`);});
				new G.act(0.1,[coldBloodKiller+' rocket_launcher','- !burnt'],`[RED][1] [fires|launches|aims] a rocket at [2], who gets absolutely blown to bits!`,p=>{p[1].kill(p[2],`rocket launcher`);});
				new G.act(0.1,[coldBloodKiller+' rocket_launcher','- !burnt','+ any !burnt'],`[RED][1] [fires|launches|aims] a rocket at a group of enemies.<br>[2] and [3] are caught on the edges of the explosion and are badly burnt!`,p=>{p[2].gain(`burnt`);p[3].gain(`burnt`);});
				new G.act(0.05,[coldBloodKiller+' rocket_launcher','- !burnt','+ any !burnt'],`[RED][1] [fires|launches|aims] a rocket at a group of enemies.<br>[2] and [3] are caught in the explosion and are absolutely blown to bits!`,p=>{p[1].kill(p[2],`rocket launcher`);p[1].kill(p[3],`rocket launcher`);});
				new G.act(0.05,[coldBloodKiller+' rocket_launcher','- !burnt','+ any !burnt','+ any !burnt'],`[RED][1] [fires|launches|aims] a rocket at a group of enemies.<br>[2], [3] and [4] are caught on the edges of the explosion and are badly burnt!`,p=>{p[2].gain(`burnt`);p[3].gain(`burnt`);p[4].gain(`burnt`);});
				new G.act(0.05,[coldBloodKiller+' rocket_launcher','- !burnt','+ any !burnt','+ any !burnt'],`[RED][1] [fires|launches|aims] a rocket at a group of enemies.<br>[2], [3] and [4] are caught in the explosion and are absolutely blown to bits.`,p=>{p[1].kill(p[2],`rocket launcher`);p[1].kill(p[3],`rocket launcher`);p[1].kill(p[4],`rocket launcher`);});
				new G.act(0.2,[coldBloodKiller+' rocket_launcher','-'],`[1] fires [1:their] rocket launcher at [2], but it goes wide and hits [an orphanage|a puppy shelter|a soup kitchen|a community college|a hospital.<br>Wait, there's been a hospital nearby this whole time? Well, not anymore].`);
			new G.act(0.7,[coldBloodKiller+' shears','- !scarred|bleeding_out'],`[RED][1] [has to fend off|gets into a scrap with|battles] [2] and uses [1:their] shears as a weapon! It doesn't do much.`);
				new G.act(0.2,[coldBloodKiller+' shears','- !scarred|bleeding_out'],`[RED][1] [has to fend off|gets into a scrap with|battles] [2] and uses [1:their] shears as a weapon! [2] gets some light scars.`,p=>{p[2].gain('scarred');});
				new G.act(0.2,[coldBloodKiller+' shears','- scarred !bleeding_out'],`[RED][1] [has to fend off|gets into a scrap with|battles] [2] and uses [1:their] shears as a weapon! With [2] already scarred, [1] lops off [a finger|[2:their] nose|a chunk of skin] and [2] starts bleeding out!`,p=>{p[2].gain('bleeding out');});
			new G.act(0.7,[coldBloodKiller+' shotgun','- !scarred|bleeding_out'],`[RED][1] [creeps up behind|finds [2:themself] face to face with] [2] and shoots [2:them] point-blank with [1:their] shotgun. [2] takes a the slug and starts bleeding out!`,p=>{p[2].gain(`bleeding out`);});
				new G.act(0.2,[coldBloodKiller+' shotgun','- !bleeding_out'],`[RED][1] [creeps up behind|finds [2:themself] face to face with] [2] and shoots [2:them] point-blank with [1:their] shotgun. [2] is blown sky-high!`,p=>{p[1].kill(p[2],`shotgun`);});
				new G.act(0.2,[coldBloodKiller+' shotgun','-'],`[1] fires [1:their] shotgun at [2], but misses...`);
			new G.act(0.3,[coldBloodKiller+' ancient_scepter','-'],`[RED][1] calls arcane fury down on [2], [1:their] ancient scepter beaming with an inner rage.<br>[[2] combusts into thousands of firey butterflies...|[2] vaporizes into a minty purple mist...|[2] grimaces, then starts bubbling violently, before melting into the ground.|For a second, nothing happens. [2] opens [2:their] mouth to say something, then starts peeling away, layer by layer.|At first, it seems nothing happened, until a light breeze blows [2] away like a pile of old dust.|[2] quivers strangely, then starts getting taller and taller, and thinner and thinner, until [2:g|he becomes just a line and disappears|she becomes just a line and disappears|they become just a line and disappear].]`,p=>{p[1].kill(p[2],`ancient scepter`);});
				new G.act(0.3,[coldBloodKiller+' ancient_scepter','- ancient_scepter !kind'],`[RED][1] and [2] have a merciless magic duel with their ancient scepters!<br>Sparks and bolts fly every which way, until both opponents suddenly bulge out and explode in a puff of acrid smoke.`,p=>{p[1].kill(p[2],`magic duel`);p[2].kill(p[1],`magic duel`);});
				new G.act(0.3,[coldBloodKiller+' !ancient_scepter magic_wand','- ancient_scepter !kind'],`[RED][1] challenges [2] to a magic duel with [1:their] magic wand!<br>Unfortunately for [1:them], [2] has an ancient scepter, and after a few colorful puffs and sparks, there's not much left of [1].`,p=>{p[2].kill(p[1],`magic duel`);});
			new G.act(0.6,[coldBloodKiller+' lasergun','- !burnt'],`[RED][1] grazes [2]'s with [1:their] lasergun, causing burn wounds wherever the beams connect.`,p=>{p[2].gain(`burnt`);});
				new G.act(0.3,[coldBloodKiller+' lasergun','- !burnt'],`[RED][1] shoots several white-hot holes in [2]'s body using [1:their] lasergun.`,p=>{p[1].kill(p[2],`lasergun`);});
				new G.act(0.2,[coldBloodKiller+' lasergun','-'],`[1] shoots [1:their] lasergun at [2]! Good thing [1:they] can't aim...`);
			new G.act(0.3,[coldBloodKiller+' magic_wand','-'],`[RED][1] gestures angrily towards [2] with [1:their] magic wand.<br>[2] only has time to feel [2:their] [blood turn to jelly|lungs turn into cauliflowers|blood vessels turn into spaghetti|major organs turn into various pastries|body temperature rising rapidly|brain hemispheres try to switch places|pancreas turn to cheese] before [2:g|he topples|she topples|they topple] over, dead.`,p=>{p[1].kill(p[2],`magic wand`);});
				new G.act(0.3,[coldBloodKiller+' magic_wand','- magic_wand !kind'],`[RED][1] and [2] have a merciless magic wand duel!<br>This goes on for a while until both of them explode in a splash of green.`,p=>{p[1].kill(p[2],`magic duel`);p[2].kill(p[1],`magic duel`);});
				new G.act(0.1,[coldBloodKiller+' magic_wand','-','+ any'],`[RED][1] gestures angrily towards [2] and [3] with [1:their] magic wand.<br>It seems this switched some of their major organs, [2] inheriting [3]'s [spleen|kidneys|lungs|intestines|brain stem|uvula|eyelids|pancreas|bladder] and vice-versa. They both topple over, dead.`,p=>{p[1].kill(p[2],`magic wand`);p[1].kill(p[3],`magic wand`);});
				new G.act(0.1,['magic_wand'],`[RED][1] shakes [1:their] magic wand, but it seems it's used up the last of its magic.<br>The star at the tip has grown dull and useless; [1] tosses it aside.`,p=>{p[1].lose('magic wand');});

			//wishes
			new G.act(0.2,[coldBloodKiller+' wish_ring','- any'],`[RED][1] wishes [2] would disappear... [1:g|His|Her|Their] wish ring shimmers for a second, and then -<br>...nobody seems to remember [2] ever existed at all.`,p=>{p[1].kill(p[2],`ceased to exist`);});
			new G.act(0.1,['naive wish_ring'],`[RED][1] wishes [1:g|he wasn't|she wasn't|they weren't] here... [1:g|His|Her|Their] wish ring shimmers for a second, and then -<br>...nobody seems to remember [1] ever existed at all.`,p=>{p[1].kill(p[1],`ceased to exist`);});
			new G.act(0.02,['kind|naive wish_ring alive:>1'],`[BLUE][1] wishes people would get along! [1:g|His|Her|Their] wish ring shimmers for a second, and then -<br>...it seems the world has been made a softer place.`,p=>{
				for (var i in G.chars){G.chars[i].gain('kind');}
			});
			new G.act(0.05,['!manipulative|sociopath|survivalist wish_ring alive:1 dead:>0'],`[BLUE][1] wishes [1:g|he wasn't|she wasn't|they weren't] alone anymore... [1:g|His|Her|Their] wish ring shimmers for a second, and then -<br>...it's a miracle! Everybody's been brought back to life!`,p=>{
				for (var i in G.chars){G.chars[i].lose('dead');G.chars[i].lose('zombie');G.chars[i].lose('ghost');G.chars[i].lose('bleeding out');G.chars[i].lose('concussed');G.chars[i].lose('burnt');G.chars[i].gain('revived');}
			});
			new G.act(0.05,['!manipulative|sociopath|survivalist wish_ring','+ dead'],`[BLUE][1] wishes [1:they] could see [2] one last time... [1:g|His|Her|Their] wish ring shimmers for a second, and then -<br>...it's a miracle! [2] came back to life!`,p=>{p[2].lose('dead');p[2].lose('zombie');p[2].lose('ghost');p[2].lose('bleeding out');p[2].lose('concussed');p[2].lose('burnt');p[2].gain('revived');});
			new G.act(0.05,['!manipulative|sociopath|survivalist wish_ring alive:1 dead:>0'],`[RED][1] wishes [1:g|he wasn't|she wasn't|they weren't] alone anymore... [1:g|His|Her|Their] wish ring shimmers for a second, and then -<br>...it all went horribly wrong! Everybody's been turned to zombies!`,p=>{
				for (var i in G.chars){G.chars[i].gain('zombie');}
			});
			new G.act(0.05,['!manipulative|sociopath|survivalist wish_ring','+ dead'],`[RED][1] wishes [1:they] could see [2] one last time... [1:g|His|Her|Their] wish ring shimmers for a second, and then -<br>...it's a nightmare! [2] was transformed into a zombie!`,p=>{p[2].gain('zombie');});
			new G.act(0.2,['wish_ring'],`[1] wishes for [a cheeseburger|a nice hunk of cheese|a garden salad|some grilled fish|a delicious steak|a tall glass of milk|some cookies|a birthday cake|some trail mix|a popsicle|some pizza|a chicken dinner|some fried chicken|some yogurt|a really cool shirt|a new hat|a bag of chips|some candy|some marshmallows|some comic books|a rubber ducky]...<br>[1:g|His|Her|Their] wish ring shimmers for a second, and [1:their] wish materializes in front of [1:them].`);
			new G.act(0.1,['wish_ring'],`[1] wishes for [a longer nose|a shorter nose|bigger ears|really cool facial hair|really nice eyebrows|an interesting accent]...<br>[1:g|His|Her|Their] wish ring shimmers for a second before answering [1:their] wish.`);
			new G.act(0.1,['wish_ring','+'],`[1] wishes for [2] to have [a longer nose|a shorter nose|bigger ears|really cool facial hair|really nice eyebrows|an interesting accent]...<br>Much to [2]'s surprise, [1]'s wish ring seems happy to comply.`);
			new G.act(0.1,['wish_ring'],`[1] tries to make a wish... [1:g|His|Her|Their] wish ring starts emitting a rancid smoke!<br>[1:g|He throws|She throws|They throw] it to the ground, where it fizzles and burns away in a crackling of angry sparkles.`,p=>{p[1].lose('wish ring');});
			
			//armor protections
			new G.act(0.6,[coldBloodKiller,'- knight_armor any'],`[1] tries to kill [2], but [2]'s knight armor diverts the blow!`);
			new G.act(0.6,[coldBloodKiller,'- combat_gear any'],`[1] tries to kill [2], but [2]'s combat gear diverts the blow!`);
			new G.act(0.6,[coldBloodKiller,'- wizard_robe any'],`[1] tries to kill [2], but [2]'s wizard robe has already carried [2:them] away to safety!`);
			new G.act(0.2,[coldBloodKiller,'- ornate_plate any'],`[RED][2] relies on [2:their] ornate plate to save [2:them] from [1]'s attack, but it [does nothing|is worthless|offers no protection]!`,p=>{p[1].kill(p[2],`armor failure`);});
			new G.act(0.4,[coldBloodKiller,'- shield any'],`[1] tries to kill [2], but [2]'s shield diverts the blow!`);
				new G.act(0.2,[coldBloodKiller,'- shield any'],`[RED][1] tries to kill [2], but [2]'s shield diverts the blow!<br>Unfortunately the shield shatters in the process...`,p=>{p[2].lose('shield')});
			
			//trait protections
			new G.act(0.4,[coldBloodKiller+' !sociopath|composed','- cute any'],`[1] tries to kill [2], but [2]['s puppy dog eyes convince [1:them] otherwise.| is just too cute to touch!]`);
				new G.act(0.2,[coldBloodKiller+' sociopath','- cute any'],`[RED][2] tries to use [2:their] cuteness to convince [1] not to kill [1:them], but [1] [doesn't care|isn't bothered|just relishes the kill more].`,p=>{p[1].kill(p[2],`not cute enough`);});
			
			//sheep
			new G.act(0.4,['magic_wand','- !sheep'],`[BLUE]With a flick of [1:their] magic wand, [1] turns [2] into a sheep!`,p=>{p[2].gain('sheep');});
				new G.act(0.4,['ancient_scepter','- !sheep'],`[BLUE]With a flick of [1:their] ancient scepter, [1] turns [2] into a sheep!`,p=>{p[2].gain('sheep');});
				new G.act(0.4,['!sociopath magic_wand','+ sheep'],`[BLUE][1] uses [1:their] magic wand to turn [1:their] ally [2] back from being a sheep!`,p=>{p[2].lose('sheep');});
				new G.act(0.2,['!sociopath kind magic_wand','- sheep'],`[BLUE][1] takes pity and uses [1:their] magic wand to turn [2] back from being a sheep!`,p=>{p[2].lose('sheep');});
				new G.act(0.4,['!sociopath ancient_scepter','+ sheep'],`[BLUE][1] uses [1:their] ancient scepter to turn [1:their] ally [2] back from being a sheep!`,p=>{p[2].lose('sheep');});
				new G.act(0.2,['!sociopath kind ancient_scepter','- sheep'],`[BLUE][1] takes pity and uses [1:their] ancient scepter to turn [2] back from being a sheep!`,p=>{p[2].lose('sheep');});
				new G.act(0.4,['!sociopath wish_ring','+ sheep'],`[BLUE][1] wishes [1:their] ally [2] was no longer a sheep. With a puff of smoke, a confused [2] stands up with grass in [2:their] mouth.`,p=>{p[2].lose('sheep');});
				new G.act(0.2,['!sociopath kind wish_ring','- sheep'],`[BLUE][1] takes pity and wishes [2] was no longer a sheep. With a puff of smoke, a confused [2] stands up with grass in [2:their] mouth.`,p=>{p[2].lose('sheep');});
				new G.act(1,['sheep'],`[1] is a sheep and [grazes peacefully|doesn't do much|baahs softly|glances away, a sad look in [1:their] eyes].`);
				new G.act(0.1,['sheep'],`[RED][1] is a sheep and [wanders off too far, becoming food for wild beasts|accidentally falls off a cliff while grazing].`,p=>{p[1].die(`sheep accident`);});
				new G.act(0.1,['','sheep'],`[RED][1] decides to put [2] out of [2:their] sheep misery.`,p=>{p[1].kill(p[2],`sheep pity kill`);});
				new G.act(0.1,['kind','sheep'],`[1] gently pets [2], who is a sheep.`);
				new G.act(0.1,['kind shears','sheep'],`[1] uses [1:their] shears to cut some uncomfortable wool off of [2], who is a sheep.`);
				new G.act(0.05,[coldBloodKiller+' sheep','-'],'[RED][2] underestimates a random sheep, who turns out to be [1] and headbutts [2] to death.',p=>{p[1].kill(p[2],`sheep headbutt`);});
			
			//therapy
			var lifecoach="heroic|composed|kind !sociopath"
			new G.act(0.5,['annoying','+ '+lifecoach],`[2] is telling [1] that [[1:they] need to calm down|[1:they] would have more friends on the team if [1:they] could control [1:themself]|[1:they] don't have to act out for attention].<br>[1] appears to be [ignoring|disagreeing with|not listening to|blocking out] [2]...`);
				new G.act(0.05,[lifecoach,'+ annoying'],`[BLUE][1] is telling [2] that [[2:they] need to calm down|[2:they] would have more friends on the team if [2:they] could control [1:themself]|[2:they] don't have to act out for attention].<br>[2] [understands|is really receptive|agrees]! [2] is no longer annoying!`,p=>{p[2].lose('annoying');});
				new G.act(0.5,['lunatic','+ '+lifecoach],`[2] is telling [1] that [the world is a logic-driven place|the team could use [1:their] talents if [1:they] could stay focused|reason is more rewarding than lunacy].<br>[1] appears to be [ignoring|disagreeing with|not listening to|blocking out] [2]...`);
				new G.act(0.05,[lifecoach,'+ lunatic'],`[BLUE][1] is telling [2] that [the world is a logic-driven place|the team could use [2:their] talents if [2:they] could stay focused|reason is more rewarding than lunacy].<br>[2] [understands|is really receptive|agrees]! [2] is no longer a lunatic!`,p=>{p[2].lose('lunatic');});
				new G.act(0.05,['lunatic','+ '+lifecoach],`[RED][1] is telling [2] that [the world is driven by chaos|the team could use [2:their] talents if [2:g|he wasn't|she wasn't|they weren't] restricted by normalcy|lunacy is more rewarding than reason].<br>[2] can't take the pressure and devolves into lunacy!`,p=>{p[2].gain('lunatic');});
				new G.act(0.5,['naive','+ '+lifecoach],`[2] is telling [1] that [[1:they] need to be more aware of [1:their] surroundings|the team would benefit if [1:they] were more careful|[1:they] can't remain oblivious forever].<br>[1] appears to be [ignoring|disagreeing with|not listening to|blocking out] [2]...`);
				new G.act(0.05,[lifecoach,'+ naive'],`[BLUE][1] is telling [2] that [[2:they] need to be more aware of [2:their] surroundings|the team would benefit if [2:they] were more careful|[2:they] can't remain oblivious forever].<br>[2] [understands|is really receptive|agrees]! [2] is no longer naive!`,p=>{p[2].lose('naive');});
				new G.act(0.5,['suicidal','+ '+lifecoach],`[2] is telling [1] that [[1:their] life matters|the team cares about [1:them]|the world is a beautiful place].<br>[1] appears to be [ignoring|disagreeing with|not listening to|blocking out] [2]...`);
				new G.act(0.05,[lifecoach,'+ suicidal'],`[BLUE][1] is telling [2] that [[2:their] life matters|the team cares about [2:them]|the world is a beautiful place].<br>[2] [understands|is really receptive|agrees]! [2] is no longer suicidal!`,p=>{p[2].lose('suicidal');});
				new G.act(0.5,['unstable','+ '+lifecoach],`[2] is telling [1] that [[1:their] emotions are [1:g|his|hers|theirs] to control|the team can help [1:them] calm down|there's no need to fly into rages].<br>[1] appears to be [ignoring|disagreeing with|not listening to|blocking out] [2]...`);
				new G.act(0.05,[lifecoach,'+ unstable'],`[BLUE][1] is telling [2] that [[2:their] emotions are [2:g|his|hers|theirs] to control|the team can help [2:them] calm down|there's no need to fly into rages].<br>[2] [understands|is really receptive|agrees]! [2] is no longer unstable!`,p=>{p[2].lose('unstable');});

			//suicide
			new G.act(0.05,['suicidal any'],`[RED][1] can't take it anymore...<br>[1] has taken [1:their] own life.`,p=>{p[1].kill(p[1],`suicide`);});
				new G.act(0.1,['suicidal handgun any'],`[RED][1] can't take it anymore...<br>[1] takes [1:their] own life with [1:their] handgun.`,p=>{p[1].kill(p[1],`handgun suicide`);});
				new G.act(0.1,['suicidal shotgun any'],`[RED][1] can't take it anymore...<br>[1] takes [1:their] own life with [1:their] shotgun.`,p=>{p[1].kill(p[1],`shotgun suicide`);});
				new G.act(0.1,['suicidal grenade any'],`[RED][1] can't take it anymore...<br>[1] pulls the pin of [1:their] grenade and takes [1:their] own life.`,p=>{p[1].kill(p[1],`grenade suicide`);});
				new G.act(1,['suicidal alive:1'],`[RED][1] finds no point in being alive if [1:g|he's|she's|they're] the only one left.<br>[1] has taken [1:their] own life...`,p=>{p[1].kill(p[1],`suicide`);});
				new G.act(0.5,['suicidal alive:1'],`[BLUE][1] is all alone. [1:g|He looks|She looks|They look] around, not a soul to be seen...<br>It's quite peaceful, actually.<br>[1] is no longer suicidal.`,p=>{p[1].lose('suicidal');});
				new G.act(0.1,['!suicidal !survivalist|sociopath alive:1'],`[RED]There's nobody left except for [1]. What a bleak existence...<br>[1] is feeling suicidal.`,p=>{p[1].gain('suicidal');});
			
			//trap
			new G.act(0.5,['survivalist|sneaky|manipulative|scavenger !kind|naive !set_trap'],`[1] sets down a trap.`,p=>{p[1].gain('set trap');});
				new G.act(0.5,['!survivalist','set_trap'],`[RED][1] gets caught in one of [2]'s traps!<br>All [1:they] can do now is hope to be freed...`,p=>{p[2].lose('set trap');p[1].gain('trapped');});
				new G.act(0.1,['survivalist','set_trap'],`[RED][1] gets caught in one of [2]'s traps... What a stupid mistake! [1:g|He|She|They] should have known better.<br>All [1:they] can do now is hope to be freed...`,p=>{p[2].lose('set trap');p[1].gain('trapped');});
				new G.act(0.5,['survivalist','- set_trap'],`[1] is smart enough to disarm one of [2]'s traps.`,p=>{p[2].lose('set trap');});
				new G.act(1,['trapped !bleeding_out any'],`[Still caught in the trap, [1] lays there, moping.|[1], still trapped, screams for help, but nobody answers...|[1] is still caught in the trap...|[1] is trapped and can't do anything.]`);
				new G.act(0.6,['trapped !bleeding_out any'],`[RED][1] was struggling in the trap and cut [1:themself] pretty bad.<br>[1] is now bleeding out!`,p=>{p[1].gain('bleeding out');});
				new G.act(1,['trapped bleeding_out any'],`[1] is trapped and slowly bleeding out...`);
				new G.act(0.5,['trapped bleeding_out any'],`[RED][1] finally dies from blood loss caused by the trap [1:g|he was|she was|they were] stuck in.`,p=>{p[1].die(`bled out in trap`);});
				new G.act(0.3,['!sociopath','+ trapped any'],`[BLUE][1] finds [2] caught in a trap, and manages to free [2:them].`,p=>{p[2].lose('trapped');});
				new G.act(0.3,['!sociopath|survivalist kind|heroic','- trapped any'],`[BLUE][1] feels sorry for [2] and frees [2:them] from the trap.`,p=>{p[2].lose('trapped');});
				new G.act(0.3,[coldBloodKiller,'- trapped any'],`[RED][1] finds [2] stuck in a trap and kills [2:them] while [2:they] struggle to escape.`,p=>{p[1].kill(p[2],'trap coup de gras');});
				new G.act(0.1,['trapped'],`[BLUE][1] manages to pull [1:themself] out of the trap!`,p=>{p[1].lose('trapped');});
				new G.act(0.3,['trapped knives any'],`[BLUE][1] manages to reach for [1:their] knives and cut [1:themself] out of the trap!`,p=>{p[1].lose('trapped');});
			
			//wounds
			new G.act(0.7,[coldBloodKiller,'- any bleeding_out|concussed|burnt'],`[RED][1] finds [2] [hiding in recovery|recovering from [2:their] wounds|trying to recover] and [delivers the coup de gras|makes the killing blow|puts an end to [2:them]].`,p=>{p[1].kill(p[2],`coup de gras`);});
				new G.act(0.35,[coldBloodKiller+' sociopath','- any bleeding_out|concussed|burnt'],`[1] finds [2] [hiding in recovery|recovering from [2:their] wounds|trying to recover] and sits down to watch [2:them] suffer for a while.`);
				new G.act(0.35,[coldBloodKiller+' sociopath','- any bleeding_out !concussed'],`[RED][1] finds [2] [hiding in recovery|recovering from [2:their] wounds|trying to recover] and decides [2:g|he isn't|she isn't|they aren't] suffering enough! [1] hits [2:them] in the head, causing a concussion!`,p=>{p[1].gain(`concussion`)});
				new G.act(0.35,[coldBloodKiller+' sociopath','- any concussed !bleeding_out'],`[RED][1] finds [2] [hiding in recovery|recovering from [2:their] wounds|trying to recover] and decides [2:g|he isn't|she isn't|they aren't] suffering enough! [1] cuts [2:them], causing [2:them] to bleed out!`,p=>{p[1].gain(`bleeding_out`)});
				new G.act(0.2,['sociopath !kind','+ any bleeding_out|concussed|burnt'],`[RED][1] watches [2] [hiding in recovery|recovering from [2:their] wounds|trying to recover] and decides [[1:they] won't be slowed down anymore|[2] isn't worth the effort|[1:their] efforts are better spent killing enemies].`,p=>{p[1].kill(p[2],`coup de gras`);});
				new G.act(0.01,['!kind !sociopath','+ any bleeding_out|concussed|burnt'],`[RED][1] watches [2] [hiding in recovery|recovering from [2:their] wounds|trying to recover] and decides [[2:g|he is|she is|they are] suffering too much|[2:g|he is|she is|they are] better off in the afterlife|[2:they] would want [1] to move on].`,p=>{p[1].kill(p[2],`coup de gras`);});
				new G.act(0.7,[coldBloodKiller+' !sneaky','- any bleeding_out|concussed|burnt','+ heroic'],`[1] finds [2] [hiding in recovery|recovering from [2:their] wounds|trying to recover] and tries to [put [2:them] out of their misery|deliver the coup de gras|end [2:their] suffering|make the killing blow] but [3] is [watching over [2]|standing guard].`);
				new G.act(0.4,[coldBloodKiller+' sneaky','- any bleeding_out|concussed|burnt','+ heroic'],`[RED][3] watches over [2] [hiding in recovery|recovering from [2:their] wounds|trying to recover], but [1] manages to sneak past [3:them] and [deliver the coup de gras|make the killing blow|put an end to [2]].`,p=>{p[1].kill(p[2],`coup de gras`);});
			new G.act(1,['!trapped bleeding_out any'],`[1] is [experiencing blood loss|bleeding out rapidly|losing blood at an alarming rate] and may not survive much longer.`);
				new G.act(1,['!trapped bleeding_out any','+ kind !sociopath'],`[1] is [experiencing blood loss|bleeding out rapidly|losing blood at an alarming rate] but might survive given [2]'s attention.`);
				new G.act(0.1,['!trapped bleeding_out any'],`[BLUE][1]'s wounds clot and [1:g|he is|she is|they are] no longer suffering from blood loss.`,p=>{p[1].lose(`bleeding out`);});
				new G.act(0.1,['!trapped bleeding_out any','+ kind !sociopath'],`[BLUE][2] gives [1] medical attention which puts a stop [1:their] blood loss.`,p=>{p[1].lose(`bleeding out`);});
				new G.act(0.1,['!trapped bleeding_out bulky any'],`[BLUE][1]'s [sheer bulk|strong constitution|healthy body] helps [1:them] overcome [1:their] blood loss.`,p=>{p[1].lose(`bleeding out`);});
				new G.act(0.1,['!trapped bleeding_out any','+ shears !sociopath'],`[BLUE][2] uses [2:their] shears to gather herbs that put a stop to [1]'s blood loss.`,p=>{p[1].lose(`bleeding out`);});
				new G.act(0.1,['!trapped bleeding_out any'],`[RED][1] dies from blood loss.`,p=>{p[1].die(`blood loss`);});
			new G.act(1,['concussed any'],`[1] is [sitting around dazed|flickering in and out of consciousness|nauseus and vomiting] and may not survive much longer.`);
				new G.act(1,['concussed any','+ kind !sociopath'],`[1] is [sitting around dazed|flickering in and out of consciousness|nauseus and vomiting] but might survive given [2]'s attention.`);
				new G.act(0.05,['concussed any'],`[BLUE][1]'s head clears and [1:g|he is|she is|they are] no longer suffering from a concussion.`,p=>{p[1].lose(`concussed`);});
				new G.act(0.1,['concussed any','+ kind !sociopath'],`[BLUE][2] gives [1] medical attention which puts a stop [1:their] concussion.`,p=>{p[1].lose(`concussed`);});
				new G.act(0.05,['concussed bulky any'],`[BLUE][1]'s [sheer bulk|strong constitution|healthy body] helps [1:them] overcome [1:their] concussion.`,p=>{p[1].lose(`concussed`);});
				new G.act(0.1,['concussed any','+ shears !sociopath'],`[BLUE][2] uses [2:their] shears to gather herbs that put remedy [1]'s concussion.`,p=>{p[1].lose(`concussed`);});
				new G.act(0.1,['concussed any'],`[RED][1] slips into a coma from their concussion and doesn't wake up.`,p=>{p[1].die(`concussion`);});
			new G.act(1,['burnt any'],`[1]['s skin is peeling| is trying to cool off [1:their] burn| is trying not to burst [1:their] heat blisters] and [1:they] may not survive much longer.`);
				new G.act(1,['burnt any','+ kind !sociopath'],`[1]['s skin is peeling| is trying to cool off [1:their] burn| is trying not to burst [1:their] heat blisters] but might survive given [2]'s attention.`);
				new G.act(0.05,['burnt any'],`[BLUE][1]'s burn wounds fade.`,p=>{p[1].lose(`burnt`);});
				new G.act(0.1,['burnt bulky any'],`[BLUE][1]'s [sheer bulk|strong constitution|healthy body] helps [1:them] overcome [1:their] burn wounds.`,p=>{p[1].lose(`burnt`);});
				new G.act(0.05,['burnt any','+ kind !sociopath'],`[BLUE][2] gives [1] medical attention which puts an end to [1:their] burn wounds.`,p=>{p[1].lose(`burnt`);});
				new G.act(0.1,['burnt any','+ shears !sociopath'],`[BLUE][2] uses [2:their] shears to gather herbs that soothe [1]'s burn wounds.`,p=>{p[1].lose(`burnt`);});
				new G.act(0.1,['burnt any'],`[RED][1]'s burn wounds overcome [1:them] and [1:g|he withers|she withers|they wither] away.`,p=>{p[1].die(`burn`);});
			
			//betrayal
			new G.act(0.5,['sociopath|manipulative','+ sociopath|survivalist|manipulative','+'],`[1] and [2] conspire against [3]...`);
				new G.act(0.05,['sociopath|manipulative','+ sociopath|survivalist|manipulative','+'],`[RED]In an act of betrayal, [1] and [2] team up and [murder|eliminate|get rid of] [3]!`,p=>{p[1].kill(p[3],`betrayal`,p[2]);});
			new G.act(0.05,['sociopath','+ any'],`[RED][1] feels like [2] is slowing [1:them] down.<br>[1] [has murdered|got rid of|eliminated|did quick work of] [2]!`,p=>{p[1].kill(p[2],`betrayal`);});
			
			//death reactions
			new G.act(0.3,['has_killed sociopath|manipulative|lunatic|unstable !kind'],`[1] can't wait to kill again...`);
			new G.act(0.3,['has_killed kind'],`[1] [feels horrible for what [1:they] did...|wishes [1:they] didn't have to kill anyone...|never wants to kill anyone ever again.]`);
			new G.act(0.3,['!has_killed kind','+ has_killed'],`[1] still can't believe [2] killed someone...`);
			new G.act(0.3,['!manipulative|sociopath|survivalist','+ dead'],`[1] [reminisces about|thinks about|remembers|recalls something about|remembers how much [1:g|he misses|she misses|they miss]] [2] and sobs quietly.`);
			new G.act(0.3,['!manipulative|sociopath|survivalist alive:1'],`[1] [reminisces about|thinks about|remembers|remembers how much [1:g|he misses|she misses|they miss]] everybody and sobs quietly.`);
			
			//armor cleaning
			new G.act(0.2,['has_killed dapper_suit'],`[1] washes the blood off of [1:their] dapper suit.`);
			new G.act(0.2,['has_killed knight_armor'],`[1] washes the blood off of [1:their] knight armor.`);
			new G.act(0.2,['has_killed combat_gear'],`[1] washes the blood off of [1:their] combat gear.`);
			new G.act(0.2,['has_killed wizard_robe'],`[1] washes the blood out of [1:their] wizard robe.`);
			new G.act(0.2,['has_killed ornate_plate'],`[1] washes the blood off of [1:their] ornate plate.`);

			//pet kills
			new G.act(0.6,[coldBloodKiller+' pet_blorb','- !bruised|concussed'],`[RED][1] commands [1:their] pet blorb to attack [2]!<br>[2] gets bounced on, bruising [2:them].`,p=>{p[2].gain(`bruised`);});
				new G.act(0.25,[coldBloodKiller+' pet_blorb','- !bruised|concussed'],`[RED][1] commands [1:their] pet blorb to attack [2]!<br>[2] gets bounced on, getting a concussion!`,p=>{p[2].gain(`concussed`);});
				new G.act(0.05,[coldBloodKiller+' pet_blorb','- !bruised|concussed'],`[RED][1] commands [1:their] pet blorb to attack [2]!<br>[2] gets bounced to death!`,p=>{p[1].kill(p[2],`pet blorb`);});
				new G.act(0.6,[coldBloodKiller+' pet_blorb','- !concussed'],`[RED][1] commands [1:their] pet blorb to attack [2]!<br>In [2]'s bruised state, [2:g|he gets|she gets|they get] a concussion!`,p=>{p[2].gain(`concussed`);});
				new G.act(0.25,[coldBloodKiller+' pet_blorb','- !concussed'],`[RED][1] commands [1:their] pet blorb to attack [2]!<br>[2] gets bounced to death!`,p=>{p[1].kill(p[2],`pet blorb`);});
				new G.act(0.3,['kind|naive pet_blorb','- !bruised|concussed'],`[RED][1]'s pet blorb accidentally bounces into [2], bruising [2:them]. Better be more careful in the future.`,p=>{p[2].gain(`bruised`);});
				new G.act(0.125,['kind|naive pet_blorb','- !bruised|concussed'],`[RED][1]'s pet blorb accidentally bounces into [2], giving [2:them] a concussion! Better be more careful in the future.`,p=>{p[2].gain(`concussed`);});
				new G.act(0.025,['kind|naive pet_blorb','- !bruised|concussed'],`[RED][1]'s pet blorb accidentally bounces into [2], killing [2:them]! Better be more careful in the future.`,p=>{p[1].kill(p[2],`pet blorb`);});
				new G.act(0.3,['kind|naive pet_blorb','- !concussed'],`[RED][1]'s pet blorb accidentally bounces into [2], which in [2:their] bruised state gives [2:them] a concussion! Better be more careful in the future.`,p=>{p[2].gain(`concussed`);});
				new G.act(0.125,['kind|naive pet_blorb','- !concussed'],`[RED][1]'s pet blorb accidentally bounces into [2], killing [2:them]! Better be more careful in the future.`,p=>{p[1].kill(p[2],`pet blorb`);});
			new G.act(0.6,[coldBloodKiller+' pet_fairy','- !scarred|bleeding_out'],`[RED][1] points a finger at [2] and [1:their] pet fairy flies off!<br>[2] flees, but gets scarred.`,p=>{p[2].gain(`scarred`);});
				new G.act(0.25,[coldBloodKiller+' pet_fairy','- !scarred|bleeding_out'],`[RED][1] points a finger at [2] and [1:their] pet fairy flies off!<br>[2] gets mauled and starts bleeding out before the fairy gets bored and flies off.`,p=>{p[2].gain(`bleeding out`);});
				new G.act(0.05,[coldBloodKiller+' pet_fairy','- !scarred|bleeding_out'],`[RED][1] points a finger at [2] and [1:their] pet fairy flies off!<br>The fairy is brutal and tears [2] to shreds!`,p=>{p[1].kill(p[2],`pet fairy`);});
				new G.act(0.5,[coldBloodKiller+' pet_fairy','- !bleeding_out'],`[RED][1] points a finger at [2] and [1:their] pet fairy flies off!<br>With [2] already suffering from scars, it's easy for the fairy to rip the skin and cause [2:them] to start bleeding out!`,p=>{p[2].gain(`bleeding out`);});
				new G.act(0.25,[coldBloodKiller+' pet_fairy','- !bleeding_out'],`[RED][1] points a finger at [2] and [1:their] pet fairy flies off!<br>The fairy is brutal and tears [2] to shreds!`,p=>{p[1].kill(p[2],`pet fairy`);});
				new G.act(0.6,['kind|naive pet_fairy','- !scarred|bleeding_out'],` [RED][1] tries to regain control of [1:their] pet fairy as it scars [2] to no avail.`,p=>{p[2].gain(`scarred`);});
				new G.act(0.25,['kind|naive pet_fairy','- !scarred|bleeding_out'],` [RED][1] tries to regain control of [1:their] pet fairy as it attacks [2] to no avail. [2] is bleeding out!`,p=>{p[2].gain(`bleeding out`);});
				new G.act(0.05,['kind|naive pet_fairy','- !scarred|bleeding_out'],` [RED][1] tries to regain control of [1:their] pet fairy as it mauls [2] to no avail.`,p=>{p[1].kill(p[2],`pet fairy`);});
				new G.act(0.6,['kind|naive pet_fairy','- !bleeding_out'],` [RED][1] tries to regain control of [1:their] pet fairy as it attacks [2] to no avail. In [2:their] scarred state, [2:they] start bleeding out before the fairy is called off.`,p=>{p[2].gain(`bleeding out`);});
				new G.act(0.25,['kind|naive pet_fairy','- !bleeding_out'],` [RED][1] tries to regain control of [1:their] pet fairy as it mauls [2] to no avail.`,p=>{p[1].kill(p[2],`pet fairy`);});
			new G.act(0.6,[coldBloodKiller+' pet_mini-griffoth','-'],`[RED][1] decrees that [2] must be hunted, and [1:their] pet mini-griffoth spits out a spike ball.<br>The decree has been carried out! [2] evades the ball but gets scarred by it.`,p=>{p[2].gain(`scarred`);});
				new G.act(0.25,[coldBloodKiller+' pet_mini-griffoth','-'],`[RED][1] decrees that [2] must be hunted, and [1:their] pet mini-griffoth spits out a spike ball.<br>The decree has been carried out! [2] evades the ball but gets gashed by it and starts bleeding out!`,p=>{p[2].gain(`bleeding out`);});
				new G.act(0.05,[coldBloodKiller+' pet_mini-griffoth','-'],`[RED][1] decrees that [2] must be hunted, and [1:their] pet mini-griffoth spits out a spike ball.<br>The decree has been carried out! [2] gets struck in the chest and dies!`,p=>{p[1].kill(p[2],`pet mini-griffoth`);});
				new G.act(0.6,[coldBloodKiller+' pet_mini-griffoth','-'],`[RED][1] decrees that [2] must be hunted, and [1:their] pet mini-griffoth spits out a spike ball.<br>The decree has been carried out! [2] is too scarred to move out of the way and gets gashed, causing [2:them] to bleed out!`,p=>{p[2].gain(`bleeding out`);});
				new G.act(0.25,[coldBloodKiller+' pet_mini-griffoth','-'],`[RED][1] decrees that [2] must be hunted, and [1:their] pet mini-griffoth spits out a spike ball.<br>The decree has been carried out! [2] gets struck in the chest and dies!`,p=>{p[1].kill(p[2],`pet mini-griffoth`);});
				new G.act(0.3,['kind|naive pet_mini_griffoth','- !scarred|bleeding_out'],`[RED][1]'s pet mini-griffoth hacks up a spike ball, which goes hurtling in [2]'s direction. [1] calls out to be careful, but it's too late. [2] gets scarred as [2:they] evade the ball.`,p=>{p[2].gain(`scarred`);});
				new G.act(0.125,['kind|naive pet_mini_griffoth','- !scarred|bleeding_out'],`[RED][1]'s pet mini-griffoth hacks up a spike ball, which goes hurtling in [2]'s direction. [1] calls out to be careful, but it's too late. [2] gets gashed as [2:they] evade the ball and starts bleeding out!`,p=>{p[2].gain(`bleeding out`);});
				new G.act(0.025,['kind|naive pet_mini_griffoth','- !scarred|bleeding_out'],`[RED][1]'s pet mini-griffoth hacks up a spike ball, which goes hurtling in [2]'s direction. [1] calls out to be careful, but it's too late. [2] can't get out of the way in time and is killed!`,p=>{p[1].kill(p[2],`pet mini-griffoth`);});
				new G.act(0.3,['kind|naive pet_mini_griffoth','- !bleeding_out'],`[RED][1]'s pet mini-griffoth hacks up a spike ball, which goes hurtling in [2]'s direction. [1] calls out to be careful, but it's too late. [2] is too scarred to move out of the way and gets gashed, causing [2:them] to bleed out!`,p=>{p[2].gain(`bleeding out`);});
				new G.act(0.125,['kind|naive pet_mini_griffoth','- !bleeding_out'],`[RED][1]'s pet mini-griffoth hacks up a spike ball, which goes hurtling in [2]'s direction. [1] calls out to be careful, but it's too late. [2] can't get out of the way in time and is killed!`,p=>{p[1].kill(p[2],`pet mini-griffoth`);});

			//pet misc.
			new G.act(0.2,['!scarred pet_fairy'],`[RED][1]'s pet fairy bites [1:their] hand as [1:they] feed it! [1] gets some serious scars.`,p=>{p[1].gain(`scarred`);});
				new G.act(0.2,['!bleeding_out pet_fairy scarred'],`[RED][1]'s pet fairy bites [1:their] hand as [1:they] feed it! [1] is bleeding out!`,p=>{p[1].gain(`bleeding out`);});
			new G.act(0.4,['bleeding_out|concussed|burnt any pet_winged_troupple'],`[BLUE]The pet winged troupple kisses [1]'s booboos, making it all better.`,p=>{p[1].lose(`bleeding out`);p[1].lose(`concussed`);p[1].lose(`burnt`);});
				new G.act(0.1,['bleeding_out|concussed|burnt any pet_winged_troupple'],`[BLUE]The pet winged troupple kisses [1]'s booboos, making it all better.<br>Exhausted of its healing energy, the pet winged troupple flies off to return to the swamp.`,p=>{p[1].lose(`bleeding out`);p[1].lose(`concussed`);p[1].lose(`burnt`);p[1].lose(`pet winged troupple`);});
			
			//accidents happen
			new G.act(0.01,['!survivalist'],`[RED][1] [kind of wanders off and gets lost, never to be seen again.|wasn't looking and fell off a cliff...|eats something [1:they] shouldn't have and dies of horrible stomach pains.|gets mauled by wild animals.|trips and falls in a really bad way, breaking [1:their] neck.]`,p=>{p[1].die(`accident`);});
				new G.act(0.4,['!survivalist !scarred'],`[RED][1] [falls into a rose patch|gets assaulted by [squirrels|rats|gophers]|scrapes [1:their] knee], getting scarred in the process.`,p=>{p[1].gain(`scarred`);});
				new G.act(0.1,['!survivalist'],`[RED][1] [gets attacked by a [wolf|bear|divedrake]|cuts [1:themself] on a sharp rock|isn't careful while shaving] and starts bleeding out!`,p=>{p[1].gain(`bleeding out`);});
				new G.act(0.4,['!survivalist !bruised'],`[RED][1] [takes a tumble onto the ground|isn't watching [1:their] step and faceplants into a low branch|is pelted with [hail|falling acorns]], getting bruised in the process.`,p=>{p[1].gain(`bruised`);});
				new G.act(0.1,['!survivalist'],`[RED][1] [gets hit in the head by a stray baseball|falls off a short bluff|is stomped by a turtle that wants revenge for being removed from the game] and gets a concussion!`,p=>{p[1].gain(`concussed`);});
				new G.act(0.1,['!survivalist'],`[RED][1] [strays too close to the campfire|misfires a flare gun|fails horribly in a rap battle] and gets burnt!`,p=>{p[1].gain(`burnt`);});
			new G.act(0.005,['survivalist any'],`[RED][1] [gets cocky|is feeling overconfident|can't imagine failure|isn't giving it [1:their] all] and ends up dying from a stupid mistake.`,p=>{p[1].die(`stupid mistake`);});
				new G.act(0.2,['survivalist !scarred'],`[RED][1] [gets cocky|is feeling overconfident|can't imagine failure|isn't giving it [1:their] all] and ends up getting scarred from a stupid mistake.`,p=>{p[1].gain(`scarred`);});
				new G.act(0.05,['survivalist'],`[RED][1] [gets cocky|is feeling overconfident|can't imagine failure|isn't giving it [1:their] all] and makes a stupid mistake that causes [1:them] to start bleeding out!`,p=>{p[1].gain(`bleeding out`);});
				new G.act(0.2,['survivalist !bruised'],`[RED][1] [gets cocky|is feeling overconfident|can't imagine failure|isn't giving it [1:their] all] and ends up getting bruised from a stupid mistake.`,p=>{p[1].gain(`bruised`);});
				new G.act(0.05,['survivalist'],`[RED][1] [gets cocky|is feeling overconfident|can't imagine failure|isn't giving it [1:their] all] and makes a stupid mistake that causes [1:them] to get a concussion!`,p=>{p[1].gain(`concussed`);});
				new G.act(0.05,['survivalist'],`[RED][1] [gets cocky|is feeling overconfident|can't imagine failure|isn't giving it [1:their] all] and makes a stupid mistake that causes [1:them] to get burnt!`,p=>{p[1].gain(`burnt`);});
			
			//death stuff
			new G.act(0.05,['dead'],`[The [pile of flesh that used to be|dead husk of] [1]|[1]'s [corpse|lifeless body]] [[rots|festers|desiccates|decays|putrefies|decomposes] [peacefully|silently|loudly]|writhes with maggots].`);
			
			new G.act(0.01,['dead alive:0 dead:>1 any'],`[BLUE]A god comes upon this mess and revives everyone out of boredom.<br>How nice! Everybody's back.`,p=>{
				for (var i in G.chars){G.chars[i].lose('dead');G.chars[i].lose('zombie');G.chars[i].lose('ghost');G.chars[i].lose('bleeding out');G.chars[i].lose('concussed');G.chars[i].lose('burnt');G.chars[i].gain('revived');}
			});
			new G.act(0.03,['dead alive:0 dead:1 any'],`[BLUE]A god comes upon this mess and revives [1] out of boredom.<br>How nice!`,p=>{p[1].lose('dead');p[1].lose('zombie');p[1].lose('ghost');p[1].lose('bleeding out');p[1].lose('concussed');p[1].lose('burnt');p[1].gain('revived');});
			
			new G.act(FORCE,['revived dead any'],`[1] was about to live again, but is, sadly, still dead.`,p=>{p[1].lose('revived');});
			
			new G.act(FORCE,['revived !suicidal !dead every'],`[1] feels [1:themself], unsure what just happened. Guess [1:g|he's|she's|they're] alive again.`,p=>{p[1].lose('sheep');p[1].lose('revived');});
			new G.act(FORCE,['revived suicidal !dead every'],`[1] feels [1:themself], unsure what just happened. Guess [1:g|he's|she's|they're] alive again.<br>Goddammit.`,p=>{p[1].lose('sheep');p[1].lose('revived');});
			
			/*
			//just a test
			new G.act(1,['','+'],``,p=>{
				var traitsList=[];
				for (var i in G.perks)
				{
					var me=G.perks[i];
					if (me.def && me.type=='trait') traitsList.push(me);
				}
				var me=new G.char({name:c(['Bob','Bub','Blob','Brob','Blib','Blug','Blab'])+c(['ert','urt','art','ard','by']),pic:c([p[1],p[2]]).pic,perks:[c(traitsList),c(traitsList)],gender:c([0,0,0,1,1,1,2])});
				me.join(p[1].team);
				
				return `[BLUE][1] and [2] decide to have a child!<br>They name the child <e>${me.name}</e>.`;
			});
			*/
			
			for (var i in G.acts)
			{
				var me=G.acts[i];
				if ((me.text.split('[').length-1)!=(me.text.split(']').length-1)) console.log(`Warning : brackets in the action "`,me.text,`" do not match.`);
			}
			
			
			let actsList=shuffle(G.actsForced).concat(shuffle(G.actsOther));
			
			G.parse=function(text,actors)
			{
				/*
					syntax :
					'[1] looks at [2]'
						> names of people or teams
					'[1] looks at [1:g|himself|herself|themself]'
						> outputs one of the 3 options depending on gender
						> shortcuts : [1:they], [1:them], [1:their], [1:themself]
					'[1] [wanders|walks|skips] around'
						> outputs one of several options, at random
						> note that this can be nested, ie. '[1] [eats [cake|ice cream]|looks at [2]]'
				*/
				var input=text.split('');
				var out='';
				var tag='';
				var intag=0;
				
				for (var i in input)
				{
					if (input[i]=='[' && intag==0) {intag++;tag='';}
					else if (input[i]=='[' && intag>0) {intag++;tag+='[';}
					else if (input[i]==']' && intag>1) {intag--;tag+=']';}
					else if (input[i]==']' && intag==1)
					{
						if (tag=='RED'){out+='[RED]'}
						else if (tag=='BLUE'){out+='[BLUE]'}
						else if (tag.length>0)
						{
							var bits=tag.split('|');
							//if (!isNaN(bits[0]) && (tag.indexOf('|')==-1 || tag.indexOf(':')!=-1) && actors[parseInt(bits[0])-1])
							if (tag.indexOf('|')==-1 || tag.indexOf(':')!=-1)
							{
								var prop=0;
								if (bits[0].indexOf(':')!=-1){prop=bits[0].split(':')[1];bits[0]=bits[0].split(':')[0];}
								
								if (!isNaN(bits[0]) && actors[parseInt(bits[0])-1])
								{
									var actor=actors[parseInt(bits[0])-1];
									if (prop=='g')
									{
										out+=G.parse([bits[1],bits[2],bits[3]][actor.gender].replaceAll('{PIPE}','|').replaceAll('{COLON}',':'),actors);
									}
									else if (prop=='they') {out+=['he','she','they'][actor.gender];}
									else if (prop=='them') {out+=['him','her','them'][actor.gender];}
									else if (prop=='their') {out+=['his','her','their'][actor.gender];}
									else if (prop=='themself' || prop=='themselves') {out+=['himself','herself','themself'][actor.gender];}
									else out+='<e>'+actor.name+'</e>';
								}
								else out+='<e>[invalid actor : '+bits[0]+']</e>';
							}
							else if (tag.indexOf('|')!=-1)
							{
								out+=G.parse(c(bits).replaceAll('{PIPE}','|').replaceAll('{COLON}',':'),actors);
							}
							else out+='['+tag+']';
						}
						else out+='['+tag+']';
						intag=0;
						tag='';
					}
					else if (intag)
					{
						if (intag>1 && input[i]=='|') tag+='{PIPE}';
						else if (intag>1 && input[i]==':') tag+='{COLON}';
						else tag+=input[i];
					}
					else
					{
						var toAdd=input[i];
						out+=toAdd;
					}
				}
				return out;
			}
			
			//round
			G.round=0;
			G.nextRound=function()
			{
				var actions=[];
				G.deadThisRound=[];
				
				var str='';
				
				for (var i in G.teams){G.teams[i].acted=false;}
				for (var i in G.chars){G.chars[i].acted=false;}
				
				var everybody=shuffle(G.teams).concat(shuffle(G.chars));
				for (var iAct=0;iAct<everybody.length;iAct++)
				{
					var me=everybody[iAct];
					
					if (me.tier==0 || (Math.random()<1/5))
					{
						var acts=[];
						for (var i in actsList)
						{
							var act=actsList[i];
							var loops=0;
							//chances over 1 add the act multiple times to the choice list
							if (act.chance>1) loops=Math.min(20,Math.floor(act.chance)+(Math.random()<(act.chance-Math.floor(act.chance))?1:0));
							else if (act.chance==FORCE || Math.random()<act.chance) loops=1;
							for (var ii=0;ii<loops;ii++)
							{
								acts.push(act);
							}
						}
						var choice=0;
						var actors=[];
						for (var i in acts)
						{
							var act=acts[i];
							actors=act.fit(me);//returns a random selection of people who match the act; the first person must be "me"
							if (actors)
							{
								choice=act;
								break;
							}
						}
						if (choice)
						{
							if (choice.chance!=FORCE) {actsList.splice(actsList.indexOf(choice),1);actsList.push(choice);}//put it back at the end
							//for (var i in actors){actors[i].acted=true;}
							if (actors.length>=1) actors[0].acted=true;
							var text=choice.text;
							var overrideText=0;
							choice.uses++;
							if (choice.func) overrideText=choice.func(([0]).concat(actors));
							var text=G.parse(overrideText||text,actors);
							var classes=[];
							if (text.indexOf('[RED]')!=-1) classes.push('red');
								text=text.replaceAll('[RED]','');
							if (text.indexOf('[BLUE]')!=-1) classes.push('blue');
								text=text.replaceAll('[BLUE]','');
							var action={chars:actors,text:text,classes:classes.join(' ')};
							actions.push(action);
							
							var pics='';
							var chars=[];
							for (var ii in action.chars)
							{
								if (action.chars[ii].type=='team')
								{
									for (var iii in action.chars[ii].chars)
									{
										if (chars.indexOf(action.chars[ii].chars[iii])==-1) chars.push(action.chars[ii].chars[iii]);
									}
								}
								else if (chars.indexOf(action.chars[ii])==-1) chars.push(action.chars[ii]);
							}
							for (var ii in chars)
							{
								pics+=`<img src="${chars[ii].pic}" class="pic" title="${chars[ii].name}"/>`;
								if (chars[ii].has('ghost')) pics+=`<div class="picGhost"></div>`;
								else if (chars[ii].has('zombie')) pics+=`<div class="picZombie"></div>`;
								else if (chars[ii].has('dead')) pics+=`<div class="picSkull"></div>`;
								else if (chars[ii].has('bleeding out')||chars[ii].has('concussed')||chars[ii].has('burnt')) pics+=`<div class="picWound"></div>`;
							}
							str+=`<div class="box action${action.classes?(' '+action.classes):''}"><div>${pics}</div><div>${action.text}</div></div>`;
						}
					}
				}
				
				if (!str) str=`<div class="box action"><div></div><div>(Absolutely nothing happened.)</div></div>`;
				G.logPos=0;
				G.log(str);
				G.updateLogButtons();
				
				G.round++;
				
				/*if (true)
				{
					var str2='';
					for (var i in actsList)
					{
						str2+=actsList[i].text+'<br>';
					}
					str+=`<div style="position:absolute;left:0px;top:0px;">${str2}</div>`;
				}*/
				
				l('round').innerHTML=str;
				/*var nodes=l('round').getElementsByClassName('action');
					for (var i=nodes.length-1;i>=0;i--){animRemove(nodes[i]);}
				l('round').insertAdjacentHTML('afterbegin',str);*/
				if (!G.autoroundOn)
				{
					var nodes=l('round').getElementsByClassName('action');
					for (var i=nodes.length-1;i>=0;i--){animAdd(nodes[i]);}
				}
				var str='';
				var dead=0,healthy=0,wounded=0;zombie=0;ghost=0;
				for (var i in G.chars)
				{
					var me=G.chars[i];
					if (me.has('zombie')) zombie++
					else if (me.has('ghost')) {ghost++; dead++;}
					else if (me.has('dead')) dead++;
					else if (me.has('bleeding out') ||  me.has('concussed') || me.has('burnt')) wounded++
					else healthy++;
				}
				str+=`Healthy : ${healthy} | Wounded : ${wounded} | Dead : ${dead}`;
				if (ghost>0) str+=` | Ghosts : ${ghost}`;
				if (zombie>0) str+=` | Zombified : ${zombie}`;
				l('roundStats').innerHTML=str;
				l('roundN').innerHTML='Round '+G.round;
				var alive=healthy+wounded;
				if (alive==0)
				{
					if (G.chars.length==0) l('everyoneDeadDetails').innerHTML=`There's literally nobody here, dead or alive.`;
					else l('everyoneDeadDetails').innerHTML=`Everyone is dead.`;
					l('everyoneDead').style.display='block';
				}
				else l('everyoneDead').style.display='none';
				
				if (G.deadThisRound.length>0)
				{
					var str=`<header>Died this round :</header>`;
					str+=`<div style="font-size:12px;"><cap>`;
						var chars=G.deadThisRound;
						for (var i=0;i<chars.length;i++)
						{
							str+=`<div style="display:inline-block;padding:4px 16px;"><img src="${chars[i].pic}" class="pic intext" title="${chars[i].name}"/> <e style="color:#e2461f;">${chars[i].name}</e>`;
								if (chars[i].killer.length>0) str+=`, <span style="font-size:80%;">killed by <b>${chars[i].killer.map(killer=>killer.name).join(', ')}</b> (${chars[i].deathReason})</span>`;
								else str+=` <span style="font-size:80%;">(${chars[i].deathReason})</span>`;
							str+=`</div>`;
						}
					str+=`</cap></div>`;
					l('deadThisRound').innerHTML=str;
					l('deadThisRound').style.display='block';
				}
				else l('deadThisRound').style.display='none';
				
				var end=false;
				
				if (alive>0)
				{
					var teamsAlive=[];
					var soleSurvivor=0;
					for (var i in G.chars)
					{
						var me=G.chars[i];
						if (me.has('dead')) {}
						else if (me.has('ghost') || me.has('zombie')) {}
						else
						{
							soleSurvivor=me;
							if (me.team && teamsAlive.indexOf(me.team)==-1) teamsAlive.push(me.team);
						}
					}
					if (G.chars.length>1 && alive==1)
					{
						l('soleSurvivor').style.display='block';
						l('soleSurvivorDetails').innerHTML=`<div>Everyone is dead except <e>${soleSurvivor.name}</e>${soleSurvivor.team?(' from <e>'+soleSurvivor.team.name+'</e>'):''}, who stands as the sole survivor.</div>`;
						end=true;
					}
					else if (G.teams.length>1 && teamsAlive.length==1)
					{
						l('soleSurvivor').style.display='block';
						l('soleSurvivorDetails').innerHTML=`<div><e>${teamsAlive[0].name}</e> emerges as the victorious team. Everyone else is dead.</div>`;
						end=true;
					}
					else l('soleSurvivor').style.display='none';
				}
				else
				{
					end=true;
					l('soleSurvivor').style.display='none';
				}
				
				if (end)
				{
					var str=`<header>Tally</header>`;
					str+=`<div style="font-size:12px;"><cap>`;
					//display:flex;flex-direction:column;flex-wrap:wrap;justify-content:flex-start;align-content:stretch;align-items:stretch;
						var chars=G.chars.slice(0);
						chars=chars.sort((a,b)=>b.kills.length-a.kills.length);
						for (var i=0;i<chars.length;i++)
						{
							str+=`<div style="display:inline-block;padding:4px 16px;${i==0?'font-size:150%;':i<(Math.min(chars.length/2,3))?'font-size:125%;':''}"><img src="${chars[i].pic}" class="pic intext" title="${chars[i].name}"/> <b>#${i+1}</b> : <e>${chars[i].name}</e>${chars[i].has('dead')?'<span style="color:#e2461f;">&dagger;</span>':''}, <span style="font-size:80%;">with <b>${chars[i].kills.length==0?'no kills':chars[i].kills.length==1?'<span style="color:#e2461f;">1 kill</span>':('<span style="color:#e2461f;">'+chars[i].kills.length+' kills</span>')}</b></span></div>`;
						}
					str+=`</cap></div>`;
					l('tally').innerHTML=str;
					l('tally').style.display='block';
				}
				else l('tally').style.display='none';
			}
			
			l('main').innerHTML=`
				<div class="box red" id="summary">
					<div>A horrible struggle for survival is taking place.</div>
				</div>
				<div style="text-align:left;overflow:hidden;"><div class="button" id="backToCreator">&lt; Go back to team setup</div><div class="button" id="exportSetup">Export initial setup...</div><span style="float:right;"><div class="button" id="viewDetails">Details...</div><div class="button" id="nextRound2">Next round &gt;</div></span></div>
				<header id="roundN"></header>
				<div style="height:23px;margin-top:-30px;margin-bottom:11px;clear:both;overflow:hidden;">
					<div class="button" id="logBackFull" style="float:left;">&lt; &lt;</div>
					<div class="button" id="logBack" style="float:left;">&lt; View previous round</div>
					<div class="button" id="logForwardFull" style="float:right;">&gt; &gt;</div>
					<div class="button" id="logForward" style="float:right;">View next round &gt;</div>
				</div>
				<div id="round"></div>
				<div class="box" id="deadThisRound" style="display:none;text-align:center;background:rgba(0,0,0,0.5);"></div>
				<div class="box red" id="everyoneDead" style="display:none;">
					<div id="everyoneDeadDetails"></div>
					<div>You may want to <div class="button" id="backToCreator2">Go back to team setup</div>.</div>
				</div>
				<div class="box blue" id="soleSurvivor" style="display:none;">
					<div id="soleSurvivorDetails"></div>
					<div>You may want to <div class="button" id="backToCreator3">Go back to team setup</div>, or keep going until no one is left alive.</div>
				</div>
				<div class="box" id="tally" style="display:none;text-align:center;background:rgba(0,0,0,0.5);"></div>
				<header>
					<div style="font-size:10px;" id="roundStats"></div>
					<div class="button bigButton" id="nextRound">Next round</div>
				</header>
			`;
			
			addEvent(l('nextRound'),'click',function(){G.nextRound();});
			addEvent(l('nextRound2'),'click',function(){G.nextRound();});
			addEvent(l('viewDetails'),'click',function(){G.viewDetails();});
			addEvent(l('backToCreator'),'click',function(){G.creator();});
			addEvent(l('backToCreator2'),'click',function(){G.creator();});
			addEvent(l('backToCreator3'),'click',function(){G.creator();});
			addEvent(l('exportSetup'),'click',function(){G.exportSetup(G.setupData);});
			
			addEvent(l('logBack'),'click',function(){G.logBack();});
			addEvent(l('logBackFull'),'click',function(){G.logBack(true);});
			addEvent(l('logForward'),'click',function(){G.logForward();});
			addEvent(l('logForwardFull'),'click',function(){G.logForward(true);});
			
			G.roundLog=[];
			G.logPos=0;//how many rounds back we are
			G.updateLogButtons=function()
			{
				if (!G.roundLog[G.logPos+1]) {l('logBack').style.display='none';l('logBackFull').style.display='none';} else {l('logBack').style.display='inline-block';l('logBackFull').style.display='inline-block';}
				if (!G.roundLog[G.logPos-1]) {l('logForward').style.display='none';l('logForwardFull').style.display='none';} else {l('logForward').style.display='inline-block';l('logForwardFull').style.display='inline-block';}
			}
			G.log=function(str)
			{
				G.roundLog.unshift(str);
				if (G.roundLog.length>=52) G.roundLog.pop();
			}
			G.logBack=function(full)
			{
				var str=G.roundLog[G.logPos+1]||0;
				if (full) str=G.roundLog[G.roundLog.length-1]||0;
				if (!str) return false;
				G.logPos++;
				if (full) G.logPos=G.roundLog.length-1;
				l('round').innerHTML=str;
				l('roundN').innerHTML='Round '+(G.round-G.logPos)+' ('+(G.logPos>0?('archive level -'+G.logPos):'current')+')';
				G.updateLogButtons();
			}
			G.logForward=function(full)
			{
				var str=G.roundLog[G.logPos-1]||0;
				if (full) str=G.roundLog[0]||0;
				if (!str) return false;
				G.logPos--;
				if (full) G.logPos=0;
				l('round').innerHTML=str;
				l('roundN').innerHTML='Round '+(G.round-G.logPos)+' ('+(G.logPos>0?('archive level -'+G.logPos):'current')+')';
				G.updateLogButtons();
			}
			
			G.nextRound();
		}
		
		G.autoroundOn=false;
		G.autoroundT=100;
		G.autoround=function(t)
		{
			if (t) G.autoroundT=Math.max(t*1000,10); else G.autoroundT=100;
			if (!G.started) G.start();
			G.autoroundOn=!G.autoroundOn;G.autoroundLoop();
		}
		G.autoroundLoop=function()
		{
			if (G.autoroundOn)
			{
				G.nextRound();
				setTimeout(G.autoroundLoop,G.autoroundT);
			}
		}
		
		G.creator();
	},
};

if (!G.launched) G.init();
</script>